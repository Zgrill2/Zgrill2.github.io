var Vc=Object.defineProperty;var Yc=(e,t,n)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ki=(e,t,n)=>Yc(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cl={exports:{}},sa={},dl={exports:{}},P={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zn=Symbol.for("react.element"),Kc=Symbol.for("react.portal"),$c=Symbol.for("react.fragment"),Qc=Symbol.for("react.strict_mode"),Xc=Symbol.for("react.profiler"),Zc=Symbol.for("react.provider"),Jc=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),nd=Symbol.for("react.memo"),rd=Symbol.for("react.lazy"),$i=Symbol.iterator;function ad(e){return e===null||typeof e!="object"?null:(e=$i&&e[$i]||e["@@iterator"],typeof e=="function"?e:null)}var fl={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pl=Object.assign,hl={};function dn(e,t,n){this.props=e,this.context=t,this.refs=hl,this.updater=n||fl}dn.prototype.isReactComponent={};dn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gl(){}gl.prototype=dn.prototype;function Ho(e,t,n){this.props=e,this.context=t,this.refs=hl,this.updater=n||fl}var Ko=Ho.prototype=new gl;Ko.constructor=Ho;pl(Ko,dn.prototype);Ko.isPureReactComponent=!0;var Qi=Array.isArray,ml=Object.prototype.hasOwnProperty,$o={current:null},yl={key:!0,ref:!0,__self:!0,__source:!0};function bl(e,t,n){var r,a={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)ml.call(t,r)&&!yl.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];a.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Zn,type:e,key:o,ref:s,props:a,_owner:$o.current}}function od(e,t){return{$$typeof:Zn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zn}function id(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xi=/\/+/g;function Ra(e,t){return typeof e=="object"&&e!==null&&e.key!=null?id(""+e.key):t.toString(36)}function Sr(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Zn:case Kc:s=!0}}if(s)return s=e,a=a(s),e=r===""?"."+Ra(s,0):r,Qi(a)?(n="",e!=null&&(n=e.replace(Xi,"$&/")+"/"),Sr(a,t,n,"",function(f){return f})):a!=null&&(Qo(a)&&(a=od(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(Xi,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=r===""?".":r+":",Qi(e))for(var l=0;l<e.length;l++){o=e[l];var u=r+Ra(o,l);s+=Sr(o,t,n,u,a)}else if(u=ad(e),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=r+Ra(o,l++),s+=Sr(o,t,n,u,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function or(e,t,n){if(e==null)return e;var r=[],a=0;return Sr(e,r,"","",function(o){return t.call(n,o,a++)}),r}function sd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ce={current:null},Rr={transition:null},ld={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:Rr,ReactCurrentOwner:$o};function vl(){throw Error("act(...) is not supported in production builds of React.")}P.Children={map:or,forEach:function(e,t,n){or(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return or(e,function(){t++}),t},toArray:function(e){return or(e,function(t){return t})||[]},only:function(e){if(!Qo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};P.Component=dn;P.Fragment=$c;P.Profiler=Xc;P.PureComponent=Ho;P.StrictMode=Qc;P.Suspense=td;P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ld;P.act=vl;P.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=pl({},e.props),a=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=$o.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)ml.call(t,u)&&!yl.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Zn,type:e.type,key:a,ref:o,props:r,_owner:s}};P.createContext=function(e){return e={$$typeof:Jc,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zc,_context:e},e.Consumer=e};P.createElement=bl;P.createFactory=function(e){var t=bl.bind(null,e);return t.type=e,t};P.createRef=function(){return{current:null}};P.forwardRef=function(e){return{$$typeof:ed,render:e}};P.isValidElement=Qo;P.lazy=function(e){return{$$typeof:rd,_payload:{_status:-1,_result:e},_init:sd}};P.memo=function(e,t){return{$$typeof:nd,type:e,compare:t===void 0?null:t}};P.startTransition=function(e){var t=Rr.transition;Rr.transition={};try{e()}finally{Rr.transition=t}};P.unstable_act=vl;P.useCallback=function(e,t){return ce.current.useCallback(e,t)};P.useContext=function(e){return ce.current.useContext(e)};P.useDebugValue=function(){};P.useDeferredValue=function(e){return ce.current.useDeferredValue(e)};P.useEffect=function(e,t){return ce.current.useEffect(e,t)};P.useId=function(){return ce.current.useId()};P.useImperativeHandle=function(e,t,n){return ce.current.useImperativeHandle(e,t,n)};P.useInsertionEffect=function(e,t){return ce.current.useInsertionEffect(e,t)};P.useLayoutEffect=function(e,t){return ce.current.useLayoutEffect(e,t)};P.useMemo=function(e,t){return ce.current.useMemo(e,t)};P.useReducer=function(e,t,n){return ce.current.useReducer(e,t,n)};P.useRef=function(e){return ce.current.useRef(e)};P.useState=function(e){return ce.current.useState(e)};P.useSyncExternalStore=function(e,t,n){return ce.current.useSyncExternalStore(e,t,n)};P.useTransition=function(){return ce.current.useTransition()};P.version="18.3.1";dl.exports=P;var N=dl.exports;const ud=Hc(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd=N,dd=Symbol.for("react.element"),fd=Symbol.for("react.fragment"),pd=Object.prototype.hasOwnProperty,hd=cd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gd={key:!0,ref:!0,__self:!0,__source:!0};function wl(e,t,n){var r,a={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)pd.call(t,r)&&!gd.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:dd,type:e,key:o,ref:s,props:a,_owner:hd.current}}sa.Fragment=fd;sa.jsx=wl;sa.jsxs=wl;cl.exports=sa;var i=cl.exports,Za={},xl={exports:{}},ke={},kl={exports:{}},Cl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,A){var M=_.length;_.push(A);e:for(;0<M;){var H=M-1>>>1,Z=_[H];if(0<a(Z,A))_[H]=A,_[M]=Z,M=H;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var A=_[0],M=_.pop();if(M!==A){_[0]=M;e:for(var H=0,Z=_.length,rr=Z>>>1;H<rr;){var xt=2*(H+1)-1,Sa=_[xt],kt=xt+1,ar=_[kt];if(0>a(Sa,M))kt<Z&&0>a(ar,Sa)?(_[H]=ar,_[kt]=M,H=kt):(_[H]=Sa,_[xt]=M,H=xt);else if(kt<Z&&0>a(ar,M))_[H]=ar,_[kt]=M,H=kt;else break e}}return A}function a(_,A){var M=_.sortIndex-A.sortIndex;return M!==0?M:_.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],f=[],h=1,y=null,g=3,m=!1,v=!1,C=!1,q=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(_){for(var A=n(f);A!==null;){if(A.callback===null)r(f);else if(A.startTime<=_)r(f),A.sortIndex=A.expirationTime,t(u,A);else break;A=n(f)}}function b(_){if(C=!1,p(_),!v)if(n(u)!==null)v=!0,Ca(k);else{var A=n(f);A!==null&&Ta(b,A.startTime-_)}}function k(_,A){v=!1,C&&(C=!1,c(w),w=-1),m=!0;var M=g;try{for(p(A),y=n(u);y!==null&&(!(y.expirationTime>A)||_&&!O());){var H=y.callback;if(typeof H=="function"){y.callback=null,g=y.priorityLevel;var Z=H(y.expirationTime<=A);A=e.unstable_now(),typeof Z=="function"?y.callback=Z:y===n(u)&&r(u),p(A)}else r(u);y=n(u)}if(y!==null)var rr=!0;else{var xt=n(f);xt!==null&&Ta(b,xt.startTime-A),rr=!1}return rr}finally{y=null,g=M,m=!1}}var T=!1,S=null,w=-1,j=5,E=-1;function O(){return!(e.unstable_now()-E<j)}function ye(){if(S!==null){var _=e.unstable_now();E=_;var A=!0;try{A=S(!0,_)}finally{A?Te():(T=!1,S=null)}}else T=!1}var Te;if(typeof d=="function")Te=function(){d(ye)};else if(typeof MessageChannel<"u"){var Hi=new MessageChannel,zc=Hi.port2;Hi.port1.onmessage=ye,Te=function(){zc.postMessage(null)}}else Te=function(){q(ye,0)};function Ca(_){S=_,T||(T=!0,Te())}function Ta(_,A){w=q(function(){_(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,Ca(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(_){switch(g){case 1:case 2:case 3:var A=3;break;default:A=g}var M=g;g=A;try{return _()}finally{g=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,A){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var M=g;g=_;try{return A()}finally{g=M}},e.unstable_scheduleCallback=function(_,A,M){var H=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,_){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=M+Z,_={id:h++,callback:A,priorityLevel:_,startTime:M,expirationTime:Z,sortIndex:-1},M>H?(_.sortIndex=M,t(f,_),n(u)===null&&_===n(f)&&(C?(c(w),w=-1):C=!0,Ta(b,M-H))):(_.sortIndex=Z,t(u,_),v||m||(v=!0,Ca(k))),_},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(_){var A=g;return function(){var M=g;g=A;try{return _.apply(this,arguments)}finally{g=M}}}})(Cl);kl.exports=Cl;var md=kl.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=N,xe=md;function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tl=new Set,Dn={};function Bt(e,t){rn(e,t),rn(e+"Capture",t)}function rn(e,t){for(Dn[e]=t,e=0;e<t.length;e++)Tl.add(t[e])}var Ke=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=Object.prototype.hasOwnProperty,bd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zi={},Ji={};function vd(e){return Ja.call(Ji,e)?!0:Ja.call(Zi,e)?!1:bd.test(e)?Ji[e]=!0:(Zi[e]=!0,!1)}function wd(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xd(e,t,n,r){if(t===null||typeof t>"u"||wd(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function de(e,t,n,r,a,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){re[e]=new de(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];re[t]=new de(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){re[e]=new de(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){re[e]=new de(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){re[e]=new de(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){re[e]=new de(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){re[e]=new de(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){re[e]=new de(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){re[e]=new de(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xo=/[\-:]([a-z])/g;function Zo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xo,Zo);re[t]=new de(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xo,Zo);re[t]=new de(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xo,Zo);re[t]=new de(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){re[e]=new de(e,1,!1,e.toLowerCase(),null,!1,!1)});re.xlinkHref=new de("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){re[e]=new de(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jo(e,t,n,r){var a=re.hasOwnProperty(t)?re[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xd(t,n,a,r)&&(n=null),r||a===null?vd(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ze=yd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ir=Symbol.for("react.element"),Gt=Symbol.for("react.portal"),Lt=Symbol.for("react.fragment"),ei=Symbol.for("react.strict_mode"),eo=Symbol.for("react.profiler"),Sl=Symbol.for("react.provider"),Rl=Symbol.for("react.context"),ti=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),no=Symbol.for("react.suspense_list"),ni=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),_l=Symbol.for("react.offscreen"),es=Symbol.iterator;function hn(e){return e===null||typeof e!="object"?null:(e=es&&e[es]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,_a;function kn(e){if(_a===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_a=t&&t[1]||""}return`
`+_a+e}var Na=!1;function Ea(e,t){if(!e||Na)return"";Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),o=r.stack.split(`
`),s=a.length-1,l=o.length-1;1<=s&&0<=l&&a[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==o[l]){var u=`
`+a[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?kn(e):""}function kd(e){switch(e.tag){case 5:return kn(e.type);case 16:return kn("Lazy");case 13:return kn("Suspense");case 19:return kn("SuspenseList");case 0:case 2:case 15:return e=Ea(e.type,!1),e;case 11:return e=Ea(e.type.render,!1),e;case 1:return e=Ea(e.type,!0),e;default:return""}}function ro(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lt:return"Fragment";case Gt:return"Portal";case eo:return"Profiler";case ei:return"StrictMode";case to:return"Suspense";case no:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rl:return(e.displayName||"Context")+".Consumer";case Sl:return(e._context.displayName||"Context")+".Provider";case ti:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ni:return t=e.displayName||null,t!==null?t:ro(e.type)||"Memo";case et:t=e._payload,e=e._init;try{return ro(e(t))}catch{}}return null}function Cd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ro(t);case 8:return t===ei?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ht(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Td(e){var t=Nl(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sr(e){e._valueTracker||(e._valueTracker=Td(e))}function El(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nl(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ir(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ao(e,t){var n=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ts(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ht(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jl(e,t){t=t.checked,t!=null&&Jo(e,"checked",t,!1)}function oo(e,t){jl(e,t);var n=ht(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?io(e,t.type,n):t.hasOwnProperty("defaultValue")&&io(e,t.type,ht(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ns(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function io(e,t,n){(t!=="number"||Ir(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cn=Array.isArray;function Xt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function so(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(x(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rs(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(x(92));if(Cn(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ht(n)}}function Al(e,t){var n=ht(t.value),r=ht(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function as(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ql(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ql(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lr,Ml=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lr=lr||document.createElement("div"),lr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sd=["Webkit","ms","Moz","O"];Object.keys(Rn).forEach(function(e){Sd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rn[t]=Rn[e]})});function Pl(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rn.hasOwnProperty(e)&&Rn[e]?(""+t).trim():t+"px"}function Dl(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=Pl(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Rd=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(e,t){if(t){if(Rd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(x(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(x(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(t.style!=null&&typeof t.style!="object")throw Error(x(62))}}function co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var po=null,Zt=null,Jt=null;function os(e){if(e=tr(e)){if(typeof po!="function")throw Error(x(280));var t=e.stateNode;t&&(t=fa(t),po(e.stateNode,e.type,t))}}function Bl(e){Zt?Jt?Jt.push(e):Jt=[e]:Zt=e}function Il(){if(Zt){var e=Zt,t=Jt;if(Jt=Zt=null,os(e),t)for(e=0;e<t.length;e++)os(t[e])}}function Wl(e,t){return e(t)}function Gl(){}var ja=!1;function Ll(e,t,n){if(ja)return e(t,n);ja=!0;try{return Wl(e,t,n)}finally{ja=!1,(Zt!==null||Jt!==null)&&(Gl(),Il())}}function In(e,t){var n=e.stateNode;if(n===null)return null;var r=fa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(x(231,t,typeof n));return n}var ho=!1;if(Ke)try{var gn={};Object.defineProperty(gn,"passive",{get:function(){ho=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch{ho=!1}function _d(e,t,n,r,a,o,s,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(h){this.onError(h)}}var _n=!1,Wr=null,Gr=!1,go=null,Nd={onError:function(e){_n=!0,Wr=e}};function Ed(e,t,n,r,a,o,s,l,u){_n=!1,Wr=null,_d.apply(Nd,arguments)}function jd(e,t,n,r,a,o,s,l,u){if(Ed.apply(this,arguments),_n){if(_n){var f=Wr;_n=!1,Wr=null}else throw Error(x(198));Gr||(Gr=!0,go=f)}}function It(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ul(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function is(e){if(It(e)!==e)throw Error(x(188))}function Ad(e){var t=e.alternate;if(!t){if(t=It(e),t===null)throw Error(x(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return is(a),e;if(o===r)return is(a),t;o=o.sibling}throw Error(x(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}if(n.tag!==3)throw Error(x(188));return n.stateNode.current===n?e:t}function Ol(e){return e=Ad(e),e!==null?Fl(e):null}function Fl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fl(e);if(t!==null)return t;e=e.sibling}return null}var zl=xe.unstable_scheduleCallback,ss=xe.unstable_cancelCallback,qd=xe.unstable_shouldYield,Md=xe.unstable_requestPaint,K=xe.unstable_now,Pd=xe.unstable_getCurrentPriorityLevel,ai=xe.unstable_ImmediatePriority,Vl=xe.unstable_UserBlockingPriority,Lr=xe.unstable_NormalPriority,Dd=xe.unstable_LowPriority,Yl=xe.unstable_IdlePriority,la=null,Ue=null;function Bd(e){if(Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(la,e,void 0,(e.current.flags&128)===128)}catch{}}var De=Math.clz32?Math.clz32:Gd,Id=Math.log,Wd=Math.LN2;function Gd(e){return e>>>=0,e===0?32:31-(Id(e)/Wd|0)|0}var ur=64,cr=4194304;function Tn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ur(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~a;l!==0?r=Tn(l):(o&=s,o!==0&&(r=Tn(o)))}else s=n&~a,s!==0?r=Tn(s):o!==0&&(r=Tn(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-De(t),a=1<<n,r|=e[n],t&=~a;return r}function Ld(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ud(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-De(o),l=1<<s,u=a[s];u===-1?(!(l&n)||l&r)&&(a[s]=Ld(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}function mo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hl(){var e=ur;return ur<<=1,!(ur&4194240)&&(ur=64),e}function Aa(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Jn(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-De(t),e[t]=n}function Od(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-De(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function oi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-De(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var B=0;function Kl(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $l,ii,Ql,Xl,Zl,yo=!1,dr=[],it=null,st=null,lt=null,Wn=new Map,Gn=new Map,nt=[],Fd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ls(e,t){switch(e){case"focusin":case"focusout":it=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":Wn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(t.pointerId)}}function mn(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=tr(t),t!==null&&ii(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function zd(e,t,n,r,a){switch(t){case"focusin":return it=mn(it,e,t,n,r,a),!0;case"dragenter":return st=mn(st,e,t,n,r,a),!0;case"mouseover":return lt=mn(lt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Wn.set(o,mn(Wn.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Gn.set(o,mn(Gn.get(o)||null,e,t,n,r,a)),!0}return!1}function Jl(e){var t=St(e.target);if(t!==null){var n=It(t);if(n!==null){if(t=n.tag,t===13){if(t=Ul(n),t!==null){e.blockedOn=t,Zl(e.priority,function(){Ql(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _r(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fo=r,n.target.dispatchEvent(r),fo=null}else return t=tr(n),t!==null&&ii(t),e.blockedOn=n,!1;t.shift()}return!0}function us(e,t,n){_r(e)&&n.delete(t)}function Vd(){yo=!1,it!==null&&_r(it)&&(it=null),st!==null&&_r(st)&&(st=null),lt!==null&&_r(lt)&&(lt=null),Wn.forEach(us),Gn.forEach(us)}function yn(e,t){e.blockedOn===t&&(e.blockedOn=null,yo||(yo=!0,xe.unstable_scheduleCallback(xe.unstable_NormalPriority,Vd)))}function Ln(e){function t(a){return yn(a,e)}if(0<dr.length){yn(dr[0],e);for(var n=1;n<dr.length;n++){var r=dr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(it!==null&&yn(it,e),st!==null&&yn(st,e),lt!==null&&yn(lt,e),Wn.forEach(t),Gn.forEach(t),n=0;n<nt.length;n++)r=nt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nt.length&&(n=nt[0],n.blockedOn===null);)Jl(n),n.blockedOn===null&&nt.shift()}var en=Ze.ReactCurrentBatchConfig,Or=!0;function Yd(e,t,n,r){var a=B,o=en.transition;en.transition=null;try{B=1,si(e,t,n,r)}finally{B=a,en.transition=o}}function Hd(e,t,n,r){var a=B,o=en.transition;en.transition=null;try{B=4,si(e,t,n,r)}finally{B=a,en.transition=o}}function si(e,t,n,r){if(Or){var a=bo(e,t,n,r);if(a===null)Ua(e,t,r,Fr,n),ls(e,r);else if(zd(a,e,t,n,r))r.stopPropagation();else if(ls(e,r),t&4&&-1<Fd.indexOf(e)){for(;a!==null;){var o=tr(a);if(o!==null&&$l(o),o=bo(e,t,n,r),o===null&&Ua(e,t,r,Fr,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else Ua(e,t,r,null,n)}}var Fr=null;function bo(e,t,n,r){if(Fr=null,e=ri(r),e=St(e),e!==null)if(t=It(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ul(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fr=e,null}function eu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pd()){case ai:return 1;case Vl:return 4;case Lr:case Dd:return 16;case Yl:return 536870912;default:return 16}default:return 16}}var at=null,li=null,Nr=null;function tu(){if(Nr)return Nr;var e,t=li,n=t.length,r,a="value"in at?at.value:at.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===a[o-r];r++);return Nr=a.slice(e,1<r?1-r:void 0)}function Er(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function cs(){return!1}function Ce(e){function t(n,r,a,o,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fr:cs,this.isPropagationStopped=cs,this}return V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),t}var fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=Ce(fn),er=V({},fn,{view:0,detail:0}),Kd=Ce(er),qa,Ma,bn,ua=V({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ci,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bn&&(bn&&e.type==="mousemove"?(qa=e.screenX-bn.screenX,Ma=e.screenY-bn.screenY):Ma=qa=0,bn=e),qa)},movementY:function(e){return"movementY"in e?e.movementY:Ma}}),ds=Ce(ua),$d=V({},ua,{dataTransfer:0}),Qd=Ce($d),Xd=V({},er,{relatedTarget:0}),Pa=Ce(Xd),Zd=V({},fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jd=Ce(Zd),ef=V({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tf=Ce(ef),nf=V({},fn,{data:0}),fs=Ce(nf),rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},af={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},of={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=of[e])?!!t[e]:!1}function ci(){return sf}var lf=V({},er,{key:function(e){if(e.key){var t=rf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Er(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?af[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ci,charCode:function(e){return e.type==="keypress"?Er(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Er(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uf=Ce(lf),cf=V({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=Ce(cf),df=V({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ci}),ff=Ce(df),pf=V({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),hf=Ce(pf),gf=V({},ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mf=Ce(gf),yf=[9,13,27,32],di=Ke&&"CompositionEvent"in window,Nn=null;Ke&&"documentMode"in document&&(Nn=document.documentMode);var bf=Ke&&"TextEvent"in window&&!Nn,nu=Ke&&(!di||Nn&&8<Nn&&11>=Nn),hs=" ",gs=!1;function ru(e,t){switch(e){case"keyup":return yf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ut=!1;function vf(e,t){switch(e){case"compositionend":return au(t);case"keypress":return t.which!==32?null:(gs=!0,hs);case"textInput":return e=t.data,e===hs&&gs?null:e;default:return null}}function wf(e,t){if(Ut)return e==="compositionend"||!di&&ru(e,t)?(e=tu(),Nr=li=at=null,Ut=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nu&&t.locale!=="ko"?null:t.data;default:return null}}var xf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xf[e.type]:t==="textarea"}function ou(e,t,n,r){Bl(r),t=zr(t,"onChange"),0<t.length&&(n=new ui("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var En=null,Un=null;function kf(e){mu(e,0)}function ca(e){var t=zt(e);if(El(t))return e}function Cf(e,t){if(e==="change")return t}var iu=!1;if(Ke){var Da;if(Ke){var Ba="oninput"in document;if(!Ba){var ys=document.createElement("div");ys.setAttribute("oninput","return;"),Ba=typeof ys.oninput=="function"}Da=Ba}else Da=!1;iu=Da&&(!document.documentMode||9<document.documentMode)}function bs(){En&&(En.detachEvent("onpropertychange",su),Un=En=null)}function su(e){if(e.propertyName==="value"&&ca(Un)){var t=[];ou(t,Un,e,ri(e)),Ll(kf,t)}}function Tf(e,t,n){e==="focusin"?(bs(),En=t,Un=n,En.attachEvent("onpropertychange",su)):e==="focusout"&&bs()}function Sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ca(Un)}function Rf(e,t){if(e==="click")return ca(t)}function _f(e,t){if(e==="input"||e==="change")return ca(t)}function Nf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ie=typeof Object.is=="function"?Object.is:Nf;function On(e,t){if(Ie(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ja.call(t,a)||!Ie(e[a],t[a]))return!1}return!0}function vs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ws(e,t){var n=vs(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vs(n)}}function lu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uu(){for(var e=window,t=Ir();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ir(e.document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ef(e){var t=uu(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lu(n.ownerDocument.documentElement,n)){if(r!==null&&fi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=ws(n,o);var s=ws(n,r);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jf=Ke&&"documentMode"in document&&11>=document.documentMode,Ot=null,vo=null,jn=null,wo=!1;function xs(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wo||Ot==null||Ot!==Ir(r)||(r=Ot,"selectionStart"in r&&fi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jn&&On(jn,r)||(jn=r,r=zr(vo,"onSelect"),0<r.length&&(t=new ui("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ot)))}function pr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ft={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionend:pr("Transition","TransitionEnd")},Ia={},cu={};Ke&&(cu=document.createElement("div").style,"AnimationEvent"in window||(delete Ft.animationend.animation,delete Ft.animationiteration.animation,delete Ft.animationstart.animation),"TransitionEvent"in window||delete Ft.transitionend.transition);function da(e){if(Ia[e])return Ia[e];if(!Ft[e])return e;var t=Ft[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cu)return Ia[e]=t[n];return e}var du=da("animationend"),fu=da("animationiteration"),pu=da("animationstart"),hu=da("transitionend"),gu=new Map,ks="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mt(e,t){gu.set(e,t),Bt(t,[e])}for(var Wa=0;Wa<ks.length;Wa++){var Ga=ks[Wa],Af=Ga.toLowerCase(),qf=Ga[0].toUpperCase()+Ga.slice(1);mt(Af,"on"+qf)}mt(du,"onAnimationEnd");mt(fu,"onAnimationIteration");mt(pu,"onAnimationStart");mt("dblclick","onDoubleClick");mt("focusin","onFocus");mt("focusout","onBlur");mt(hu,"onTransitionEnd");rn("onMouseEnter",["mouseout","mouseover"]);rn("onMouseLeave",["mouseout","mouseover"]);rn("onPointerEnter",["pointerout","pointerover"]);rn("onPointerLeave",["pointerout","pointerover"]);Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sn));function Cs(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,jd(r,t,void 0,e),e.currentTarget=null}function mu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&a.isPropagationStopped())break e;Cs(a,l,f),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&a.isPropagationStopped())break e;Cs(a,l,f),o=u}}}if(Gr)throw e=go,Gr=!1,go=null,e}function W(e,t){var n=t[So];n===void 0&&(n=t[So]=new Set);var r=e+"__bubble";n.has(r)||(yu(t,e,2,!1),n.add(r))}function La(e,t,n){var r=0;t&&(r|=4),yu(n,e,r,t)}var hr="_reactListening"+Math.random().toString(36).slice(2);function Fn(e){if(!e[hr]){e[hr]=!0,Tl.forEach(function(n){n!=="selectionchange"&&(Mf.has(n)||La(n,!1,e),La(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hr]||(t[hr]=!0,La("selectionchange",!1,t))}}function yu(e,t,n,r){switch(eu(t)){case 1:var a=Yd;break;case 4:a=Hd;break;default:a=si}n=a.bind(null,t,n,e),a=void 0,!ho||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ua(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;s=s.return}for(;l!==null;){if(s=St(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}Ll(function(){var f=o,h=ri(n),y=[];e:{var g=gu.get(e);if(g!==void 0){var m=ui,v=e;switch(e){case"keypress":if(Er(n)===0)break e;case"keydown":case"keyup":m=uf;break;case"focusin":v="focus",m=Pa;break;case"focusout":v="blur",m=Pa;break;case"beforeblur":case"afterblur":m=Pa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ds;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ff;break;case du:case fu:case pu:m=Jd;break;case hu:m=hf;break;case"scroll":m=Kd;break;case"wheel":m=mf;break;case"copy":case"cut":case"paste":m=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ps}var C=(t&4)!==0,q=!C&&e==="scroll",c=C?g!==null?g+"Capture":null:g;C=[];for(var d=f,p;d!==null;){p=d;var b=p.stateNode;if(p.tag===5&&b!==null&&(p=b,c!==null&&(b=In(d,c),b!=null&&C.push(zn(d,b,p)))),q)break;d=d.return}0<C.length&&(g=new m(g,v,null,n,h),y.push({event:g,listeners:C}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",g&&n!==fo&&(v=n.relatedTarget||n.fromElement)&&(St(v)||v[$e]))break e;if((m||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=f,v=v?St(v):null,v!==null&&(q=It(v),v!==q||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=f),m!==v)){if(C=ds,b="onMouseLeave",c="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(C=ps,b="onPointerLeave",c="onPointerEnter",d="pointer"),q=m==null?g:zt(m),p=v==null?g:zt(v),g=new C(b,d+"leave",m,n,h),g.target=q,g.relatedTarget=p,b=null,St(h)===f&&(C=new C(c,d+"enter",v,n,h),C.target=p,C.relatedTarget=q,b=C),q=b,m&&v)t:{for(C=m,c=v,d=0,p=C;p;p=Wt(p))d++;for(p=0,b=c;b;b=Wt(b))p++;for(;0<d-p;)C=Wt(C),d--;for(;0<p-d;)c=Wt(c),p--;for(;d--;){if(C===c||c!==null&&C===c.alternate)break t;C=Wt(C),c=Wt(c)}C=null}else C=null;m!==null&&Ts(y,g,m,C,!1),v!==null&&q!==null&&Ts(y,q,v,C,!0)}}e:{if(g=f?zt(f):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var k=Cf;else if(ms(g))if(iu)k=_f;else{k=Sf;var T=Tf}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=Rf);if(k&&(k=k(e,f))){ou(y,k,n,h);break e}T&&T(e,g,f),e==="focusout"&&(T=g._wrapperState)&&T.controlled&&g.type==="number"&&io(g,"number",g.value)}switch(T=f?zt(f):window,e){case"focusin":(ms(T)||T.contentEditable==="true")&&(Ot=T,vo=f,jn=null);break;case"focusout":jn=vo=Ot=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,xs(y,n,h);break;case"selectionchange":if(jf)break;case"keydown":case"keyup":xs(y,n,h)}var S;if(di)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ut?ru(e,n)&&(w="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(nu&&n.locale!=="ko"&&(Ut||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ut&&(S=tu()):(at=h,li="value"in at?at.value:at.textContent,Ut=!0)),T=zr(f,w),0<T.length&&(w=new fs(w,e,null,n,h),y.push({event:w,listeners:T}),S?w.data=S:(S=au(n),S!==null&&(w.data=S)))),(S=bf?vf(e,n):wf(e,n))&&(f=zr(f,"onBeforeInput"),0<f.length&&(h=new fs("onBeforeInput","beforeinput",null,n,h),y.push({event:h,listeners:f}),h.data=S))}mu(y,t)})}function zn(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zr(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=In(e,n),o!=null&&r.unshift(zn(e,o,a)),o=In(e,t),o!=null&&r.push(zn(e,o,a))),e=e.return}return r}function Wt(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ts(e,t,n,r,a){for(var o=t._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,a?(u=In(n,o),u!=null&&s.unshift(zn(n,u,l))):a||(u=In(n,o),u!=null&&s.push(zn(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Pf=/\r\n?/g,Df=/\u0000|\uFFFD/g;function Ss(e){return(typeof e=="string"?e:""+e).replace(Pf,`
`).replace(Df,"")}function gr(e,t,n){if(t=Ss(t),Ss(e)!==t&&n)throw Error(x(425))}function Vr(){}var xo=null,ko=null;function Co(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,Rs=typeof Promise=="function"?Promise:void 0,If=typeof queueMicrotask=="function"?queueMicrotask:typeof Rs<"u"?function(e){return Rs.resolve(null).then(e).catch(Wf)}:To;function Wf(e){setTimeout(function(){throw e})}function Oa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ln(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ln(t)}function ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _s(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pn=Math.random().toString(36).slice(2),Le="__reactFiber$"+pn,Vn="__reactProps$"+pn,$e="__reactContainer$"+pn,So="__reactEvents$"+pn,Gf="__reactListeners$"+pn,Lf="__reactHandles$"+pn;function St(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$e]||n[Le]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_s(e);e!==null;){if(n=e[Le])return n;e=_s(e)}return t}e=n,n=e.parentNode}return null}function tr(e){return e=e[Le]||e[$e],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zt(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(x(33))}function fa(e){return e[Vn]||null}var Ro=[],Vt=-1;function yt(e){return{current:e}}function G(e){0>Vt||(e.current=Ro[Vt],Ro[Vt]=null,Vt--)}function I(e,t){Vt++,Ro[Vt]=e.current,e.current=t}var gt={},se=yt(gt),he=yt(!1),At=gt;function an(e,t){var n=e.type.contextTypes;if(!n)return gt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ge(e){return e=e.childContextTypes,e!=null}function Yr(){G(he),G(se)}function Ns(e,t,n){if(se.current!==gt)throw Error(x(168));I(se,t),I(he,n)}function bu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(x(108,Cd(e)||"Unknown",a));return V({},n,r)}function Hr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gt,At=se.current,I(se,e),I(he,he.current),!0}function Es(e,t,n){var r=e.stateNode;if(!r)throw Error(x(169));n?(e=bu(e,t,At),r.__reactInternalMemoizedMergedChildContext=e,G(he),G(se),I(se,e)):G(he),I(he,n)}var ze=null,pa=!1,Fa=!1;function vu(e){ze===null?ze=[e]:ze.push(e)}function Uf(e){pa=!0,vu(e)}function bt(){if(!Fa&&ze!==null){Fa=!0;var e=0,t=B;try{var n=ze;for(B=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ze=null,pa=!1}catch(a){throw ze!==null&&(ze=ze.slice(e+1)),zl(ai,bt),a}finally{B=t,Fa=!1}}return null}var Yt=[],Ht=0,Kr=null,$r=0,Se=[],Re=0,qt=null,Ve=1,Ye="";function Ct(e,t){Yt[Ht++]=$r,Yt[Ht++]=Kr,Kr=e,$r=t}function wu(e,t,n){Se[Re++]=Ve,Se[Re++]=Ye,Se[Re++]=qt,qt=e;var r=Ve;e=Ye;var a=32-De(r)-1;r&=~(1<<a),n+=1;var o=32-De(t)+a;if(30<o){var s=a-a%5;o=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Ve=1<<32-De(t)+a|n<<a|r,Ye=o+e}else Ve=1<<o|n<<a|r,Ye=e}function pi(e){e.return!==null&&(Ct(e,1),wu(e,1,0))}function hi(e){for(;e===Kr;)Kr=Yt[--Ht],Yt[Ht]=null,$r=Yt[--Ht],Yt[Ht]=null;for(;e===qt;)qt=Se[--Re],Se[Re]=null,Ye=Se[--Re],Se[Re]=null,Ve=Se[--Re],Se[Re]=null}var we=null,ve=null,U=!1,Pe=null;function xu(e,t){var n=_e(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function js(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,we=e,ve=ut(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,we=e,ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qt!==null?{id:Ve,overflow:Ye}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_e(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,we=e,ve=null,!0):!1;default:return!1}}function _o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function No(e){if(U){var t=ve;if(t){var n=t;if(!js(e,t)){if(_o(e))throw Error(x(418));t=ut(n.nextSibling);var r=we;t&&js(e,t)?xu(r,n):(e.flags=e.flags&-4097|2,U=!1,we=e)}}else{if(_o(e))throw Error(x(418));e.flags=e.flags&-4097|2,U=!1,we=e}}}function As(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;we=e}function mr(e){if(e!==we)return!1;if(!U)return As(e),U=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Co(e.type,e.memoizedProps)),t&&(t=ve)){if(_o(e))throw ku(),Error(x(418));for(;t;)xu(e,t),t=ut(t.nextSibling)}if(As(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ve=ut(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ve=null}}else ve=we?ut(e.stateNode.nextSibling):null;return!0}function ku(){for(var e=ve;e;)e=ut(e.nextSibling)}function on(){ve=we=null,U=!1}function gi(e){Pe===null?Pe=[e]:Pe.push(e)}var Of=Ze.ReactCurrentBatchConfig;function vn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var l=a.refs;s===null?delete l[o]:l[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function yr(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qs(e){var t=e._init;return t(e._payload)}function Cu(e){function t(c,d){if(e){var p=c.deletions;p===null?(c.deletions=[d],c.flags|=16):p.push(d)}}function n(c,d){if(!e)return null;for(;d!==null;)t(c,d),d=d.sibling;return null}function r(c,d){for(c=new Map;d!==null;)d.key!==null?c.set(d.key,d):c.set(d.index,d),d=d.sibling;return c}function a(c,d){return c=pt(c,d),c.index=0,c.sibling=null,c}function o(c,d,p){return c.index=p,e?(p=c.alternate,p!==null?(p=p.index,p<d?(c.flags|=2,d):p):(c.flags|=2,d)):(c.flags|=1048576,d)}function s(c){return e&&c.alternate===null&&(c.flags|=2),c}function l(c,d,p,b){return d===null||d.tag!==6?(d=Qa(p,c.mode,b),d.return=c,d):(d=a(d,p),d.return=c,d)}function u(c,d,p,b){var k=p.type;return k===Lt?h(c,d,p.props.children,b,p.key):d!==null&&(d.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===et&&qs(k)===d.type)?(b=a(d,p.props),b.ref=vn(c,d,p),b.return=c,b):(b=Br(p.type,p.key,p.props,null,c.mode,b),b.ref=vn(c,d,p),b.return=c,b)}function f(c,d,p,b){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=Xa(p,c.mode,b),d.return=c,d):(d=a(d,p.children||[]),d.return=c,d)}function h(c,d,p,b,k){return d===null||d.tag!==7?(d=jt(p,c.mode,b,k),d.return=c,d):(d=a(d,p),d.return=c,d)}function y(c,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Qa(""+d,c.mode,p),d.return=c,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case ir:return p=Br(d.type,d.key,d.props,null,c.mode,p),p.ref=vn(c,null,d),p.return=c,p;case Gt:return d=Xa(d,c.mode,p),d.return=c,d;case et:var b=d._init;return y(c,b(d._payload),p)}if(Cn(d)||hn(d))return d=jt(d,c.mode,p,null),d.return=c,d;yr(c,d)}return null}function g(c,d,p,b){var k=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return k!==null?null:l(c,d,""+p,b);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ir:return p.key===k?u(c,d,p,b):null;case Gt:return p.key===k?f(c,d,p,b):null;case et:return k=p._init,g(c,d,k(p._payload),b)}if(Cn(p)||hn(p))return k!==null?null:h(c,d,p,b,null);yr(c,p)}return null}function m(c,d,p,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return c=c.get(p)||null,l(d,c,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ir:return c=c.get(b.key===null?p:b.key)||null,u(d,c,b,k);case Gt:return c=c.get(b.key===null?p:b.key)||null,f(d,c,b,k);case et:var T=b._init;return m(c,d,p,T(b._payload),k)}if(Cn(b)||hn(b))return c=c.get(p)||null,h(d,c,b,k,null);yr(d,b)}return null}function v(c,d,p,b){for(var k=null,T=null,S=d,w=d=0,j=null;S!==null&&w<p.length;w++){S.index>w?(j=S,S=null):j=S.sibling;var E=g(c,S,p[w],b);if(E===null){S===null&&(S=j);break}e&&S&&E.alternate===null&&t(c,S),d=o(E,d,w),T===null?k=E:T.sibling=E,T=E,S=j}if(w===p.length)return n(c,S),U&&Ct(c,w),k;if(S===null){for(;w<p.length;w++)S=y(c,p[w],b),S!==null&&(d=o(S,d,w),T===null?k=S:T.sibling=S,T=S);return U&&Ct(c,w),k}for(S=r(c,S);w<p.length;w++)j=m(S,c,w,p[w],b),j!==null&&(e&&j.alternate!==null&&S.delete(j.key===null?w:j.key),d=o(j,d,w),T===null?k=j:T.sibling=j,T=j);return e&&S.forEach(function(O){return t(c,O)}),U&&Ct(c,w),k}function C(c,d,p,b){var k=hn(p);if(typeof k!="function")throw Error(x(150));if(p=k.call(p),p==null)throw Error(x(151));for(var T=k=null,S=d,w=d=0,j=null,E=p.next();S!==null&&!E.done;w++,E=p.next()){S.index>w?(j=S,S=null):j=S.sibling;var O=g(c,S,E.value,b);if(O===null){S===null&&(S=j);break}e&&S&&O.alternate===null&&t(c,S),d=o(O,d,w),T===null?k=O:T.sibling=O,T=O,S=j}if(E.done)return n(c,S),U&&Ct(c,w),k;if(S===null){for(;!E.done;w++,E=p.next())E=y(c,E.value,b),E!==null&&(d=o(E,d,w),T===null?k=E:T.sibling=E,T=E);return U&&Ct(c,w),k}for(S=r(c,S);!E.done;w++,E=p.next())E=m(S,c,w,E.value,b),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?w:E.key),d=o(E,d,w),T===null?k=E:T.sibling=E,T=E);return e&&S.forEach(function(ye){return t(c,ye)}),U&&Ct(c,w),k}function q(c,d,p,b){if(typeof p=="object"&&p!==null&&p.type===Lt&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ir:e:{for(var k=p.key,T=d;T!==null;){if(T.key===k){if(k=p.type,k===Lt){if(T.tag===7){n(c,T.sibling),d=a(T,p.props.children),d.return=c,c=d;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===et&&qs(k)===T.type){n(c,T.sibling),d=a(T,p.props),d.ref=vn(c,T,p),d.return=c,c=d;break e}n(c,T);break}else t(c,T);T=T.sibling}p.type===Lt?(d=jt(p.props.children,c.mode,b,p.key),d.return=c,c=d):(b=Br(p.type,p.key,p.props,null,c.mode,b),b.ref=vn(c,d,p),b.return=c,c=b)}return s(c);case Gt:e:{for(T=p.key;d!==null;){if(d.key===T)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(c,d.sibling),d=a(d,p.children||[]),d.return=c,c=d;break e}else{n(c,d);break}else t(c,d);d=d.sibling}d=Xa(p,c.mode,b),d.return=c,c=d}return s(c);case et:return T=p._init,q(c,d,T(p._payload),b)}if(Cn(p))return v(c,d,p,b);if(hn(p))return C(c,d,p,b);yr(c,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(c,d.sibling),d=a(d,p),d.return=c,c=d):(n(c,d),d=Qa(p,c.mode,b),d.return=c,c=d),s(c)):n(c,d)}return q}var sn=Cu(!0),Tu=Cu(!1),Qr=yt(null),Xr=null,Kt=null,mi=null;function yi(){mi=Kt=Xr=null}function bi(e){var t=Qr.current;G(Qr),e._currentValue=t}function Eo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function tn(e,t){Xr=e,mi=Kt=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pe=!0),e.firstContext=null)}function Ee(e){var t=e._currentValue;if(mi!==e)if(e={context:e,memoizedValue:t,next:null},Kt===null){if(Xr===null)throw Error(x(308));Kt=e,Xr.dependencies={lanes:0,firstContext:e}}else Kt=Kt.next=e;return t}var Rt=null;function vi(e){Rt===null?Rt=[e]:Rt.push(e)}function Su(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,vi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Qe(e,r)}function Qe(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tt=!1;function wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function He(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ct(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,D&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Qe(e,n)}return a=r.interleaved,a===null?(t.next=t,vi(r)):(t.next=a.next,a.next=t),r.interleaved=t,Qe(e,n)}function jr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oi(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zr(e,t,n,r){var a=e.updateQueue;tt=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var u=l,f=u.next;u.next=null,s===null?o=f:s.next=f,s=u;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(o!==null){var y=a.baseState;s=0,h=f=u=null,l=o;do{var g=l.lane,m=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,C=l;switch(g=t,m=n,C.tag){case 1:if(v=C.payload,typeof v=="function"){y=v.call(m,y,g);break e}y=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,g=typeof v=="function"?v.call(m,y,g):v,g==null)break e;y=V({},y,g);break e;case 2:tt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=a.effects,g===null?a.effects=[l]:g.push(l))}else m={eventTime:m,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=m,u=y):h=h.next=m,s|=g;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);if(h===null&&(u=y),a.baseState=u,a.firstBaseUpdate=f,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Pt|=s,e.lanes=s,e.memoizedState=y}}function Ps(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(x(191,a));a.call(r)}}}var nr={},Oe=yt(nr),Yn=yt(nr),Hn=yt(nr);function _t(e){if(e===nr)throw Error(x(174));return e}function xi(e,t){switch(I(Hn,t),I(Yn,e),I(Oe,nr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lo(t,e)}G(Oe),I(Oe,t)}function ln(){G(Oe),G(Yn),G(Hn)}function _u(e){_t(Hn.current);var t=_t(Oe.current),n=lo(t,e.type);t!==n&&(I(Yn,e),I(Oe,n))}function ki(e){Yn.current===e&&(G(Oe),G(Yn))}var F=yt(0);function Jr(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var za=[];function Ci(){for(var e=0;e<za.length;e++)za[e]._workInProgressVersionPrimary=null;za.length=0}var Ar=Ze.ReactCurrentDispatcher,Va=Ze.ReactCurrentBatchConfig,Mt=0,z=null,Q=null,J=null,ea=!1,An=!1,Kn=0,Ff=0;function ae(){throw Error(x(321))}function Ti(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ie(e[n],t[n]))return!1;return!0}function Si(e,t,n,r,a,o){if(Mt=o,z=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ar.current=e===null||e.memoizedState===null?Hf:Kf,e=n(r,a),An){o=0;do{if(An=!1,Kn=0,25<=o)throw Error(x(301));o+=1,J=Q=null,t.updateQueue=null,Ar.current=$f,e=n(r,a)}while(An)}if(Ar.current=ta,t=Q!==null&&Q.next!==null,Mt=0,J=Q=z=null,ea=!1,t)throw Error(x(300));return e}function Ri(){var e=Kn!==0;return Kn=0,e}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return J===null?z.memoizedState=J=e:J=J.next=e,J}function je(){if(Q===null){var e=z.alternate;e=e!==null?e.memoizedState:null}else e=Q.next;var t=J===null?z.memoizedState:J.next;if(t!==null)J=t,Q=e;else{if(e===null)throw Error(x(310));Q=e,e={memoizedState:Q.memoizedState,baseState:Q.baseState,baseQueue:Q.baseQueue,queue:Q.queue,next:null},J===null?z.memoizedState=J=e:J=J.next=e}return J}function $n(e,t){return typeof t=="function"?t(e):t}function Ya(e){var t=je(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=Q,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var l=s=null,u=null,f=o;do{var h=f.lane;if((Mt&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var y={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=y,s=r):u=u.next=y,z.lanes|=h,Pt|=h}f=f.next}while(f!==null&&f!==o);u===null?s=r:u.next=l,Ie(r,t.memoizedState)||(pe=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,z.lanes|=o,Pt|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ha(e){var t=je(),n=t.queue;if(n===null)throw Error(x(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Ie(o,t.memoizedState)||(pe=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Nu(){}function Eu(e,t){var n=z,r=je(),a=t(),o=!Ie(r.memoizedState,a);if(o&&(r.memoizedState=a,pe=!0),r=r.queue,_i(qu.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||J!==null&&J.memoizedState.tag&1){if(n.flags|=2048,Qn(9,Au.bind(null,n,r,a,t),void 0,null),ee===null)throw Error(x(349));Mt&30||ju(n,t,a)}return a}function ju(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=z.updateQueue,t===null?(t={lastEffect:null,stores:null},z.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Au(e,t,n,r){t.value=n,t.getSnapshot=r,Mu(t)&&Pu(e)}function qu(e,t,n){return n(function(){Mu(t)&&Pu(e)})}function Mu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ie(e,n)}catch{return!0}}function Pu(e){var t=Qe(e,1);t!==null&&Be(t,e,1,-1)}function Ds(e){var t=Ge();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:e},t.queue=e,e=e.dispatch=Yf.bind(null,z,e),[t.memoizedState,e]}function Qn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=z.updateQueue,t===null?(t={lastEffect:null,stores:null},z.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Du(){return je().memoizedState}function qr(e,t,n,r){var a=Ge();z.flags|=e,a.memoizedState=Qn(1|t,n,void 0,r===void 0?null:r)}function ha(e,t,n,r){var a=je();r=r===void 0?null:r;var o=void 0;if(Q!==null){var s=Q.memoizedState;if(o=s.destroy,r!==null&&Ti(r,s.deps)){a.memoizedState=Qn(t,n,o,r);return}}z.flags|=e,a.memoizedState=Qn(1|t,n,o,r)}function Bs(e,t){return qr(8390656,8,e,t)}function _i(e,t){return ha(2048,8,e,t)}function Bu(e,t){return ha(4,2,e,t)}function Iu(e,t){return ha(4,4,e,t)}function Wu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gu(e,t,n){return n=n!=null?n.concat([e]):null,ha(4,4,Wu.bind(null,t,e),n)}function Ni(){}function Lu(e,t){var n=je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ti(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Uu(e,t){var n=je();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ti(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ou(e,t,n){return Mt&21?(Ie(n,t)||(n=Hl(),z.lanes|=n,Pt|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pe=!0),e.memoizedState=n)}function zf(e,t){var n=B;B=n!==0&&4>n?n:4,e(!0);var r=Va.transition;Va.transition={};try{e(!1),t()}finally{B=n,Va.transition=r}}function Fu(){return je().memoizedState}function Vf(e,t,n){var r=ft(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zu(e))Vu(t,n);else if(n=Su(e,t,n,r),n!==null){var a=ue();Be(n,e,r,a),Yu(n,t,r)}}function Yf(e,t,n){var r=ft(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zu(e))Vu(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,l=o(s,n);if(a.hasEagerState=!0,a.eagerState=l,Ie(l,s)){var u=t.interleaved;u===null?(a.next=a,vi(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}n=Su(e,t,a,r),n!==null&&(a=ue(),Be(n,e,r,a),Yu(n,t,r))}}function zu(e){var t=e.alternate;return e===z||t!==null&&t===z}function Vu(e,t){An=ea=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yu(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oi(e,n)}}var ta={readContext:Ee,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useInsertionEffect:ae,useLayoutEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useMutableSource:ae,useSyncExternalStore:ae,useId:ae,unstable_isNewReconciler:!1},Hf={readContext:Ee,useCallback:function(e,t){return Ge().memoizedState=[e,t===void 0?null:t],e},useContext:Ee,useEffect:Bs,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qr(4194308,4,Wu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){return qr(4,2,e,t)},useMemo:function(e,t){var n=Ge();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ge();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vf.bind(null,z,e),[r.memoizedState,e]},useRef:function(e){var t=Ge();return e={current:e},t.memoizedState=e},useState:Ds,useDebugValue:Ni,useDeferredValue:function(e){return Ge().memoizedState=e},useTransition:function(){var e=Ds(!1),t=e[0];return e=zf.bind(null,e[1]),Ge().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=z,a=Ge();if(U){if(n===void 0)throw Error(x(407));n=n()}else{if(n=t(),ee===null)throw Error(x(349));Mt&30||ju(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Bs(qu.bind(null,r,o,e),[e]),r.flags|=2048,Qn(9,Au.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ge(),t=ee.identifierPrefix;if(U){var n=Ye,r=Ve;n=(r&~(1<<32-De(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Kn++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ff++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kf={readContext:Ee,useCallback:Lu,useContext:Ee,useEffect:_i,useImperativeHandle:Gu,useInsertionEffect:Bu,useLayoutEffect:Iu,useMemo:Uu,useReducer:Ya,useRef:Du,useState:function(){return Ya($n)},useDebugValue:Ni,useDeferredValue:function(e){var t=je();return Ou(t,Q.memoizedState,e)},useTransition:function(){var e=Ya($n)[0],t=je().memoizedState;return[e,t]},useMutableSource:Nu,useSyncExternalStore:Eu,useId:Fu,unstable_isNewReconciler:!1},$f={readContext:Ee,useCallback:Lu,useContext:Ee,useEffect:_i,useImperativeHandle:Gu,useInsertionEffect:Bu,useLayoutEffect:Iu,useMemo:Uu,useReducer:Ha,useRef:Du,useState:function(){return Ha($n)},useDebugValue:Ni,useDeferredValue:function(e){var t=je();return Q===null?t.memoizedState=e:Ou(t,Q.memoizedState,e)},useTransition:function(){var e=Ha($n)[0],t=je().memoizedState;return[e,t]},useMutableSource:Nu,useSyncExternalStore:Eu,useId:Fu,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=V({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:V({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ga={isMounted:function(e){return(e=e._reactInternals)?It(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ue(),a=ft(e),o=He(r,a);o.payload=t,n!=null&&(o.callback=n),t=ct(e,o,a),t!==null&&(Be(t,e,a,r),jr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ue(),a=ft(e),o=He(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ct(e,o,a),t!==null&&(Be(t,e,a,r),jr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ue(),r=ft(e),a=He(n,r);a.tag=2,t!=null&&(a.callback=t),t=ct(e,a,r),t!==null&&(Be(t,e,r,n),jr(t,e,r))}};function Is(e,t,n,r,a,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!On(n,r)||!On(a,o):!0}function Hu(e,t,n){var r=!1,a=gt,o=t.contextType;return typeof o=="object"&&o!==null?o=Ee(o):(a=ge(t)?At:se.current,r=t.contextTypes,o=(r=r!=null)?an(e,a):gt),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ws(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function Ao(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},wi(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Ee(o):(o=ge(t)?At:se.current,a.context=an(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(jo(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ga.enqueueReplaceState(a,a.state,null),Zr(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function un(e,t){try{var n="",r=t;do n+=kd(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Ka(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qf=typeof WeakMap=="function"?WeakMap:Map;function Ku(e,t,n){n=He(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ra||(ra=!0,Oo=r),qo(e,t)},n}function $u(e,t,n){n=He(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){qo(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qo(e,t),typeof r!="function"&&(dt===null?dt=new Set([this]):dt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Gs(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qf;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=cp.bind(null,e,t,n),t.then(e,e))}function Ls(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Us(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=He(-1,1),t.tag=2,ct(n,t,1))),n.lanes|=1),e)}var Xf=Ze.ReactCurrentOwner,pe=!1;function le(e,t,n,r){t.child=e===null?Tu(t,null,n,r):sn(t,e.child,n,r)}function Os(e,t,n,r,a){n=n.render;var o=t.ref;return tn(t,a),r=Si(e,t,n,r,o,a),n=Ri(),e!==null&&!pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xe(e,t,a)):(U&&n&&pi(t),t.flags|=1,le(e,t,r,a),t.child)}function Fs(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!Bi(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Qu(e,t,o,r,a)):(e=Br(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:On,n(s,r)&&e.ref===t.ref)return Xe(e,t,a)}return t.flags|=1,e=pt(o,r),e.ref=t.ref,e.return=t,t.child=e}function Qu(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(On(o,r)&&e.ref===t.ref)if(pe=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(pe=!0);else return t.lanes=e.lanes,Xe(e,t,a)}return Mo(e,t,n,r,a)}function Xu(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},I(Qt,be),be|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,I(Qt,be),be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,I(Qt,be),be|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,I(Qt,be),be|=r;return le(e,t,a,n),t.child}function Zu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Mo(e,t,n,r,a){var o=ge(n)?At:se.current;return o=an(t,o),tn(t,a),n=Si(e,t,n,r,o,a),r=Ri(),e!==null&&!pe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Xe(e,t,a)):(U&&r&&pi(t),t.flags|=1,le(e,t,n,a),t.child)}function zs(e,t,n,r,a){if(ge(n)){var o=!0;Hr(t)}else o=!1;if(tn(t,a),t.stateNode===null)Mr(e,t),Hu(t,n,r),Ao(t,n,r,a),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=Ee(f):(f=ge(n)?At:se.current,f=an(t,f));var h=n.getDerivedStateFromProps,y=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";y||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Ws(t,s,r,f),tt=!1;var g=t.memoizedState;s.state=g,Zr(t,r,s,a),u=t.memoizedState,l!==r||g!==u||he.current||tt?(typeof h=="function"&&(jo(t,n,h,r),u=t.memoizedState),(l=tt||Is(t,n,l,r,g,u,f))?(y||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ru(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:qe(t.type,l),s.props=f,y=t.pendingProps,g=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ee(u):(u=ge(n)?At:se.current,u=an(t,u));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==y||g!==u)&&Ws(t,s,r,u),tt=!1,g=t.memoizedState,s.state=g,Zr(t,r,s,a);var v=t.memoizedState;l!==y||g!==v||he.current||tt?(typeof m=="function"&&(jo(t,n,m,r),v=t.memoizedState),(f=tt||Is(t,n,f,r,g,v,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=u,r=f):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Po(e,t,n,r,o,a)}function Po(e,t,n,r,a,o){Zu(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return a&&Es(t,n,!1),Xe(e,t,o);r=t.stateNode,Xf.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=sn(t,e.child,null,o),t.child=sn(t,null,l,o)):le(e,t,l,o),t.memoizedState=r.state,a&&Es(t,n,!0),t.child}function Ju(e){var t=e.stateNode;t.pendingContext?Ns(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ns(e,t.context,!1),xi(e,t.containerInfo)}function Vs(e,t,n,r,a){return on(),gi(a),t.flags|=256,le(e,t,n,r),t.child}var Do={dehydrated:null,treeContext:null,retryLane:0};function Bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function ec(e,t,n){var r=t.pendingProps,a=F.current,o=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),I(F,a&1),e===null)return No(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ba(s,r,0,null),e=jt(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Bo(n),t.memoizedState=Do,e):Ei(t,s));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Zf(e,t,s,r,l,a,n);if(o){o=r.fallback,s=t.mode,a=e.child,l=a.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=pt(a,u),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=pt(l,o):(o=jt(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?Bo(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=Do,r}return o=e.child,e=o.sibling,r=pt(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ei(e,t){return t=ba({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function br(e,t,n,r){return r!==null&&gi(r),sn(t,e.child,null,n),e=Ei(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zf(e,t,n,r,a,o,s){if(n)return t.flags&256?(t.flags&=-257,r=Ka(Error(x(422))),br(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=ba({mode:"visible",children:r.children},a,0,null),o=jt(o,a,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&sn(t,e.child,null,s),t.child.memoizedState=Bo(s),t.memoizedState=Do,o);if(!(t.mode&1))return br(e,t,s,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(x(419)),r=Ka(o,r,void 0),br(e,t,s,r)}if(l=(s&e.childLanes)!==0,pe||l){if(r=ee,r!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|s)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Qe(e,a),Be(r,e,a,-1))}return Di(),r=Ka(Error(x(421))),br(e,t,s,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=dp.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ve=ut(a.nextSibling),we=t,U=!0,Pe=null,e!==null&&(Se[Re++]=Ve,Se[Re++]=Ye,Se[Re++]=qt,Ve=e.id,Ye=e.overflow,qt=t),t=Ei(t,r.children),t.flags|=4096,t)}function Ys(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Eo(e.return,t,n)}function $a(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function tc(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(le(e,t,r.children,n),r=F.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ys(e,n,t);else if(e.tag===19)Ys(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(I(F,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Jr(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),$a(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Jr(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}$a(t,!0,n,null,o);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mr(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xe(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Pt|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(x(153));if(t.child!==null){for(e=t.child,n=pt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jf(e,t,n){switch(t.tag){case 3:Ju(t),on();break;case 5:_u(t);break;case 1:ge(t.type)&&Hr(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;I(Qr,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(I(F,F.current&1),t.flags|=128,null):n&t.child.childLanes?ec(e,t,n):(I(F,F.current&1),e=Xe(e,t,n),e!==null?e.sibling:null);I(F,F.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tc(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),I(F,F.current),r)break;return null;case 22:case 23:return t.lanes=0,Xu(e,t,n)}return Xe(e,t,n)}var nc,Io,rc,ac;nc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Io=function(){};rc=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,_t(Oe.current);var o=null;switch(n){case"input":a=ao(e,a),r=ao(e,r),o=[];break;case"select":a=V({},a,{value:void 0}),r=V({},r,{value:void 0}),o=[];break;case"textarea":a=so(e,a),r=so(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Vr)}uo(n,r);var s;n=null;for(f in a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var l=a[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Dn.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=a!=null?a[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Dn.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&W("scroll",e),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};ac=function(e,t,n,r){n!==r&&(t.flags|=4)};function wn(e,t){if(!U)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ep(e,t,n){var r=t.pendingProps;switch(hi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(t),null;case 1:return ge(t.type)&&Yr(),oe(t),null;case 3:return r=t.stateNode,ln(),G(he),G(se),Ci(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(mr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pe!==null&&(Vo(Pe),Pe=null))),Io(e,t),oe(t),null;case 5:ki(t);var a=_t(Hn.current);if(n=t.type,e!==null&&t.stateNode!=null)rc(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(x(166));return oe(t),null}if(e=_t(Oe.current),mr(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Le]=t,r[Vn]=o,e=(t.mode&1)!==0,n){case"dialog":W("cancel",r),W("close",r);break;case"iframe":case"object":case"embed":W("load",r);break;case"video":case"audio":for(a=0;a<Sn.length;a++)W(Sn[a],r);break;case"source":W("error",r);break;case"img":case"image":case"link":W("error",r),W("load",r);break;case"details":W("toggle",r);break;case"input":ts(r,o),W("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},W("invalid",r);break;case"textarea":rs(r,o),W("invalid",r)}uo(n,o),a=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&gr(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&gr(r.textContent,l,e),a=["children",""+l]):Dn.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&W("scroll",r)}switch(n){case"input":sr(r),ns(r,o,!0);break;case"textarea":sr(r),as(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Vr)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ql(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Le]=t,e[Vn]=r,nc(e,t,!1,!1),t.stateNode=e;e:{switch(s=co(n,r),n){case"dialog":W("cancel",e),W("close",e),a=r;break;case"iframe":case"object":case"embed":W("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sn.length;a++)W(Sn[a],e);a=r;break;case"source":W("error",e),a=r;break;case"img":case"image":case"link":W("error",e),W("load",e),a=r;break;case"details":W("toggle",e),a=r;break;case"input":ts(e,r),a=ao(e,r),W("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=V({},r,{value:void 0}),W("invalid",e);break;case"textarea":rs(e,r),a=so(e,r),W("invalid",e);break;default:a=r}uo(n,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?Dl(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ml(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Bn(e,u):typeof u=="number"&&Bn(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Dn.hasOwnProperty(o)?u!=null&&o==="onScroll"&&W("scroll",e):u!=null&&Jo(e,o,u,s))}switch(n){case"input":sr(e),ns(e,r,!1);break;case"textarea":sr(e),as(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ht(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Xt(e,!!r.multiple,o,!1):r.defaultValue!=null&&Xt(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Vr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return oe(t),null;case 6:if(e&&t.stateNode!=null)ac(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(x(166));if(n=_t(Hn.current),_t(Oe.current),mr(t)){if(r=t.stateNode,n=t.memoizedProps,r[Le]=t,(o=r.nodeValue!==n)&&(e=we,e!==null))switch(e.tag){case 3:gr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gr(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Le]=t,t.stateNode=r}return oe(t),null;case 13:if(G(F),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(U&&ve!==null&&t.mode&1&&!(t.flags&128))ku(),on(),t.flags|=98560,o=!1;else if(o=mr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(x(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(x(317));o[Le]=t}else on(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;oe(t),o=!1}else Pe!==null&&(Vo(Pe),Pe=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||F.current&1?X===0&&(X=3):Di())),t.updateQueue!==null&&(t.flags|=4),oe(t),null);case 4:return ln(),Io(e,t),e===null&&Fn(t.stateNode.containerInfo),oe(t),null;case 10:return bi(t.type._context),oe(t),null;case 17:return ge(t.type)&&Yr(),oe(t),null;case 19:if(G(F),o=t.memoizedState,o===null)return oe(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)wn(o,!1);else{if(X!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Jr(e),s!==null){for(t.flags|=128,wn(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return I(F,F.current&1|2),t.child}e=e.sibling}o.tail!==null&&K()>cn&&(t.flags|=128,r=!0,wn(o,!1),t.lanes=4194304)}else{if(!r)if(e=Jr(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!U)return oe(t),null}else 2*K()-o.renderingStartTime>cn&&n!==1073741824&&(t.flags|=128,r=!0,wn(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=K(),t.sibling=null,n=F.current,I(F,r?n&1|2:n&1),t):(oe(t),null);case 22:case 23:return Pi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?be&1073741824&&(oe(t),t.subtreeFlags&6&&(t.flags|=8192)):oe(t),null;case 24:return null;case 25:return null}throw Error(x(156,t.tag))}function tp(e,t){switch(hi(t),t.tag){case 1:return ge(t.type)&&Yr(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ln(),G(he),G(se),Ci(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ki(t),null;case 13:if(G(F),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(x(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(F),null;case 4:return ln(),null;case 10:return bi(t.type._context),null;case 22:case 23:return Pi(),null;case 24:return null;default:return null}}var vr=!1,ie=!1,np=typeof WeakSet=="function"?WeakSet:Set,R=null;function $t(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Y(e,t,r)}else n.current=null}function Wo(e,t,n){try{n()}catch(r){Y(e,t,r)}}var Hs=!1;function rp(e,t){if(xo=Or,e=uu(),fi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,f=0,h=0,y=e,g=null;t:for(;;){for(var m;y!==n||a!==0&&y.nodeType!==3||(l=s+a),y!==o||r!==0&&y.nodeType!==3||(u=s+r),y.nodeType===3&&(s+=y.nodeValue.length),(m=y.firstChild)!==null;)g=y,y=m;for(;;){if(y===e)break t;if(g===n&&++f===a&&(l=s),g===o&&++h===r&&(u=s),(m=y.nextSibling)!==null)break;y=g,g=y.parentNode}y=m}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ko={focusedElem:e,selectionRange:n},Or=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var C=v.memoizedProps,q=v.memoizedState,c=t.stateNode,d=c.getSnapshotBeforeUpdate(t.elementType===t.type?C:qe(t.type,C),q);c.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(b){Y(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return v=Hs,Hs=!1,v}function qn(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Wo(t,n,o)}a=a.next}while(a!==r)}}function ma(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Go(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function oc(e){var t=e.alternate;t!==null&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Le],delete t[Vn],delete t[So],delete t[Gf],delete t[Lf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return e.tag===5||e.tag===3||e.tag===4}function Ks(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Vr));else if(r!==4&&(e=e.child,e!==null))for(Lo(e,t,n),e=e.sibling;e!==null;)Lo(e,t,n),e=e.sibling}function Uo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Uo(e,t,n),e=e.sibling;e!==null;)Uo(e,t,n),e=e.sibling}var te=null,Me=!1;function Je(e,t,n){for(n=n.child;n!==null;)sc(e,t,n),n=n.sibling}function sc(e,t,n){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(la,n)}catch{}switch(n.tag){case 5:ie||$t(n,t);case 6:var r=te,a=Me;te=null,Je(e,t,n),te=r,Me=a,te!==null&&(Me?(e=te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):te.removeChild(n.stateNode));break;case 18:te!==null&&(Me?(e=te,n=n.stateNode,e.nodeType===8?Oa(e.parentNode,n):e.nodeType===1&&Oa(e,n),Ln(e)):Oa(te,n.stateNode));break;case 4:r=te,a=Me,te=n.stateNode.containerInfo,Me=!0,Je(e,t,n),te=r,Me=a;break;case 0:case 11:case 14:case 15:if(!ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Wo(n,t,s),a=a.next}while(a!==r)}Je(e,t,n);break;case 1:if(!ie&&($t(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Y(n,t,l)}Je(e,t,n);break;case 21:Je(e,t,n);break;case 22:n.mode&1?(ie=(r=ie)||n.memoizedState!==null,Je(e,t,n),ie=r):Je(e,t,n);break;default:Je(e,t,n)}}function $s(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new np),t.forEach(function(r){var a=fp.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ae(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:te=l.stateNode,Me=!1;break e;case 3:te=l.stateNode.containerInfo,Me=!0;break e;case 4:te=l.stateNode.containerInfo,Me=!0;break e}l=l.return}if(te===null)throw Error(x(160));sc(o,s,a),te=null,Me=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(f){Y(a,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lc(t,e),t=t.sibling}function lc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ae(t,e),We(e),r&4){try{qn(3,e,e.return),ma(3,e)}catch(C){Y(e,e.return,C)}try{qn(5,e,e.return)}catch(C){Y(e,e.return,C)}}break;case 1:Ae(t,e),We(e),r&512&&n!==null&&$t(n,n.return);break;case 5:if(Ae(t,e),We(e),r&512&&n!==null&&$t(n,n.return),e.flags&32){var a=e.stateNode;try{Bn(a,"")}catch(C){Y(e,e.return,C)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&jl(a,o),co(l,s);var f=co(l,o);for(s=0;s<u.length;s+=2){var h=u[s],y=u[s+1];h==="style"?Dl(a,y):h==="dangerouslySetInnerHTML"?Ml(a,y):h==="children"?Bn(a,y):Jo(a,h,y,f)}switch(l){case"input":oo(a,o);break;case"textarea":Al(a,o);break;case"select":var g=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Xt(a,!!o.multiple,m,!1):g!==!!o.multiple&&(o.defaultValue!=null?Xt(a,!!o.multiple,o.defaultValue,!0):Xt(a,!!o.multiple,o.multiple?[]:"",!1))}a[Vn]=o}catch(C){Y(e,e.return,C)}}break;case 6:if(Ae(t,e),We(e),r&4){if(e.stateNode===null)throw Error(x(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(C){Y(e,e.return,C)}}break;case 3:if(Ae(t,e),We(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ln(t.containerInfo)}catch(C){Y(e,e.return,C)}break;case 4:Ae(t,e),We(e);break;case 13:Ae(t,e),We(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(qi=K())),r&4&&$s(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(ie=(f=ie)||h,Ae(t,e),ie=f):Ae(t,e),We(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(R=e,h=e.child;h!==null;){for(y=R=h;R!==null;){switch(g=R,m=g.child,g.tag){case 0:case 11:case 14:case 15:qn(4,g,g.return);break;case 1:$t(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(C){Y(r,n,C)}}break;case 5:$t(g,g.return);break;case 22:if(g.memoizedState!==null){Xs(y);continue}}m!==null?(m.return=g,R=m):Xs(y)}h=h.sibling}e:for(h=null,y=e;;){if(y.tag===5){if(h===null){h=y;try{a=y.stateNode,f?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=y.stateNode,u=y.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Pl("display",s))}catch(C){Y(e,e.return,C)}}}else if(y.tag===6){if(h===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(C){Y(e,e.return,C)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;h===y&&(h=null),y=y.return}h===y&&(h=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ae(t,e),We(e),r&4&&$s(e);break;case 21:break;default:Ae(t,e),We(e)}}function We(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ic(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Bn(a,""),r.flags&=-33);var o=Ks(e);Uo(e,o,a);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Ks(e);Lo(e,l,s);break;default:throw Error(x(161))}}catch(u){Y(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ap(e,t,n){R=e,uc(e)}function uc(e,t,n){for(var r=(e.mode&1)!==0;R!==null;){var a=R,o=a.child;if(a.tag===22&&r){var s=a.memoizedState!==null||vr;if(!s){var l=a.alternate,u=l!==null&&l.memoizedState!==null||ie;l=vr;var f=ie;if(vr=s,(ie=u)&&!f)for(R=a;R!==null;)s=R,u=s.child,s.tag===22&&s.memoizedState!==null?Zs(a):u!==null?(u.return=s,R=u):Zs(a);for(;o!==null;)R=o,uc(o),o=o.sibling;R=a,vr=l,ie=f}Qs(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,R=o):Qs(e)}}function Qs(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ie||ma(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ie)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:qe(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Ps(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ps(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var y=h.dehydrated;y!==null&&Ln(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}ie||t.flags&512&&Go(t)}catch(g){Y(t,t.return,g)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function Xs(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function Zs(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ma(4,t)}catch(u){Y(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(u){Y(t,a,u)}}var o=t.return;try{Go(t)}catch(u){Y(t,o,u)}break;case 5:var s=t.return;try{Go(t)}catch(u){Y(t,s,u)}}}catch(u){Y(t,t.return,u)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var op=Math.ceil,na=Ze.ReactCurrentDispatcher,ji=Ze.ReactCurrentOwner,Ne=Ze.ReactCurrentBatchConfig,D=0,ee=null,$=null,ne=0,be=0,Qt=yt(0),X=0,Xn=null,Pt=0,ya=0,Ai=0,Mn=null,fe=null,qi=0,cn=1/0,Fe=null,ra=!1,Oo=null,dt=null,wr=!1,ot=null,aa=0,Pn=0,Fo=null,Pr=-1,Dr=0;function ue(){return D&6?K():Pr!==-1?Pr:Pr=K()}function ft(e){return e.mode&1?D&2&&ne!==0?ne&-ne:Of.transition!==null?(Dr===0&&(Dr=Hl()),Dr):(e=B,e!==0||(e=window.event,e=e===void 0?16:eu(e.type)),e):1}function Be(e,t,n,r){if(50<Pn)throw Pn=0,Fo=null,Error(x(185));Jn(e,n,r),(!(D&2)||e!==ee)&&(e===ee&&(!(D&2)&&(ya|=n),X===4&&rt(e,ne)),me(e,r),n===1&&D===0&&!(t.mode&1)&&(cn=K()+500,pa&&bt()))}function me(e,t){var n=e.callbackNode;Ud(e,t);var r=Ur(e,e===ee?ne:0);if(r===0)n!==null&&ss(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ss(n),t===1)e.tag===0?Uf(Js.bind(null,e)):vu(Js.bind(null,e)),If(function(){!(D&6)&&bt()}),n=null;else{switch(Kl(r)){case 1:n=ai;break;case 4:n=Vl;break;case 16:n=Lr;break;case 536870912:n=Yl;break;default:n=Lr}n=yc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(Pr=-1,Dr=0,D&6)throw Error(x(327));var n=e.callbackNode;if(nn()&&e.callbackNode!==n)return null;var r=Ur(e,e===ee?ne:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=oa(e,r);else{t=r;var a=D;D|=2;var o=fc();(ee!==e||ne!==t)&&(Fe=null,cn=K()+500,Et(e,t));do try{lp();break}catch(l){dc(e,l)}while(!0);yi(),na.current=o,D=a,$!==null?t=0:(ee=null,ne=0,t=X)}if(t!==0){if(t===2&&(a=mo(e),a!==0&&(r=a,t=zo(e,a))),t===1)throw n=Xn,Et(e,0),rt(e,r),me(e,K()),n;if(t===6)rt(e,r);else{if(a=e.current.alternate,!(r&30)&&!ip(a)&&(t=oa(e,r),t===2&&(o=mo(e),o!==0&&(r=o,t=zo(e,o))),t===1))throw n=Xn,Et(e,0),rt(e,r),me(e,K()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(x(345));case 2:Tt(e,fe,Fe);break;case 3:if(rt(e,r),(r&130023424)===r&&(t=qi+500-K(),10<t)){if(Ur(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ue(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=To(Tt.bind(null,e,fe,Fe),t);break}Tt(e,fe,Fe);break;case 4:if(rt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-De(r);o=1<<s,s=t[s],s>a&&(a=s),r&=~o}if(r=a,r=K()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*op(r/1960))-r,10<r){e.timeoutHandle=To(Tt.bind(null,e,fe,Fe),r);break}Tt(e,fe,Fe);break;case 5:Tt(e,fe,Fe);break;default:throw Error(x(329))}}}return me(e,K()),e.callbackNode===n?cc.bind(null,e):null}function zo(e,t){var n=Mn;return e.current.memoizedState.isDehydrated&&(Et(e,t).flags|=256),e=oa(e,t),e!==2&&(t=fe,fe=n,t!==null&&Vo(t)),e}function Vo(e){fe===null?fe=e:fe.push.apply(fe,e)}function ip(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Ie(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rt(e,t){for(t&=~Ai,t&=~ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-De(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(D&6)throw Error(x(327));nn();var t=Ur(e,0);if(!(t&1))return me(e,K()),null;var n=oa(e,t);if(e.tag!==0&&n===2){var r=mo(e);r!==0&&(t=r,n=zo(e,r))}if(n===1)throw n=Xn,Et(e,0),rt(e,t),me(e,K()),n;if(n===6)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tt(e,fe,Fe),me(e,K()),null}function Mi(e,t){var n=D;D|=1;try{return e(t)}finally{D=n,D===0&&(cn=K()+500,pa&&bt())}}function Dt(e){ot!==null&&ot.tag===0&&!(D&6)&&nn();var t=D;D|=1;var n=Ne.transition,r=B;try{if(Ne.transition=null,B=1,e)return e()}finally{B=r,Ne.transition=n,D=t,!(D&6)&&bt()}}function Pi(){be=Qt.current,G(Qt)}function Et(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Bf(n)),$!==null)for(n=$.return;n!==null;){var r=n;switch(hi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yr();break;case 3:ln(),G(he),G(se),Ci();break;case 5:ki(r);break;case 4:ln();break;case 13:G(F);break;case 19:G(F);break;case 10:bi(r.type._context);break;case 22:case 23:Pi()}n=n.return}if(ee=e,$=e=pt(e.current,null),ne=be=t,X=0,Xn=null,Ai=ya=Pt=0,fe=Mn=null,Rt!==null){for(t=0;t<Rt.length;t++)if(n=Rt[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=a,r.next=s}n.pending=r}Rt=null}return e}function dc(e,t){do{var n=$;try{if(yi(),Ar.current=ta,ea){for(var r=z.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}ea=!1}if(Mt=0,J=Q=z=null,An=!1,Kn=0,ji.current=null,n===null||n.return===null){X=1,Xn=t,$=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=ne,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,y=h.tag;if(!(h.mode&1)&&(y===0||y===11||y===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Ls(s);if(m!==null){m.flags&=-257,Us(m,s,l,o,t),m.mode&1&&Gs(o,f,t),t=m,u=f;var v=t.updateQueue;if(v===null){var C=new Set;C.add(u),t.updateQueue=C}else v.add(u);break e}else{if(!(t&1)){Gs(o,f,t),Di();break e}u=Error(x(426))}}else if(U&&l.mode&1){var q=Ls(s);if(q!==null){!(q.flags&65536)&&(q.flags|=256),Us(q,s,l,o,t),gi(un(u,l));break e}}o=u=un(u,l),X!==4&&(X=2),Mn===null?Mn=[o]:Mn.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var c=Ku(o,u,t);Ms(o,c);break e;case 1:l=u;var d=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(dt===null||!dt.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=$u(o,l,t);Ms(o,b);break e}}o=o.return}while(o!==null)}hc(n)}catch(k){t=k,$===n&&n!==null&&($=n=n.return);continue}break}while(!0)}function fc(){var e=na.current;return na.current=ta,e===null?ta:e}function Di(){(X===0||X===3||X===2)&&(X=4),ee===null||!(Pt&268435455)&&!(ya&268435455)||rt(ee,ne)}function oa(e,t){var n=D;D|=2;var r=fc();(ee!==e||ne!==t)&&(Fe=null,Et(e,t));do try{sp();break}catch(a){dc(e,a)}while(!0);if(yi(),D=n,na.current=r,$!==null)throw Error(x(261));return ee=null,ne=0,X}function sp(){for(;$!==null;)pc($)}function lp(){for(;$!==null&&!qd();)pc($)}function pc(e){var t=mc(e.alternate,e,be);e.memoizedProps=e.pendingProps,t===null?hc(e):$=t,ji.current=null}function hc(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tp(n,t),n!==null){n.flags&=32767,$=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{X=6,$=null;return}}else if(n=ep(n,t,be),n!==null){$=n;return}if(t=t.sibling,t!==null){$=t;return}$=t=e}while(t!==null);X===0&&(X=5)}function Tt(e,t,n){var r=B,a=Ne.transition;try{Ne.transition=null,B=1,up(e,t,n,r)}finally{Ne.transition=a,B=r}return null}function up(e,t,n,r){do nn();while(ot!==null);if(D&6)throw Error(x(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Od(e,o),e===ee&&($=ee=null,ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wr||(wr=!0,yc(Lr,function(){return nn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ne.transition,Ne.transition=null;var s=B;B=1;var l=D;D|=4,ji.current=null,rp(e,n),lc(n,e),Ef(ko),Or=!!xo,ko=xo=null,e.current=n,ap(n),Md(),D=l,B=s,Ne.transition=o}else e.current=n;if(wr&&(wr=!1,ot=e,aa=a),o=e.pendingLanes,o===0&&(dt=null),Bd(n.stateNode),me(e,K()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ra)throw ra=!1,e=Oo,Oo=null,e;return aa&1&&e.tag!==0&&nn(),o=e.pendingLanes,o&1?e===Fo?Pn++:(Pn=0,Fo=e):Pn=0,bt(),null}function nn(){if(ot!==null){var e=Kl(aa),t=Ne.transition,n=B;try{if(Ne.transition=null,B=16>e?16:e,ot===null)var r=!1;else{if(e=ot,ot=null,aa=0,D&6)throw Error(x(331));var a=D;for(D|=4,R=e.current;R!==null;){var o=R,s=o.child;if(R.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(R=f;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:qn(8,h,o)}var y=h.child;if(y!==null)y.return=h,R=y;else for(;R!==null;){h=R;var g=h.sibling,m=h.return;if(oc(h),h===f){R=null;break}if(g!==null){g.return=m,R=g;break}R=m}}}var v=o.alternate;if(v!==null){var C=v.child;if(C!==null){v.child=null;do{var q=C.sibling;C.sibling=null,C=q}while(C!==null)}}R=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,R=s;else e:for(;R!==null;){if(o=R,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qn(9,o,o.return)}var c=o.sibling;if(c!==null){c.return=o.return,R=c;break e}R=o.return}}var d=e.current;for(R=d;R!==null;){s=R;var p=s.child;if(s.subtreeFlags&2064&&p!==null)p.return=s,R=p;else e:for(s=d;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ma(9,l)}}catch(k){Y(l,l.return,k)}if(l===s){R=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,R=b;break e}R=l.return}}if(D=a,bt(),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(la,e)}catch{}r=!0}return r}finally{B=n,Ne.transition=t}}return!1}function el(e,t,n){t=un(n,t),t=Ku(e,t,1),e=ct(e,t,1),t=ue(),e!==null&&(Jn(e,1,t),me(e,t))}function Y(e,t,n){if(e.tag===3)el(e,e,n);else for(;t!==null;){if(t.tag===3){el(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(dt===null||!dt.has(r))){e=un(n,e),e=$u(t,e,1),t=ct(t,e,1),e=ue(),t!==null&&(Jn(t,1,e),me(t,e));break}}t=t.return}}function cp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ue(),e.pingedLanes|=e.suspendedLanes&n,ee===e&&(ne&n)===n&&(X===4||X===3&&(ne&130023424)===ne&&500>K()-qi?Et(e,0):Ai|=n),me(e,t)}function gc(e,t){t===0&&(e.mode&1?(t=cr,cr<<=1,!(cr&130023424)&&(cr=4194304)):t=1);var n=ue();e=Qe(e,t),e!==null&&(Jn(e,t,n),me(e,n))}function dp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gc(e,n)}function fp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(x(314))}r!==null&&r.delete(t),gc(e,n)}var mc;mc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||he.current)pe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return pe=!1,Jf(e,t,n);pe=!!(e.flags&131072)}else pe=!1,U&&t.flags&1048576&&wu(t,$r,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mr(e,t),e=t.pendingProps;var a=an(t,se.current);tn(t,n),a=Si(null,t,r,e,a,n);var o=Ri();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ge(r)?(o=!0,Hr(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,wi(t),a.updater=ga,t.stateNode=a,a._reactInternals=t,Ao(t,r,e,n),t=Po(null,t,r,!0,o,n)):(t.tag=0,U&&o&&pi(t),le(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mr(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=hp(r),e=qe(r,e),a){case 0:t=Mo(null,t,r,e,n);break e;case 1:t=zs(null,t,r,e,n);break e;case 11:t=Os(null,t,r,e,n);break e;case 14:t=Fs(null,t,r,qe(r.type,e),n);break e}throw Error(x(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:qe(r,a),Mo(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:qe(r,a),zs(e,t,r,a,n);case 3:e:{if(Ju(t),e===null)throw Error(x(387));r=t.pendingProps,o=t.memoizedState,a=o.element,Ru(e,t),Zr(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=un(Error(x(423)),t),t=Vs(e,t,r,n,a);break e}else if(r!==a){a=un(Error(x(424)),t),t=Vs(e,t,r,n,a);break e}else for(ve=ut(t.stateNode.containerInfo.firstChild),we=t,U=!0,Pe=null,n=Tu(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(on(),r===a){t=Xe(e,t,n);break e}le(e,t,r,n)}t=t.child}return t;case 5:return _u(t),e===null&&No(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,s=a.children,Co(r,a)?s=null:o!==null&&Co(r,o)&&(t.flags|=32),Zu(e,t),le(e,t,s,n),t.child;case 6:return e===null&&No(t),null;case 13:return ec(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=sn(t,null,r,n):le(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:qe(r,a),Os(e,t,r,a,n);case 7:return le(e,t,t.pendingProps,n),t.child;case 8:return le(e,t,t.pendingProps.children,n),t.child;case 12:return le(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,I(Qr,r._currentValue),r._currentValue=s,o!==null)if(Ie(o.value,s)){if(o.children===a.children&&!he.current){t=Xe(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=He(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Eo(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(x(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Eo(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}le(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,tn(t,n),a=Ee(a),r=r(a),t.flags|=1,le(e,t,r,n),t.child;case 14:return r=t.type,a=qe(r,t.pendingProps),a=qe(r.type,a),Fs(e,t,r,a,n);case 15:return Qu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:qe(r,a),Mr(e,t),t.tag=1,ge(r)?(e=!0,Hr(t)):e=!1,tn(t,n),Hu(t,r,a),Ao(t,r,a,n),Po(null,t,r,!0,e,n);case 19:return tc(e,t,n);case 22:return Xu(e,t,n)}throw Error(x(156,t.tag))};function yc(e,t){return zl(e,t)}function pp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _e(e,t,n,r){return new pp(e,t,n,r)}function Bi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hp(e){if(typeof e=="function")return Bi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ti)return 11;if(e===ni)return 14}return 2}function pt(e,t){var n=e.alternate;return n===null?(n=_e(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Br(e,t,n,r,a,o){var s=2;if(r=e,typeof e=="function")Bi(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Lt:return jt(n.children,a,o,t);case ei:s=8,a|=8;break;case eo:return e=_e(12,n,t,a|2),e.elementType=eo,e.lanes=o,e;case to:return e=_e(13,n,t,a),e.elementType=to,e.lanes=o,e;case no:return e=_e(19,n,t,a),e.elementType=no,e.lanes=o,e;case _l:return ba(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sl:s=10;break e;case Rl:s=9;break e;case ti:s=11;break e;case ni:s=14;break e;case et:s=16,r=null;break e}throw Error(x(130,e==null?e:typeof e,""))}return t=_e(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function jt(e,t,n,r){return e=_e(7,e,r,t),e.lanes=n,e}function ba(e,t,n,r){return e=_e(22,e,r,t),e.elementType=_l,e.lanes=n,e.stateNode={isHidden:!1},e}function Qa(e,t,n){return e=_e(6,e,null,t),e.lanes=n,e}function Xa(e,t,n){return t=_e(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gp(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Aa(0),this.expirationTimes=Aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ii(e,t,n,r,a,o,s,l,u){return e=new gp(e,t,n,l,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=_e(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wi(o),e}function mp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gt,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bc(e){if(!e)return gt;e=e._reactInternals;e:{if(It(e)!==e||e.tag!==1)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ge(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(x(171))}if(e.tag===1){var n=e.type;if(ge(n))return bu(e,n,t)}return t}function vc(e,t,n,r,a,o,s,l,u){return e=Ii(n,r,!0,e,a,o,s,l,u),e.context=bc(null),n=e.current,r=ue(),a=ft(n),o=He(r,a),o.callback=t??null,ct(n,o,a),e.current.lanes=a,Jn(e,a,r),me(e,r),e}function va(e,t,n,r){var a=t.current,o=ue(),s=ft(a);return n=bc(n),t.context===null?t.context=n:t.pendingContext=n,t=He(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ct(a,t,s),e!==null&&(Be(e,a,s,o),jr(e,a,s)),s}function ia(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Wi(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function yp(){return null}var wc=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gi(e){this._internalRoot=e}wa.prototype.render=Gi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(x(409));va(e,t,null,null)};wa.prototype.unmount=Gi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dt(function(){va(null,e,null,null)}),t[$e]=null}};function wa(e){this._internalRoot=e}wa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nt.length&&t!==0&&t<nt[n].priority;n++);nt.splice(n,0,e),n===0&&Jl(e)}};function Li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nl(){}function bp(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var f=ia(s);o.call(f)}}var s=vc(t,r,e,0,null,!1,!1,"",nl);return e._reactRootContainer=s,e[$e]=s.current,Fn(e.nodeType===8?e.parentNode:e),Dt(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var f=ia(u);l.call(f)}}var u=Ii(e,0,!1,null,null,!1,!1,"",nl);return e._reactRootContainer=u,e[$e]=u.current,Fn(e.nodeType===8?e.parentNode:e),Dt(function(){va(t,u,n,r)}),u}function ka(e,t,n,r,a){var o=n._reactRootContainer;if(o){var s=o;if(typeof a=="function"){var l=a;a=function(){var u=ia(s);l.call(u)}}va(t,s,e,a)}else s=bp(n,t,e,a,r);return ia(s)}$l=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Tn(t.pendingLanes);n!==0&&(oi(t,n|1),me(t,K()),!(D&6)&&(cn=K()+500,bt()))}break;case 13:Dt(function(){var r=Qe(e,1);if(r!==null){var a=ue();Be(r,e,1,a)}}),Wi(e,1)}};ii=function(e){if(e.tag===13){var t=Qe(e,134217728);if(t!==null){var n=ue();Be(t,e,134217728,n)}Wi(e,134217728)}};Ql=function(e){if(e.tag===13){var t=ft(e),n=Qe(e,t);if(n!==null){var r=ue();Be(n,e,t,r)}Wi(e,t)}};Xl=function(){return B};Zl=function(e,t){var n=B;try{return B=e,t()}finally{B=n}};po=function(e,t,n){switch(t){case"input":if(oo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=fa(r);if(!a)throw Error(x(90));El(r),oo(r,a)}}}break;case"textarea":Al(e,n);break;case"select":t=n.value,t!=null&&Xt(e,!!n.multiple,t,!1)}};Wl=Mi;Gl=Dt;var vp={usingClientEntryPoint:!1,Events:[tr,zt,fa,Bl,Il,Mi]},xn={findFiberByHostInstance:St,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wp={bundleType:xn.bundleType,version:xn.version,rendererPackageName:xn.rendererPackageName,rendererConfig:xn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ze.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ol(e),e===null?null:e.stateNode},findFiberByHostInstance:xn.findFiberByHostInstance||yp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xr.isDisabled&&xr.supportsFiber)try{la=xr.inject(wp),Ue=xr}catch{}}ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vp;ke.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Li(t))throw Error(x(200));return mp(e,t,null,n)};ke.createRoot=function(e,t){if(!Li(e))throw Error(x(299));var n=!1,r="",a=wc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ii(e,1,!1,null,null,n,!1,r,a),e[$e]=t.current,Fn(e.nodeType===8?e.parentNode:e),new Gi(t)};ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(x(188)):(e=Object.keys(e).join(","),Error(x(268,e)));return e=Ol(t),e=e===null?null:e.stateNode,e};ke.flushSync=function(e){return Dt(e)};ke.hydrate=function(e,t,n){if(!xa(t))throw Error(x(200));return ka(null,e,t,!0,n)};ke.hydrateRoot=function(e,t,n){if(!Li(e))throw Error(x(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",s=wc;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=vc(t,null,e,1,n??null,a,!1,o,s),e[$e]=t.current,Fn(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new wa(t)};ke.render=function(e,t,n){if(!xa(t))throw Error(x(200));return ka(null,e,t,!1,n)};ke.unmountComponentAtNode=function(e){if(!xa(e))throw Error(x(40));return e._reactRootContainer?(Dt(function(){ka(null,null,e,!1,function(){e._reactRootContainer=null,e[$e]=null})}),!0):!1};ke.unstable_batchedUpdates=Mi;ke.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xa(n))throw Error(x(200));if(e==null||e._reactInternals===void 0)throw Error(x(38));return ka(e,t,n,!1,r)};ke.version="18.3.1-next-f1338f8080-20240426";function xc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xc)}catch(e){console.error(e)}}xc(),xl.exports=ke;var xp=xl.exports,rl=xp;Za.createRoot=rl.createRoot,Za.hydrateRoot=rl.hydrateRoot;const kc=()=>({id:crypto.randomUUID(),name:"New Character",version:"1.0",attributes:{bod:1,agi:1,rea:1,str:1,wil:1,int:1,log:1,cha:1,luk:1},tradition:1,castStat:"log",affinities:{w:0,u:0,b:0,r:0,g:0},skills:{},knowledgeSkills:[],abilities:[],weapons:[],armorType:"none",notes:"",inventory:"",bpBudget:1620});function kp(e,t){switch(t.type){case"SET_NAME":return{...e,name:t.payload};case"SET_ATTRIBUTE":return{...e,attributes:{...e.attributes,[t.payload.attribute]:t.payload.value}};case"SET_TRADITION":return{...e,tradition:t.payload};case"SET_CAST_STAT":return{...e,castStat:t.payload};case"SET_AFFINITY":return{...e,affinities:{...e.affinities,[t.payload.color]:t.payload.value}};case"SET_SKILL":{const n={...e.skills};return t.payload.rank===0?delete n[t.payload.skillName]:n[t.payload.skillName]=t.payload.rank,{...e,skills:n}}case"SET_GROUP_SKILL":{const n={...e.skills},{groupName:r,rank:a,childNames:o}=t.payload;a===0?delete n[r]:n[r]=a;for(const s of o)delete n[s];return{...e,skills:n}}case"ADD_KNOWLEDGE_SKILL":return{...e,knowledgeSkills:[...e.knowledgeSkills,{name:"",rank:0}]};case"UPDATE_KNOWLEDGE_SKILL":{const{index:n,name:r,rank:a}=t.payload,o=[...e.knowledgeSkills];return n>=0&&n<o.length&&(o[n]={...o[n],...r!==void 0?{name:r}:{},...a!==void 0?{rank:a}:{}}),{...e,knowledgeSkills:o}}case"REMOVE_KNOWLEDGE_SKILL":return{...e,knowledgeSkills:e.knowledgeSkills.filter((n,r)=>r!==t.payload)};case"ADD_ABILITY":return{...e,abilities:[...e.abilities,t.payload]};case"UPDATE_ABILITY":return{...e,abilities:e.abilities.map(n=>n.name===t.payload.name?{...n,rank:t.payload.rank}:n)};case"REMOVE_ABILITY":return{...e,abilities:e.abilities.filter(n=>n.name!==t.payload)};case"ADD_WEAPON":return{...e,weapons:[...e.weapons,t.payload]};case"UPDATE_WEAPON":return{...e,weapons:e.weapons.map(n=>n.id===t.payload.id?t.payload:n)};case"REMOVE_WEAPON":return{...e,weapons:e.weapons.filter(n=>n.id!==t.payload)};case"SET_ARMOR_TYPE":return{...e,armorType:t.payload};case"SET_NOTES":return{...e,notes:t.payload};case"SET_INVENTORY":return{...e,inventory:t.payload};case"SET_BP_BUDGET":return{...e,bpBudget:t.payload};case"LOAD_CHARACTER":return t.payload;case"RESET_CHARACTER":return kc();default:return e}}const Cc=N.createContext(void 0);function Cp({children:e}){const[t,n]=N.useReducer(kp,kc());return i.jsx(Cc.Provider,{value:{character:t,dispatch:n},children:e})}function Ui(){const e=N.useContext(Cc);if(!e)throw new Error("useCharacterContext must be used within CharacterProvider");return e}const al={light:{background:"bg-gradient-to-br from-slate-50 to-blue-50",headerGradient:"bg-gradient-to-r from-blue-100 via-cyan-50 to-blue-100"},dark:{background:"bg-gradient-to-br from-navy-deep to-navy-mid",headerGradient:"bg-gradient-to-r from-navy-deep via-navy-mid to-navy-deep"}},ol={primary:"navy",accent:"cyan"},Tc=N.createContext(void 0);function Tp({children:e}){const[t,n]=N.useState(()=>localStorage.getItem("shimmering-reach-mode")||"dark"),[r,a]=N.useState(()=>window.matchMedia("(prefers-color-scheme: dark)").matches);N.useEffect(()=>{const f=window.matchMedia("(prefers-color-scheme: dark)"),h=y=>a(y.matches);return f.addEventListener("change",h),()=>f.removeEventListener("change",h)},[]);const o=t==="dark"||t==="system"&&r;N.useEffect(()=>{o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o]);const s=f=>{n(f),localStorage.setItem("shimmering-reach-mode",f)},l=o?al.dark:al.light,u={primary:ol.primary,accent:ol.accent,background:l.background,headerGradient:l.headerGradient};return i.jsx(Tc.Provider,{value:{mode:t,setMode:s,isDarkMode:o,themeColors:u},children:e})}function Oi(){const e=N.useContext(Tc);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const Sc=N.createContext(void 0);let Sp=0;function Rp({children:e}){const[t,n]=N.useState([]),r=N.useRef(new Map),a=N.useCallback(s=>{n(u=>u.filter(f=>f.id!==s));const l=r.current.get(s);l&&(l.forEach(clearTimeout),r.current.delete(s))},[]),o=N.useCallback((s,l="info")=>{const u=Sp++;n(y=>[...y,{id:u,message:s,type:l,isExiting:!1}]);const f=setTimeout(()=>{n(y=>y.map(g=>g.id===u?{...g,isExiting:!0}:g))},2700),h=setTimeout(()=>{a(u)},3e3);r.current.set(u,[f,h])},[a]);return i.jsx(Sc.Provider,{value:{toasts:t,showToast:o,removeToast:a},children:e})}function Rc(){const e=N.useContext(Sc);if(!e)throw new Error("useToast must be used within ToastProvider");return e}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),L=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:l="",children:u,...f},h)=>N.createElement("svg",{ref:h,..._p,width:a,height:a,stroke:r,strokeWidth:s?Number(o)*24/Number(a):o,className:["lucide",`lucide-${Np(e)}`,l].join(" "),...f},[...t.map(([y,g])=>N.createElement(y,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=L("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=L("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=L("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=L("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=L("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=L("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=L("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=L("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=L("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=L("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=L("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=L("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=L("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=L("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=L("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=L("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=L("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=L("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=L("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=L("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=L("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=L("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=L("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=L("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vp={success:{border:"border-success",icon:jp},error:{border:"border-error",icon:Fp},warning:{border:"border-warning",icon:_c},info:{border:"border-cyan-electric",icon:Bp}};function Yp(){const{toasts:e,removeToast:t}=Rc();return e.length===0?null:i.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[100] flex flex-col gap-2",children:e.map(n=>{const r=Vp[n.type],a=r.icon;return i.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center gap-3 px-5 py-3 rounded-lg bg-navy-mid border-2 ${r.border} shadow-panel cursor-pointer ${n.isExiting?"animate-toast-out":"animate-toast-in"}`,children:[i.jsx(a,{size:20,className:"shrink-0"}),i.jsx("span",{className:"text-cosmic-white text-sm font-medium",children:n.message})]},n.id)})})}function vt(){const{character:e,dispatch:t}=Ui();return{character:e,setName:n=>{t({type:"SET_NAME",payload:n})},setAttribute:(n,r)=>{t({type:"SET_ATTRIBUTE",payload:{attribute:n,value:r}})},setTradition:n=>{t({type:"SET_TRADITION",payload:n})},setCastStat:n=>{t({type:"SET_CAST_STAT",payload:n})},setAffinity:(n,r)=>{t({type:"SET_AFFINITY",payload:{color:n,value:r}})},setSkill:(n,r)=>{t({type:"SET_SKILL",payload:{skillName:n,rank:r}})},setGroupSkill:(n,r,a)=>{t({type:"SET_GROUP_SKILL",payload:{groupName:n,rank:r,childNames:a}})},addKnowledgeSkill:()=>{t({type:"ADD_KNOWLEDGE_SKILL"})},updateKnowledgeSkill:(n,r,a)=>{t({type:"UPDATE_KNOWLEDGE_SKILL",payload:{index:n,name:r,rank:a}})},removeKnowledgeSkill:n=>{t({type:"REMOVE_KNOWLEDGE_SKILL",payload:n})},addAbility:n=>{t({type:"ADD_ABILITY",payload:n})},updateAbility:(n,r)=>{t({type:"UPDATE_ABILITY",payload:{name:n,rank:r}})},removeAbility:n=>{t({type:"REMOVE_ABILITY",payload:n})},addWeapon:n=>{t({type:"ADD_WEAPON",payload:n})},updateWeapon:n=>{t({type:"UPDATE_WEAPON",payload:n})},removeWeapon:n=>{t({type:"REMOVE_WEAPON",payload:n})},setArmorType:n=>{t({type:"SET_ARMOR_TYPE",payload:n})},setNotes:n=>{t({type:"SET_NOTES",payload:n})},setInventory:n=>{t({type:"SET_INVENTORY",payload:n})},setBPBudget:n=>{t({type:"SET_BP_BUDGET",payload:n})},loadCharacter:n=>{t({type:"LOAD_CHARACTER",payload:n})},resetCharacter:()=>{t({type:"RESET_CHARACTER"})}}}function Mc(e){return e<=1?0:(e*e+e-2)*2.5}function Pc(e){let t=0;for(const n in e)t+=Mc(e[n]);return t}function Yi(e){return e<=0?0:(e*e+7*e-8)*2.5}function Nt(e,t){return e<=0?0:(e*e+e+2)*t}function Dc(e,t){return(e+t)*10}function Bc(e,t){let n=0;for(const r of e){const a=t.find(o=>o.name===r.name);if(a)if(Array.isArray(a.bpCost)){const o=Math.min(r.rank,a.bpCost.length-1);n+=a.bpCost[o]||0}else n+=a.bpCost||0}return n}function Hp(e){return e*3}function Kp(e,t,n){return t+n+Math.min(t,Math.ceil(e/2))}function $p(e,t,n={}){return{hp:16+e.bod+(n.hp||0),stam:16+e.wil+(n.stam||0),drain:16+e[t]+(n.drain||0),luk:e.luk}}function Qp(e,t,n,r={}){const a=e.int+e.rea,o=Math.ceil(t/2),s=n.Dodge||0;return{dodgePassive:a,dodgeActive:a+s+Math.min(s,o)+(r.dodge||0)+(r.lightArmorBonus||0)}}function Xp(e){return{physical:e.bod+e.agi,mental:e.wil+e.cha,dvThreshold:e.bod}}function Zp(e,t={}){return{armor:e.bod+Math.floor(e.log/2)+(t.armor||0),physical:e.str+Math.floor(e.agi/2)+(t.physical||0),mental:e.wil+Math.floor(e.cha/2)+(t.mental||0),drain:2*e.wil+(t.drain||0)}}function Jp(e,t,n,r){let a=0;e.type==="light"?a=t.agi:a=t.str;const o=e.skillName||"Weapon",s=n[o]||0;let l=a+s+e.reach;return l+=Math.min(s,Math.ceil(r/2)),l}function Ic(e,t,n){const r=n.find(a=>a.name===e);if(!r)return t[e]||0;if(r.parentGroup){const a=t[r.parentGroup]||0;if(a>0)return a}return t[e]||0}function Wc(e,t){let n=0;const r=new Set;for(const a of t)if(a.type==="parent"){const o=e[a.name]||0;o>0&&(n+=Nt(o,a.costMultiplier),r.add(a.name))}for(const a of t)if(a.type==="individual"){if(a.parentGroup&&r.has(a.parentGroup))continue;const o=e[a.name]||0;o>0&&(n+=Nt(o,a.costMultiplier))}return n}function Gc(e,t,n){let r=0;for(const o of e)o.rank>0&&(r+=Nt(o.rank,.5));const a=Dc(t,n);return Math.max(0,r-a)}function eh(e,t,n,r,a,o,s=[]){const l=Pc(e),u=Yi(t),f=Wc(n,r),h=Gc(s,e.log,e.int),y=Bc(a,o);return l+u+f+h+y}const th=[{name:"ATHLETICS",type:"parent",attribute:"str",costMultiplier:2.5,category:"Athletics"},{name:"Strongman",type:"individual",attribute:"str",costMultiplier:1,category:"Athletics",parentGroup:"ATHLETICS"},{name:"Gymnastics",type:"individual",attribute:"agi",costMultiplier:1,category:"Athletics",parentGroup:"ATHLETICS"},{name:"Marathoner",type:"individual",attribute:"bod",costMultiplier:1,category:"Athletics",parentGroup:"ATHLETICS"},{name:"Traversal",type:"individual",attribute:"rea",costMultiplier:1,category:"Athletics",parentGroup:"ATHLETICS"},{name:"SURVIVAL",type:"parent",attribute:"int",costMultiplier:2.5,category:"Survival"},{name:"Navigation",type:"individual",attribute:"int",costMultiplier:1,category:"Survival",parentGroup:"SURVIVAL"},{name:"Survival",type:"individual",attribute:"wil",costMultiplier:1,category:"Survival",parentGroup:"SURVIVAL"},{name:"Medicine",type:"individual",attribute:"log",costMultiplier:1,category:"Survival",parentGroup:"SURVIVAL"},{name:"Animal Handling",type:"individual",attribute:"int",costMultiplier:1,category:"Survival",parentGroup:"SURVIVAL"},{name:"INFLUENCE",type:"parent",attribute:"cha",costMultiplier:2.5,category:"Influence"},{name:"Con",type:"individual",attribute:"cha",costMultiplier:1,category:"Influence",parentGroup:"INFLUENCE"},{name:"Insight",type:"individual",attribute:"int",costMultiplier:1,category:"Influence",parentGroup:"INFLUENCE"},{name:"Intimidation",type:"individual",attribute:"cha",costMultiplier:1,category:"Influence",parentGroup:"INFLUENCE"},{name:"Negotiation",type:"individual",attribute:"cha",costMultiplier:1,category:"Influence",parentGroup:"INFLUENCE"},{name:"SUBTERFUGE",type:"parent",attribute:"agi",costMultiplier:2.5,category:"Subterfuge"},{name:"Disguise",type:"individual",attribute:"int",costMultiplier:1,category:"Subterfuge",parentGroup:"SUBTERFUGE"},{name:"Stealth",type:"individual",attribute:"agi",costMultiplier:1,category:"Subterfuge",parentGroup:"SUBTERFUGE"},{name:"Legerdemain",type:"individual",attribute:"agi",costMultiplier:1,category:"Subterfuge",parentGroup:"SUBTERFUGE"},{name:"Thievery",type:"individual",attribute:"agi",costMultiplier:1,category:"Subterfuge",parentGroup:"SUBTERFUGE"},{name:"Spellcasting",type:"individual",attribute:"log",costMultiplier:1},{name:"Perceive Magic",type:"individual",attribute:"log",costMultiplier:1},{name:"Weapon",type:"individual",attribute:"agi",costMultiplier:1},{name:"Perception",type:"individual",attribute:"int",costMultiplier:1},{name:"Dodge",type:"individual",attribute:"rea",costMultiplier:1},{name:"Perseverance",type:"individual",attribute:"wil",costMultiplier:1}],nh=[{category:"Aura",name:"Drinker of Souls",description:"Automatically absorb energy from dying / recently slain foes",rulesText:`A creature that begins dying or loses health while dying within the aura rolls BOD vs. WIL to resist, failure or tie results in its death. This aura automatically succeeds against a target that has been dead for up to 5 rounds, on 6+ rounds no effect. \r
When a creature's soul is consumed gain 1 temporary HP, stacking.\r
\r
A creature's soul can only be so consumed once. If multiple instances of this ability would trigger on a soul, the owner who most recently acted in initiative gets priority, then second most recent, etc.`,bpCost:10,affinityReq:"7B,(9)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Aura",name:"Enduring Presence",description:"Damage dampening, discharge to mitigate one hit",rulesText:`Allies within the aura gain RANK+1 damage dampening. \r
Discharge: one subject of the aura gets RANK+1+(quantity of subjects) damage dampening against one attack.`,bpCost:[60,70,80],affinityReq:`12W,(15)\r
16W,(21)\r
20W,(27)`,colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Fear Aura",description:"This fear aura triggers on any aggressive action.",rulesText:"You may attempt a free intimidation check against all enemies within the aura once per round as part of an attack. The effects of the intimidation check apply after the attack is resolved. As normal, you can only apply one fear effect to a given target once per turn.",bpCost:15,affinityReq:"4R,5(B|R),(12)",colorContributions:{w:0,u:0,b:6,r:6,g:0}},{category:"Aura",name:"Feedback Aura",description:"Nearby enemies subject to damage when you are wounded",rulesText:"Enemies in the aura (CHA/2 *5 ft instead of standard CHA*5) resist (damage you took+CHA-2) as psychic damage with mental soak.",bpCost:10,affinityReq:"4(W|B),4(W|U|B),(15)",colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Aura",name:"Generous Enchancements",description:"Share the effects of one ongoing buff you are subject to with all allies in range of this aura.",rulesText:"When you trigger a buff you may designate it as being Generously Enhanced. This ability becomes the shared aura effect of Generous Enhancements and does not count for you as a body buff if it was one. As a Extra action you may designate a buff currently on you to become Generously Enhanced, it becomes the aura effect and any current aura effect reverts to its normal buff state.",bpCost:100,affinityReq:"12W,12G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Glare of the noonday sun",description:"nonlethal damage vs. everything at start of your turn",rulesText:"All creatures within (CHA/2 + RANK) ft (including you) must soak (BOD + 2* RANK) fire damage at the start of your turn. This damage is always nonlethal.",bpCost:[30,40,50],affinityReq:`14(W|R|G),(18)\r
16(W|R|G),(21)\r
19(W|R|G),(24)`,colorContributions:{w:12,u:0,b:0,r:12,g:12}},{category:"Aura",name:"Lawbringer's Presence",description:"Free counterspell attempts on any spells cast within this aura",rulesText:"You may attempt to counterspell any spell cast within this aura for (0)",bpCost:100,affinityReq:"8W,8U,8(W|U),(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Magic Circle of Heart",description:"All allies in the aura gain rank X to an element of your choice, chosen on activation.",rulesText:"All allies in the aura gain 2*RANK resist to ELEMENT of your choice, chosen on activation.",bpCost:20,affinityReq:"3W,(9) per",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Mana Leech",description:"Name a color. All drain using abilities except for the named color are subject to 1 higher drain. Whenever such an ability is used, roll 4 dice and heal HITS drain.",rulesText:"Name a color on aura activation. All spells and other drain using abilities used within the aura except for the named color may take 2+2*RANK overload. If they don't, roll 2+2*rank dice and heal HITS drain and the ability user loses HITS drain.",bpCost:20,affinityReq:`7U,7B,(18)\r
9U,9B,(24)\r
12U,12B,(30)`,colorContributions:{w:10,u:0,b:10,r:0,g:0}},{category:"Aura",name:"Menacing Presence",description:"Penalty to enemies trying to attack allies other than you",rulesText:"Enemies within (CHA*5 feet) take (CHA) penalty to their attack pools if targeting anything but a user of Menacing Presence. If enemies are not aware of you, this aura does not affect them.",bpCost:10,affinityReq:"4W,5(W|B|G),(12)",colorContributions:{w:6,u:0,b:6,r:0,g:0}},{category:"Aura",name:"Natural Shielding",description:"Aura, allies gain resistances",rulesText:"All allies within the aura gain +RANK armor, and 2*RANK+2 dice on rolls to resist effects originating from other recipients of this aura.",bpCost:[40,50,60],affinityReq:`7G,(15)\r
10G,(21)\r
13G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Aura",name:"Never surrender",description:"grants diehard to allies",rulesText:"Allies do not fall unconscious when a damage track is filled. They still die from overflow.",bpCost:10,affinityReq:"6W,6R,(15)",colorContributions:{w:8,u:0,b:0,r:8,g:0}},{category:"Aura",name:"No Retreat!",description:"Your inspiration prevents enemies from being able to withdraw safely",rulesText:"Enemies within your zone of control provoke attacks of opportunity from you when using any form of movement even if they would not normally provoke.  At rank 2 all enemies within CHA*5 always provoke attacks of opportunity (from threatening allies) when moving through an allies zone of control. All forms of movement, including instant teleportation, provoke. Allies must also be within this aura to gain these benefits.",bpCost:[20,20],affinityReq:`4W,5(W|B),(12)\r
7W,9(W|B),(21)`,colorContributions:{w:6,u:0,b:6,r:0,g:0}},{category:"Aura",name:"Rally Morale",description:"Your allies may use your willpower in place of their own, or their willpower + RANK (whichever is higher) when resisting most effects. This does not apply to drain checks.",rulesText:"Your allies may use your willpower in place of their own, or their willpower + RANK (whichever is higher) when resisting most effects. This does not apply to drain checks.",bpCost:10,affinityReq:"6W,6(W|U|G),(15)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Rallying Aura",description:"bonus vs. fear and charm, bonus on combat",rulesText:"Resist fear, resist charm, combat; +1 die per rank",bpCost:15,affinityReq:`3W,4(W|R),(9)\r
7W,7(W|R),(18)\r
10W,11(W|R),(27)`,colorContributions:{w:3,u:0,b:0,r:3,g:0}},{category:"Aura",name:"Rallying Spirit",description:"Your combat prowess brings inspiration to your allies, their morale confers healing",rulesText:"When you make a successful melee attack you may heal an ally within CHA*5 ft RANK*4 meat or RANK*8 stam health. (This healing is subject to normal healing rules.)",bpCost:10,affinityReq:`6W,(12)\r
9W,(18)\r
12W,(24)\r
18W,(30)`,colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Repositioning Aura",description:"When you hit with an attack you may designate an ally within your aura to take a move action.",rulesText:"When you hit with an attack you may designate an ally within your aura to move up to their movement rate.",bpCost:20,affinityReq:"3W,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Shielding Aura",description:"When you make a parry, all allies within the aura gain 1 temp hp",rulesText:"When you succesfully block or parry, all allies except you within the aura gain 2 temp hp",bpCost:40,affinityReq:"7W,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Skill Teamwork",description:`Boost allies' skills for skills you have high ranks in\r
 (DEPRECATED)`,rulesText:`DEPRECATED\r
Rank 1: up to 2\r
Rank 2: up to 4\r
Rank 3: up to 6\r
Rank 4: up to 8`,bpCost:20,affinityReq:"1W,1G,1(W|G),(6) per",colorContributions:{w:4,u:4,b:0,r:0,g:4}},{category:"Aura",name:"Slow Aura",description:"increase initiative cost of enemy actions",rulesText:"Enemy's actions cost 1+(RANK) more initiative so long as they are within (5*CHA feet) of you. If another effect would inflict a penalty on the initiative cost of actions only the highest penalty applies.",bpCost:10,affinityReq:`3U,4(W|U),(9)\r
7U,7(W|U),(18)\r
10U,11(W|U),(27)`,colorContributions:{w:6,u:6,b:6,r:0,g:0}},{category:"Aura",name:"Warleader",description:"Allies can attack right after you with a bonus.",rulesText:"The first time you attack each turn all allies within range may take their turn immediately after yours. An ally who chooses to do so may only move or make attacks during that turn. Allies who make use of this ability gain a stacking, refreshing +1 dice to all attack, block, parry rolls until the end of their next turn. The maximum benefit of this bonus is your CHA.",bpCost:50,affinityReq:"9W,9R,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"All outta Bubblegum",description:"various grapple, melee roughness bonuses",rulesText:`Body Buff\r
\r
RANK-1 damage dampening\r
ignore RANK points of wound penalty\r
+RANK vs. knockdown, disarm, trip, resisting grapple\r
\r
Melee attacks trigger knockdown on hit. Target rolls physical resist or gymnastics vs. unsoaked damage.\r
\r
Enemies that fail to escape your grapples take damage as if you made the grapple attack action against them\r
Ignore half an enemy's armor with your grapple attacks`,bpCost:[20,30,40],affinityReq:`4(R|G),(9)\r
9(R|G),(18)\r
13(R|G),(27)`,colorContributions:{w:0,u:0,b:0,r:3,g:3}},{category:"Buff",name:"Arcane Conduit",description:"Casting spells",rulesText:`Body Buff\r
Casting a spell generates a mana charge.\r
Charges may be expended as follows\r
2-Spent to mitigate an overload (per 1)\r
2-Spent in place of init costs on counterspelling/redirecting (per 5)\r
2-Spent to mitigate a counterspell/redirect attempt against one of your spells (-3 dice to opposed attempt per)\r
\r
Max charges = 2*RANK \r
\r
These charges decay after one minute of not generating nor using charges. If you would overflow your limit on charges take drain equal to the overflow amount. You shed sparking magical light (as a torch) while you have at least 2 charges.\r
\r
At Rank 2: Centering generates 1 charge, every point of drain you take from spellcasting generates 1 charge.\r
\r
At Rank 3: All charge generation is increased by +1`,bpCost:[30,40,80],affinityReq:`4U,4R,(18)\r
6U,6R,(24)\r
8U,8R,(30)`,colorContributions:{w:0,u:7,b:0,r:7,g:0}},{category:"Buff",name:"Avatar of Malice",description:"Empower attacks, lifesteal, ignore full defense",rulesText:`Body buff. \r
All damage you deal is applied as Dark damage post mitigation.\r
Enemies need to spend (5) in order for their total defense to apply against your attack.\r
Whenever your melee attack deals damage to one or more targets gain 2 temp hp, your temp hp may stack.\r
You treat all incoming dark damage and dark damage you suffer as normal damage. \r
After damage is calculated against you, you may move up to (WIL/2) points of it to the delayed track. At the end of the round you lose health equal to the damage in the delayed track, the track then empties.`,bpCost:100,affinityReq:"24B,(30)",colorContributions:{w:0,u:0,b:20,r:0,g:0}},{category:"Buff",name:"Avatar of the Heart",description:"Let there be heals",rulesText:`Body Buff\r
When your healing effects heal a creature for at least 1 health you also grant them 2 temp hp. This temp HP can stack on existing temp hp.\r
You may spend 1L in place of any drain you suffer as part of casting a healing effect, this also mitigates all drain for recipients of this healing effect. \r
you may take 3 on all healing rolls\r
You may trigger healing effects as an interrupt at (5)`,bpCost:100,affinityReq:"24W,(30)",colorContributions:{w:20,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Bastion",description:"Defensive bonuses, reduced offensive power",rulesText:"half Action. Increase damage dampening by RANK+2. Reduce the starting power of your attacks by RANK+2. This is a body buff",bpCost:50,affinityReq:`3W,(15)\r
5W,(21)\r
6W,(27)`,colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Bonemonger",description:"Successful attacks generate a temp hp shield, can detonate temp hp shield",rulesText:"Successful attacks generate 2 temp hp. You may detonate your temp hp, discharging the buff, as a full action to deal BOD+temp hp DV as a 10ft AoE attack (attacking with your weapon skill or spellcasting dicepool). This is a body buff.",bpCost:40,affinityReq:"7W,7B,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Brambleward",description:"Ward against targeted magical effects, discharge for a burst of strength",rulesText:"half action. Gain +3*RANK against targeted magical effects until the end of this round. You may discharge this effect to get +2 STR *RANK on one attempted action.",bpCost:10,affinityReq:`4G,(9)\r
9G,(18)\r
13G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Buff",name:"Charge Weapon",description:"Hold a spell in a weapon to be discharged upon striking",rulesText:`You can cast spells into your weapon(s). The spells are discharged upon striking an opponent, one at a time, in the order they were cast in. \r
-Spells that normally target dodge automatically hit with 0 net hits. In the case of AoE effects produced off this (RULING NEEDED)\r
-Spells that target mental or physical resolve as normal.\r
\r
Casting a spell into a weapon is a half action. For every half action spent since the start of your last turn casting spells into your weapon(s) you may cast an additional spell as part of the half action. You may store up to (cast stat) spells at one time and you can only store spells of up to 1+(cast stat / 2) force.\r
\r
If the weapon leaves your possession for a minute all charges dissipate. Stored charges dissipate an hour after the last charge was added.`,bpCost:20,affinityReq:"3U,3R,(12)",colorContributions:{w:0,u:6,b:0,r:6,g:0}},{category:"Buff",name:"Conjure weapon / armor",description:"Summon personalized weapon / armor, functions while in your keeping but phases out for others",rulesText:`Binding weapons and/or armor is accomplished during one hour of downtime. \r
\r
You may summon any or all of the bound weapons/armor as if drawing (half), or dismiss them as if sheathing (half). When an item is dismissed it exists in a pocket dimension and access can be prevented by effects that limit extradimensional travel. Dismissed items count as attended. You may summon bound equipment back to you granted it has been at most one minute since you last made contact with it. If it is attended the attender must be willing. You are aware of the general direction your bound equipment is in if you become separated from it. \r
\r
You may bind one set of armor and (two one handed weapons or one two handed weapon) per rank.`,bpCost:5,affinityReq:"1W,(6)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Crisp and Cauterize",description:`Dealing direct fire damage procs a heal\r
Healing procs a firebolt`,rulesText:`Body Buff.\r
Whenever your attack or ability deals fire damage to a target you may heal an ally within 60ft for up to an equivalent amount of health.\r
Whenever you heal an ally you may generate a single target ranged firebolt as per Elemental Blast, at DV-1 of default\r
This ability cannot trigger itself`,bpCost:40,affinityReq:"9W,9R,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Deflecting Miasma",description:"More armor vs. ranged attacks, less armor vs. melee attack",rulesText:"Gain RANK armor against ranged attacks, take a penalty of RANK armor against melee attacks. Activating this buff is a simple action.",bpCost:10,affinityReq:"(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Displacer",description:"You occupy two adjacent squares, appearing to flicker between them.",rulesText:`Body Buff\r
\r
Gain +3 on all defensive checks (not mental or physical resist)\r
You occupy two adjacent squares.\r
You may act from either position that you occupy.\r
You may pass through thin obstacles at the cost of 5ft of movement.\r
You can pay (5) init to solidify in one spot at any time, or a half action during your turn, stabilizing the effect until you spend a Extra action to resume it.`,bpCost:20,affinityReq:"3U,4(U|G),(15)",colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Buff",name:"Duty's Ward",description:"Move to punish those who threaten your selected ally",rulesText:"This buff links you and one ally (within 60ft on activation) and lasts 24 hours or until one recipient opts to dismiss it as a full action. You are aware of when the linked ally is threatened or hurt. You can sense the rough direction the linked ally is in. Enemies taking actions that target the ally but not you provoke attacks of opportunity. Such a triggering action also grants 10ft of movement if that would allow you to move to threaten the triggering enemy.",bpCost:30,affinityReq:"9W,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Earthward",description:"Generates temp HP and 3 lightning resist",rulesText:`Body Buff.\r
Every minute and when you activate this ability you generate 2 temporary hp up to half your maximum temp hp. You also gain 6 lightning res.\r
_________________\r
Temporary HP accrues at the start of each round instead of every minute.`,bpCost:20,affinityReq:`6G,(12)\r
12G,(24)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Elemental Body (Acid)",description:"Acid: acid retal burst",rulesText:"Gain for the duration Resist Acid: 6*RANK Whenever you are struck by a corporeal attack that does at least 1 point of damage all adjacent creatures must soak (armor soak) acid damage equal to  (BOD + 3*RANK). You may channel the acid into an area attack centered on you (you are unaffected by this attack) with (BOD/2*5 ft radius). DV = (BOD+3* RANK)(resolve as a spellcast or attack as desired). Doing so ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the acid is a full action.",bpCost:[15,25,35],affinityReq:`2(B|G),(9)\r
4(B|G),(18)\r
6(B|G),(27)`,colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Buff",name:"Elemental Body (Air)",description:"Flight, increased movement speed, deflection, immunity to gases/inhaled poisons, wind blast discharge",rulesText:"You gain the ability to (glide, fly as per flight N, fly as per flight NN), your movement speed increases by 10*RANK, you gain +RANK dice vs. ranged attacks, immunity to gases and inhaled poisons, treat wind based vision penalties as RANK steps lower. As a full action you may discharge this buff to produce a (BOD/2)*5ft cone of rushing air, rolling weapon skill or spellcasting vs. all targets in the cone (eDV = BOD + 3*rank). Targets Resist with Physical Resist and soak with Physical soak. Targets are pushed (unsoaked eDV)/2 *5ft directly away from you.",bpCost:[15,25,35],affinityReq:`2(W|U),(9)\r
4(W|U),(18)\r
6(W|U),(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Elemental Body (Cold)",description:"Cold: chilling presence",rulesText:`Gain for the duration\r
Resist Cold: 6*RANK\r
Creatures that start their turn adjacent lose RANK initiative as if suffering damage from a cold effect. Resistance to cold mitigates this at a 1:1 ratio.\r
You may channel the chill into an area attack centered on you (you are unaffected by this attack) with (BOD/2*5 ft radius). DV = (BOD+ 3*RANK)(resolve as a spellcast or attack as desired). Doing so ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the cold is a full action.`,bpCost:[15,25,35],affinityReq:"2U,(9) per",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Buff",name:"Elemental Body (Dark)",description:"Ebody dark, resist dark, (active)",rulesText:"Gain for the duration Resist Dark: 6*RANK Whenever you are struck by a corporeal attack that does at least 1 point of damage you produce an obscuring miasma in your square that lasts until the end of the round/next round/next next round. You may channel the darkness into an obscuring miasma centered on you, radius = (BOD/2 -1+RANK), that lasts until the end of the next round. The miasma blocks all light for everyone except you. Doing so ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the darkness is a full action.",bpCost:[15,25,35],affinityReq:`2(B),(9)\r
4(B),(18)\r
6(B),(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Elemental Body (Earth)",description:"Earth:",rulesText:`Gain for the duration\r
Damage Dampening: 2\r
You may channel the strength of earth to mitigate one physical attack. Gaining an additional 3*RANK Damage Dampening. Doing so ends the benefits of Elemental Body after resolving the damage for that attack. This is a body buff. Activating this buff is a half action, channeling the earth is a nonaction.`,bpCost:[15,25,35],affinityReq:"2G,(9) per",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Buff",name:"Elemental Body (Fire)",description:"Fire: Burning presence, fire burst",rulesText:`Gain for the duration\r
Resist Fire: 6*RANK\r
Creatures that start their turn adjacent must save or catch fire as if affected by a (BOD+2*RANK) fire attack. At the end of each round adjacent objects save or catch fire.\r
You may channel the fire into an area attack centered on you (you are unaffected by this attack) with (BOD/2*5 ft radius). DV = (BOD+ 3*RANK)(resolve as a spellcast or attack as desired). Doing so ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the fire is a full action.`,bpCost:[15,25,35],affinityReq:"2R,(9) per",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Buff",name:"Elemental Body (Lightning)",description:"Lightning: lightning presence, lightning leap",rulesText:`Gain for the duration\r
Resist Lightning: 6*RANK\r
Creatures that are adjacent to you that take lightning damage take an additional point of lightning damage as if struck by a separate lightning effect. This ability cannot trigger itself.\r
You may channel the lightning into a line attack originating from you with up to (BOD*10 ft length). DV = (BOD+ 3*RANK)(resolve as a spellcast or attack as desired). You may teleport to the farthest square of the target area. Using the attack function ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the lightning is a full action.`,bpCost:[15,25,35],affinityReq:"2R,(9) per",colorContributions:{w:0,u:3,b:0,r:3,g:0}},{category:"Buff",name:"Elemental Body (Radiant)",description:"Ebody radiant, resist radiant, (active)",rulesText:"Gain for the duration Resist Radiant: 6*RANK Whenever you are struck by a corporeal attack that does at least 1 point of damage all adjacent creatures must avoid automatic blinding (until end of round), dodge or physical res vs. (BOD/2+rank-2) automatic hits. You may channel the radiance into an area attack centered on you (you are unaffected by this attack) with ((BOD/2+1)*5 ft radius), resolve as an attack or spellcast as desired. This attack does no damage, may be dodged or physically resisted, and only requires 3 net hits to blind (blinding until end of next round). This a. Doing so ends the benefits of Elemental Body. This is a body buff. Activating this buff is a half action, channeling the radiance is a full action.",bpCost:[15,25,35],affinityReq:`2(W),(9)\r
4(W),(18)\r
6(W),(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Envenom Weapons",description:"Poison weapons as weapon buff",rulesText:`Damage adjusted by -4\r
Victim injured by weapon soaks venom at end of round with phys soak, DV = your BOD \r
As usual for poison effects subsequent applications of the poison during the same round raise the end of round DV by 2.`,bpCost:20,affinityReq:"7(B|G),(9)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Escalation",description:"Lose mana each turn, but guarantee a growing drain soak value",rulesText:"Costs 1 mana to activate. Pay 1 mana at the start of your turn or this buff expires. Let X be the number of turns this buff has been active, counting the activation turn as the first turn. You may replace the result of your drain soak roll with X after rolling. Activating this buff is a simple action.",bpCost:20,affinityReq:"10R,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Fleetfoot Blessing",description:"1 temp hp, movespeed bonus while this temp hp lasts",rulesText:"grant 2 temp HP, increase your movement speed by 10 for 10 rounds. half action.",bpCost:5,affinityReq:"3W,3R,(12)",colorContributions:{w:4,u:0,b:0,r:4,g:0}},{category:"Buff",name:"Imbue Weapon (Acid)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4(B|G),(9)",colorContributions:{w:0,u:0,b:6,r:0,g:6}},{category:"Buff",name:"Imbue Weapon (Cold)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4U,(9)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Buff",name:"Imbue Weapon (Dark)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4B,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Buff",name:"Imbue Weapon (Fire)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Buff",name:"Imbue Weapon (Lightning)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4R,(9)",colorContributions:{w:0,u:3,b:0,r:3,g:0}},{category:"Buff",name:"Imbue Weapon (Radiant)",description:`Half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -1`,rulesText:`half action to apply element to attended weapons, dismiss as Extra action.\r
Changes weapon damage type to element.\r
Damage adjusted by -2`,bpCost:10,affinityReq:"4W,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Buff",name:"Martial Spirit",description:"No aura, two stances, combine maneuvers",rulesText:`Body Buff\r
You may not have an aura active\r
You may have two stances active\r
You may combine two maneuvers as part of one action where both could apply. If they both have initiative costs, you only need to pay the higher one.`,bpCost:100,affinityReq:"8W,8R,8(W|R),(30)",colorContributions:{w:7,u:0,b:0,r:7,g:0}},{category:"Buff",name:"Press your luck",description:"Spend (2?3?) points of luck, for the rest of the round all your dice explode",rulesText:"Nonaction. Spend 2 luck, For the rest of the round all your dice explode.",bpCost:10,affinityReq:"9R,(18)",colorContributions:{w:0,u:0,b:0,r:12,g:0}},{category:"Buff",name:"Purging Bubble",description:"1 temp hp, 1 purge roll on apply",rulesText:"half action. Reduce the (e)DV of one ongoing status on the target by 5. Target gains 1 temp hp",bpCost:5,affinityReq:"7W,(9)",colorContributions:{w:6,u:0,b:0,r:0,g:6}},{category:"Buff",name:"Shadow Partner",description:"Create a fragile clone of yourself with half stats that mirrors your actions",rulesText:"Extra action, spend 1 L. Create a shadowy clone of yourself in an adjacent square. It acts on your initiative count, has half your dicepool for any roll before modifiers. The clone cannot spend initiative on any actions, nor can it spend luck. The clone has its own health and cannot be healed, taking all damage as lethal. The clone does not suffer wound penalties. You can perceive everything your clone perceives. Outside of these limitations, your clone functions with your abilities.",bpCost:100,affinityReq:"8U,8B,8(U|B),(30)",colorContributions:{w:0,u:10,b:10,r:0,g:0}},{category:"Buff",name:"Shared fate",description:"split damage with ally",rulesText:"full Action. Touch range, targets ally and self. For the duration all damage suffered by either recipient of this buff is split equally (primary target takes higher value in case of odd valued damage). Split damage after all resistances and rolls are concluded.",bpCost:10,affinityReq:"4W,(6)",colorContributions:{w:2,u:0,b:0,r:0,g:2}},{category:"Buff",name:"Soulward",description:"Spend X health, get 2X temp hp",rulesText:"half Action. Spend X health to gain 2X temp hp.",bpCost:10,affinityReq:"6B,(12)",colorContributions:{w:0,u:0,b:10,r:0,g:0}},{category:"Buff",name:"Spellforged Strikes",description:"Gain martial prowess for a short time after casting spells",rulesText:"Gain +1 dice to weapon attack rolls until the end of the next round, cumulative and refreshing, when you cast a spell. While you are benefiting from these extra dice you may make an additional attack with a wielded weapon as part of a melee attack, splitting your dicepool as normal.",bpCost:40,affinityReq:"18(W|U|R),(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Swarmform",description:"Shapeshift into a cohesive swarm of small creatures",rulesText:`Gain +3 bonus (defense roll only) vs. single target attacks and effects\r
Take -5 penalty (defense and soak) vs. area attacks and effects\r
Damage taken from single target attacks cannot exceed 10\r
You may disperse/condense into a swarm as a half action.`,bpCost:30,affinityReq:"14G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:12}},{category:"Buff",name:"The Quick and The Dead",description:"boost dodge, take more damage when hit",rulesText:"half Action. Gain RANK free hits on all dodge rolls. Your damage dampening is reduced by (2+4*RANK).",bpCost:[30,40,50],affinityReq:"14(U|B|R),(18)",colorContributions:{w:0,u:0,b:6,r:6,g:0}},{category:"Buff",name:"Titan Armor",description:"Gain mitigation dice, slow down",rulesText:"half Action. Gain 2 Armor soak per RANK for RANK*10 rounds. Your speed is halved. This is a body buff.",bpCost:5,affinityReq:`4G,(6)\r
9G,(12)\r
14G,(18)\r
19G,(24)\r
24G,(30)`,colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Buff",name:"Vengeful Protector",description:"Buff up to one ally, attacks on them provoke from you",rulesText:"Simple action, buff an ally within 30 ft. Attacks that target that ally provoke an opportunity attack from you (Only creatures that you threaten provoke opportunity attacks from you).",bpCost:5,affinityReq:"12W,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Flaw",name:"Blindness",description:"You are blind",rulesText:"You are blind. Whenever the GM deems that this flaw impacts a scene they may award you 1 LUCK.",bpCost:0,affinityReq:"WURBG,(0)",colorContributions:{w:1,u:1,b:1,r:1,g:1}},{category:"Maneuver",name:"All in",description:"Burn initiative for a powerful strike",rulesText:`Spend the rest of your initiative as part of an attack. Gain +1 free hit for every (10) spent in this way, rounding up.\r
_________________\r
Instead for every (9) spent\r
_________________\r
Instead for every (8)`,bpCost:[5,10,15],affinityReq:`7R,(9)\r
14R,(18)\r
20R,(27)`,colorContributions:{w:0,u:0,b:0,r:10,g:0}},{category:"Ritual",name:"Arcane Mark",description:"Put a magic mark on something",rulesText:"Place an invisible magical mark on an object after 1 minute of casting. The mark is not invisible to you, and up to (cast stat) others of your choice present upon casting. The mark may be viewed normally with Perceive Magic).",bpCost:5,affinityReq:"1(W|U),(6)",colorContributions:{w:4,u:4,b:0,r:0,g:0}},{category:"Maneuver",name:"Arcane Rush",description:"Make a charge, if you connect cast a single target spell",rulesText:"Make a charge attack. If the attack deals damage you may cast a single target spell on the charge victim or a single target spell on yourself.",bpCost:40,affinityReq:"7R,7G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Assisted Escape",description:"Target an ally, they may move up to their movement speed.  After moving, apply temp hp.",rulesText:"Target ally may move up to their walking speed, after moving they gain 1 temp hp. half action.",bpCost:5,affinityReq:"2W,(3)",colorContributions:{w:2,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Avalanche of Blades",description:"Flurry of attacks until missing",rulesText:`(10) Make a melee attack, if this attack hits make another attack at a cumulative -4 penalty to all rolls against the same target, repeat.\r
__________________\r
Instead at a cumulative -3 penalty`,bpCost:[25,40],affinityReq:`16(W|R),(21)\r
24(W|R),(30`,colorContributions:{w:12,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Avatar of Might",description:"+n/+x trample",rulesText:"Up to cha friendly targets get +(cast stat/2) on all dicepools involving STR or BOD, +(cast stat /2) DV on weapon attacks that scale with STR, ignore enemies' full defense. For each subject this benefit expires at the end of their turn. Extra action (10)",bpCost:100,affinityReq:"24G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Balance the Scales",description:"Equalize wounds with ally",rulesText:"(Touch) Equalize wounds with one ally. If there are an odd number of physical and/or nonlethal wounds you choose who receives the odd numbered wound.",bpCost:10,affinityReq:"9(W|G),(18)",colorContributions:{w:6,u:0,b:0,r:0,g:6}},{category:"Maneuver",name:"Blade Barrier",description:"Produce a wall of blades that provide cover and harm those crossing it",rulesText:"Produce a contiguous wall of whirling blades and weapons that fills (AGI/2) 5ft cubes. Creatures that end the round inside or move into the wall are subject to a normal melee attack using the stats of a weapon you are currently wielding. The wall lasts until the end of your next turn. You may spend your Extra action to extend the duration of the wall until the end of your turn. You may only have one Blade Barrier active at a time. The Blade Barrier provides cover.",bpCost:20,affinityReq:"10W,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Blinding Bulwark",description:"Blocking enemies has a chance to blind them (REWORK PENDING)",rulesText:"Spend (5) on block to roll a CHA DV attack with spellcasting or weapon skill vs. attacker's mental resist. Target soaks with mental soak and is blinded for a number of rounds equal to the damage the attack would do.",bpCost:5,affinityReq:"7W,(9)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Blinding Strike",description:"Attack to blind a target",rulesText:`Make an attack with eDV = weapon DV\r
Phys res\r
Armor Soak \r
0: no effect\r
1: the next attack made against the target before the end of the next round benefits from advantageous ground\r
5: all attacks made against the target before the end of the next round benefit from superior ground\r
9+: the target is blinded until the end of the next round\r
\r
_____________\r
eDV = weapon DV + 2\r
_____________\r
eDV = weapon DV + 4`,bpCost:[5,15,25],affinityReq:`4W,(6)\r
12W,(15)\r
19W,(24)`,colorContributions:{w:2,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Blink",description:"Tactical Teleportation",rulesText:"Extra action, teleport up to your 30ft to a square within line of sight. The next use of this ability costs 10/1/0 more stamina. The stamina cost of this ability decreases by 1 at the end of the round.",bpCost:30,affinityReq:`7U,(15)\r
10U,(21)\r
13U,(27)`,colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Maneuver",name:"Blood for Blood",description:"Spend health to boost the damage of a successful hit",rulesText:"Nonaction. After hitting with a weapon attack you may spend 1 health to increase the (e)DV of the attack by 2. You may only do this once per attack.",bpCost:20,affinityReq:"9B,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Bloom Field",description:"Spawn and manipulate blooms for battlefield options",rulesText:`half action: Spawn (BOD) buds on the ground within 50ft in unoccupied spaces. Buds die if you go 100ft from them or one minute passes since a function of this ability is activated.\r
\r
Extra action: Command one or all buds (same command)\r
\r
- Spawn bramble patch: Creates 3 5ft boxes centered on the bud. The brambles are 5ft high and cost double movement for enemies. Allies move normally through the brambles. The brambles grant total cover. This causes the bud to expire.The brambles die when buds would die.\r
- Ensnare: Bud rolls attack (spellcasting or weapon skill) against enemy (dodge block parry), enemy soaks with physical soak and upon failure cannot move or make attacks of opportunity for eDV duration, or unitl they take a full action to free themselves. Buds use your weapon skill or spellcasting dicepool and have DV of 4+ STR. You can target the same creature with multiple buds, in which case the swarming rules apply (each bud past the first does not generate another attack, instead increasing the dicepool by +3)\r
- Teleport: Teleport to a spot adjacent to any bud, you may only do this starting from adjacent to a bud. This does not consume the bud.\r
\r
half action or (5): Create a bud on your location and teleport as above.`,bpCost:25,affinityReq:"9G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:12}},{category:"Maneuver",name:"Bola Arrow",description:"Grapple, trip, disarm with arrow",rulesText:`Grapple, trip, disarm with arrow as part of an attack, don't gain net hits on damage.\r
___________\r
Gain half net hits on damage\r
___________\r
Gain all net hits on damage`,bpCost:[10,20,30],affinityReq:`4G,(9)\r
9G,(18)\r
13G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Stance",name:"Bolstering Momentum",description:"After a successful attack, activate a buff as a Extra action.",rulesText:"If you successfully hit with a weapon attack this turn you may activate a single buff as a nonaction.",bpCost:15,affinityReq:"14(W|U|B),(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Breathstealing Blow",description:"forces save vs. silence",rulesText:`Make an attack with eDV = weapon DV -4\r
Phys res\r
Armor Soak \r
0: no effect\r
1: the target is silenced on its next turn\r
5: the target is silenced until the end of the round\r
9: the target is silenced until the end of the next round\r
\r
______\r
eDV = weapon DV -2\r
______\r
eDV = weapon DV`,bpCost:[10,20,30],affinityReq:`4W,(9)\r
9W,(18)\r
13W,(27)`,colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Burnout",description:"Roll an init die twice, lose access to that init die for the following round. 2 round cooldown.",rulesText:"Roll an init die twice, lose acces to that init die for the following round",bpCost:20,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Butterknifing",description:"Improved sunder",rulesText:`(5) as an additional cost on an attack against an inanimate or attended object. Treat the object's barrier rating as 5 lower.\r
____________________\r
(1) As an additional cost\r
____________________\r
(0) As an additional cost. This ability funcitonally becomes an optional passive.`,bpCost:[10,20,30],affinityReq:`4(R|G),(9)\r
9(R|G),(18)\r
13(R|G),(27)`,colorContributions:{w:0,u:0,b:0,r:3,g:3}},{category:"Maneuver",name:"Clarion Call",description:"Grant allies option to take extra action when downing an enemy",rulesText:`Nonaction after your attack renders an opponent unconscious\r
All allies within CHA*5 ft may spend (5) and make a single attack or move up to their speed, this movement does not count towards the round's max movement.`,bpCost:20,affinityReq:"16W,(21)",colorContributions:{w:12,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Commander's Strike",description:"Command an ally to attack",rulesText:"full Action: One ally within CHA*10 ft may make an attack.",bpCost:60,affinityReq:"5W,5R,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Contingency",description:"Invest luck into holding spell until chosen trigger",rulesText:"Spend 1 Luck, you cant regain this point of luck while you have an active contingency. Cast a spell to be your contingency, noting your current dicepool and other parameters, resisting drain when creating this contingency. Set a condition under which the contingency will trigger...",bpCost:30,affinityReq:"10U,(21)",colorContributions:{w:0,u:14,b:0,r:0,g:0}},{category:"Maneuver",name:"Counter Charge",description:"When an enemy is charging, you may charge to intercept.",rulesText:"(10) when an enemy makes a charge attack, charge the enemy during their movement, attack them, on hit also make an opposed STR check, on success the enemy stops moving and does not get to attack.",bpCost:5,affinityReq:"4W,(6)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Counterspell",description:"(10) as interrupt, attempt to counter a spell",rulesText:"(10) as interrupt, attempt to counter a spell. Roll Cast stat + spellcasting skill + other bonuses vs. the spellcaster's roll in place of a normal resistance check.",bpCost:5,affinityReq:"7U,(9)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Maneuver",name:"Cratering Charge",description:"AoE impact on a charge",rulesText:`(5) in addition to your charge, make a secondary melee attack at STR+2 DV against all adjacent targets, full dice pool vs. each target.\r
___________________\r
STR + 4 DV\r
___________________\r
STR + 6 DV`,bpCost:[10,20,30],affinityReq:`7(R|G),(9)\r
14(R|G),(18)\r
20(R|G),(27)`,colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Maneuver",name:"Crushing Descent",description:"Bonus for attacks made while falling",rulesText:"Make a melee attack while falling or diving. Gain.+1 die per 10 fallen as part of the action. Capped at your BOD",bpCost:20,affinityReq:"6(W|G),(12)",colorContributions:{w:8,u:0,b:0,r:8,g:0}},{category:"Maneuver",name:"Dancing Weapon",description:"enchant a weapon to float and attack enemies",rulesText:"half action, or (5) after attacking with a melee weapon. Release one held melee weapon and choose an enemy, the weapon pursues and attacks that enemy until the end of the round. The weapon acts on your turn, has a fly speed of 30' with perfect maneuverability, uses your weapon skill for its attacks (benefits from tradition match but not your agility), and deals damage as if you were wielding it. At the end of the round the weapon moves 30' towards you, dropping where it ends its movement if you do not have an open hand to grab it as a nonaction, or if it fails to reach you.",bpCost:40,affinityReq:"12W,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Deflecting Dodge",description:"Redirect attack that missed you to adjacent valid target.",rulesText:`Spend (5) to redirect an attack that you succesfully dodged to an adjacent valid target. The new target must resist the original attack roll, damage value and any other related effects.\r
______\r
Spend (1)`,bpCost:[5,15],affinityReq:`4R,(9)\r
9R,(18)`,colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"Desert Tempest",description:"Twirl around the battlefield slicing foes as you move",rulesText:`(10) As part of this manuever move up to your speed. You may make a single melee attack against each enemy you become adjacent to; you may not attack the same foe more than once during this manuever.\r
_________\r
(5)`,bpCost:[20,40],affinityReq:`16(W|R),(21)\r
24(W|R),(30)`,colorContributions:{w:14,u:0,b:0,r:14,g:0}},{category:"Maneuver",name:"Desperate Gambit",description:"take off turn action as if previously readied",rulesText:`(20) perform an action as an interrupt as if it were readied.\r
_______________________\r
(15)`,bpCost:[20,40],affinityReq:`14R,(18)\r
20R,(27)`,colorContributions:{w:0,u:0,b:0,r:12,g:0}},{category:"Maneuver",name:"Devour Essence",description:"Absorb some energy from a dying / recently slain foe",rulesText:"full action, touch, targets a dead or dying creature. A dying creature rolls BOD vs. WIL to resist, failure or tie results in its death. This maneuver automatically succeeds against a target that has been dead for up to (YOUR BOD) rounds, on more rounds than that no effect. Heal 1 stamina, if at full stamina heal 1 health, if at full health and stamina, gain 1 temporary point of health/stam that is lost first. This point lasts for (Creature's BOD) hours.",bpCost:10,affinityReq:"2B,2(B|G),(9)",colorContributions:{w:0,u:0,b:3,r:0,g:3}},{category:"Maneuver",name:"Discorporation",description:"Avert death, reform later",rulesText:"Spend all your LUK when you would die. If your spent LUK exceeds the damage you died by you discorporate and return next (time of day) at full health at a nearby safe location.",bpCost:20,affinityReq:"7B,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Disperse into Mist",description:"Disperse into mist in response to taking a blow",rulesText:"Spend (10) as a nonaction after taking damage from an attack. You disperse into mist and are untargetable until the start of your next turn, or the start of the next round (your choice). While dispersed you cannot take actions or affect other creatures, objects, or terrain (you may still move).",bpCost:30,affinityReq:"5G,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Distant Echoes",description:"Launch projectile, sense general surroundings near projectile",rulesText:`Extra action - you gain blindsense 10ft around the impact point of the projectile until the end of the turn\r
half action - until the end of next round.\r
____________\r
Extra action - until end of round\r
half action - until end of next round`,bpCost:[15,25],affinityReq:`6(W|G),(12)\r
10(W|G),(21)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Divert Attention",description:"half action: roll to stealth as if you had moved",rulesText:`half action: you may roll to stealth as if you had moved. This ability does not fulfill any other conditions required for stealthing.\r
_______________\r
extra action`,bpCost:[10,60],affinityReq:`3G,(12)\r
7G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Drink Their Tears",description:"Gain bonus for enemies that have recently taken damage",rulesText:`half action\r
Gain +1 dice to attack actions for each enemy in LoS that has taken damage in the past round. This lasts until the end of the next round.`,bpCost:5,affinityReq:"2R,2G,(6)",colorContributions:{w:0,u:0,b:0,r:4,g:4}},{category:"Maneuver",name:"Elemental Discharge",description:"Discharge weapon buff, boost power of one attack",rulesText:"Discharge a weapon buff as part of an attack action with one or more weapons. All attacks made during this attack action retain the elemental damage type of the discharged buff , have +1DV, and strike adjacent targets at -5 DV. (full action)",bpCost:25,affinityReq:"WUBRG,(18)",colorContributions:{w:12,u:12,b:12,r:12,g:12}},{category:"Maneuver",name:"Emit Shockwave",description:"Close range conal AoE with melee weapon",rulesText:"Complex action. Make a conal AoE ranged attack with a melee weapon (cone radius = 2x reach with that weapon) at -3 DV. This attack is resisted with Dodge/Physical soak.",bpCost:5,affinityReq:"12G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"ethereal Spinerak",description:"half Action. Until end of encounter, an ally gains the power to fight ethereal andincoporeal creatures.  you may use this maneuver as an interrupt (5); if you do so, you cannot use this ability again for 24-3*WIL hours. (deprecated, very conditional and weird format)",rulesText:"half Action. Until end of encounter, an ally gains the power to fight ethereal, incoporeal,  creatures.  You may use this maneuver as an interrupt (5). Once you trigger this ability it cannot be used again for 24-3*WIL hours.",bpCost:10,affinityReq:"6G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:8}},{category:"Maneuver",name:"Exposing Smite",description:"Leave a target more vulnerable to radiant damage",rulesText:"(5) Make an attack. If the target fails to fully soak this attack it gains (CAST STAT/2) vulnerability to radiant damage until the end of your next turn.",bpCost:10,affinityReq:"3W,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Fade Strike",description:"Make an attack, move after the attack",rulesText:"Make an attack at -3 DV. Shift up to half your speed after the attack.",bpCost:5,affinityReq:"3U,(12)",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Maneuver",name:"Feigned opening",description:"Fake an opening, focusing your reactions upon the riposte to come",rulesText:"As a Extra action you may start to feign an opening. While you are feigning you do not roll your REACTION for passive defense, dodge or block. Add REACTION to all riposte rolls when feigning.",bpCost:30,affinityReq:"9W,(12)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Feint",description:"(5) attack, special roll w/ various other contributing skills, if successful + NET HITS to next attack against target",rulesText:"Make an attack as a half action against a target that is perceiving you and add your legerdemain skill to the dice pool. This attack does no damage if successful. Instead, add your net hits (up to AGI) to the dice pool of the next attack you make against the same target before the end of your next turn.",bpCost:5,affinityReq:"4(W|U),(6)",colorContributions:{w:4,u:4,b:0,r:0,g:0}},{category:"Maneuver",name:"Fiery Rebirth",description:"Rise empowered after dying",rulesText:"On death, spend all your LUCK. You rise on the start of the next round, healing each of stam/drain/health up to 2x(spent LUCK) if they were below it. For the next 10 rounds you gain 1 temp hp at the start of each round, you have a fly speed equal to your movement speed, you have (CHA*5/2) radius fire damage aura that enemies must soak your (CAST STAT*2) in fire damage at the end  of round. You may do fire damage with your attacks rather than the normal damage type if desired. Lastly, you also have weakness to cold 3 for the duration.",bpCost:40,affinityReq:"19R,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Fight me",description:"Allow your actions to provoke from target opponent, they provoke if they attack you, otherwise get a free intimidate vs. them",rulesText:"Extra action: Target opponent within your reach whose reach you are within. you provoke an opportunity attack from the target. If they make the attack they provoke an opportunity attack from you. If they choose not to make the attack (lacking initiative or otherwise being unable to take such an action, being unaware of you etc doesn't count) you make an intimidate check against them as a nonaction.",bpCost:5,affinityReq:"7G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Maneuver",name:"FIRE EVERYTHING",description:"FIRE EVERYTHING",rulesText:"Spend all your initiative. At the end of the round regain as much initiative as you spent on this ability. All initiative costs are reduced by (2) (including starting a turn) until the end of the round. You may activate this ability at any time as a nonaction, but only once per round.",bpCost:50,affinityReq:"24R,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"First Strike",description:"Attack an enemy that enters your reach",rulesText:"Spend (10)/(5)/(1) when an enemy enters your reach. Make an attack against then.",bpCost:[10,15,20],affinityReq:`4W,(9)\r
9W,(18)\r
13W,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Foil",description:"Spend (10) or 1L in melee, if enemy cannot pay (10) init they lose the action they were attempting.",rulesText:"Spend (10) or 1L in melee, if enemy cannot pay (5) init they lose the action they were attempting. (needs balancing)",bpCost:40,affinityReq:"10U,(21)",colorContributions:{w:0,u:8,b:0,r:0,g:0}},{category:"Maneuver",name:"Folded Time",description:"2L, pull yourself from the future for 1 round, next round disappear as you are pulled back for a round.",rulesText:"2L, pull yourself from the future for 1 round, next round disappear as you are pulled back for a round.",bpCost:100,affinityReq:"24U,(30)",colorContributions:{w:0,u:20,b:0,r:0,g:0}},{category:"Maneuver",name:"For the Greater Good",description:"Willing allies may take damage to heal the aura user",rulesText:"Extra Action, target willing ally within the aura loses 1 HP or 2 Stam and you gain 1HP or 2 Stam.",bpCost:20,affinityReq:"4B,(9)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Maneuver",name:"Force an opening",description:"pay (5) on top of your attack, full defense does not apply vs. this attack, enemies may spend (5) to prevent this for themselves",rulesText:"(5) the next attack you make ignores an opponent's Full Defense. enemies may spend (5) to negate this per use.",bpCost:5,affinityReq:"14(W|R),(18)",colorContributions:{w:6,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Frenetic Boost",description:"Coinflip init boost",rulesText:"Flip a coin before rolling initiative. If heads, gain +1 init die this round. If tails, -1 init die this round.",bpCost:5,affinityReq:"6U,6R,(15)",colorContributions:{w:0,u:5,b:0,r:5,g:0}},{category:"Maneuver",name:"Get Over Here",description:"Pull an enemy towards you",rulesText:"Make a melee atttack with 30ft reach at -3 DV. On a successful damage the target is also pulled to an adjacent square by the shortest direct path possible.",bpCost:10,affinityReq:"6B,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Go Home You're Dunked",description:"Make an attack that bypasses armor and knocks wearied foes unconscious.",rulesText:"full action. Make a weapon attack at  eDV = weapon DV - 5. Target soaks with physical soak. If the target is missing half or more of their stamina and they fail to fully soak this attack then this maneuver instead deals stamina damage sufficient to knock the target unconscious.",bpCost:15,affinityReq:"7W,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Goad",description:"Extra action: Target opponent within your reach whose reach you are within. The next action they take this turn that does not include you as a target provokes an opportunity attack from you. If you attack them, you provoke an opportunity attack from them. If they choose not to make the attack (lacking initiative or otherwise being unable to take such an action, being unaware of you etc doesn't count) you make an intimidate check against them as a nonaction.",rulesText:"Extra action: Target opponent within your reach whose reach you are within. The next action they take this turn that does not include you as a target provokes an opportunity attack from you. If you attack them, you provoke an opportunity attack from them. If they choose not to make the attack (lacking initiative or otherwise being unable to take such an action, being unaware of you etc doesn't count) you make an intimidate check against them as a nonaction.",bpCost:5,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:2,g:0}},{category:"Maneuver",name:"Gouge",description:"Attack that triggers a bleed that hurts on taking actions",rulesText:"Make an attack at eDV = weapon DV. This attack is soaked by physical soak. The target bleeds for unsoaked eDV/2 rounds. While bleeding the target takes 2 health damage if they take a move or half action, 4 if they take a full action. Magical healing or a medicine check vs. the remaining turns removes the bleed.",bpCost:15,affinityReq:"9B,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Grand Bend",description:"Line attack AoE shot",rulesText:"Make a line attack (AoE) with your ranged weapon at -6 dicepool out to the end of your weapon's short range. Take Aim bonuses are doubled for this attack.",bpCost:5,affinityReq:"7(R|G),(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Ground shifting leap",description:"Leap to a target, cratering the earth in an aoe around",rulesText:`As a full action make a jump, this is treated as a running jump even if you started from a standstill. Upon landing make a Strongman check against the ground.\r
if you surpass its barrier rating you break through and create a HITS/4 *5ft radius hole centered on you, otherwise nothing happens.\r
Malleable surface: if you fail to surpass the barrier rating (possibly due to the dirt ground being arbitrarily impassable vs. basic attacks for instance) you create a HITS/2 *5ft radius dent that is treated as difficult terrain and force all creatures in the area to make Gymnastics checks against half your STR check or fall prone.`,bpCost:5,affinityReq:"4R,(9)",colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"Guardbreak",description:"Attack with a bonus vs. guarding targets",rulesText:"Make an attack at -1DV. Gain +2 automatic hits if the target actively blocks this attack.",bpCost:20,affinityReq:"9R,(18)",colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"Guide Fate",description:"Spend (5) to let an adjacent ally explode dice or reroll",rulesText:"You have one fate reroll that you may trigger for an ally for (5) that functions the same a a reroll generated from spending luck. Whenever you would regain a point of luck, this fate reroll refreshes.",bpCost:15,affinityReq:"16R,(21)",colorContributions:{w:6,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Headsman",description:"Attacking technique vs. prone targets. Bonus damage",rulesText:"(5) Make an attack with a melee weapon against a prone target. The dice rolled for this attack explode and the attack has +2 DV.",bpCost:20,affinityReq:"4B,(15)",colorContributions:{w:0,u:0,b:10,r:0,g:0}},{category:"Maneuver",name:"Herding assault",description:"Hit does reduced damage, force move your target NET HITS",rulesText:"Make an attack, net hits do not contribute to damage. This attack is soaked with physical soak. move your target NET HITS if the attack hits.",bpCost:5,affinityReq:"4(U|G),(6)",colorContributions:{w:0,u:2,b:0,r:0,g:2}},{category:"Maneuver",name:"Hit the Deck",description:"Drop prone, reroll defense vs indirect AoE",rulesText:"(5)You drop prone. Reroll a defense roll you just made against an indirect area attack,",bpCost:5,affinityReq:"WUBRG,(6)",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Maneuver",name:"Iceblock",description:"Immobilize yourself in protective ice",rulesText:`(10) Immobilize yourself in a block of ice as an interrupt. The ice has (CAST STAT*2) health and uses your soak pool. The ice disperses when its health reaches zero or you spend a full action to dismiss it. Excess damage beyond the ice's health is dealt to you as normal.\r
\r
While in the ice block you get 0 hits on dodge rolls and cannot take any physical actions.`,bpCost:20,affinityReq:"10U,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Inspire Perserverance",description:"Give one/some allies an extra roll to end ongoing effects",rulesText:`1: full action, one ally within 30ft may reduce the magnitude of one standard ongoing negative effect by one stage. If the effect has no stages reduce the duration by one round. If the effect is a DoT with no duration reduce the intensity by 4.\r
2: As 1, except as a half action\r
3: As 2, except 2 stages / 2 rounds / intensity by 8. Also; full action,applies to up to CHA allies within ring.`,bpCost:10,affinityReq:"6W,(12)",colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Last Ditch Evasion",description:"Dodge an attack at all costs",rulesText:"Trigger this ability as an interrupt at any time during the resolution of an attack you rolled dodge against, but before damage or other consequences have been applied. (Note: you may trigger this ability after you have rolled soak and know the resulting applied DV, but no later). You are treated as having fully dodged the attack. You may not benefit from active defenses until the end of your next turn. You may take no actions until the end of your next turn.",bpCost:10,affinityReq:"3R,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Leaping Flame",description:"Poof, gone in thin air like a magic trick",rulesText:`Trigger: a creature you are aware of within (twice your speed) resolves an attack against you.\r
(5) Teleport to a location adjacent to the triggering enemy.`,bpCost:10,affinityReq:"4W,4R,(12)",colorContributions:{w:4,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"Lend a Distraction",description:"(5) ally's next action doesn't provoke",rulesText:"(5) to assist an ally with a Con check, producing a distraction for stealth purposes (hits as a penalty to opponent's dicepool), preventing distracted target from being able to take attacks of opportunity...",bpCost:5,affinityReq:"7(W|R),(9)",colorContributions:{w:6,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Looming Strike",description:"Enemy takes damage if it moves after being hit",rulesText:`Make an attack. Net hits do not contribute to damage. When the enemy moves before the start of your next turn it must soak the modified DV including the net hits.\r
_______\r
The enemy must soak the modified DV each time it moves.`,bpCost:15,affinityReq:`6R,6(B|R),(15)\r
9R,9(B|R),(24)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Lunge",description:"Attacking technique with extra range and added movement. Bonus damage, cannot attempt active defense until start of next turn.",rulesText:"At the start of a lunge you may move up to two squares in a straight line, this movement does not provoke attacks of opportunity. You are treated as charging for this attack (+2 dicepool). After attempting a lunge you may not attempt any active defense until the start of your next turn.",bpCost:5,affinityReq:"4(B|R),(6)",colorContributions:{w:0,u:0,b:4,r:4,g:0}},{category:"Maneuver",name:"Make Time for That",description:"Spend 1 luck, gain 10 init, spend this only on red abilities",rulesText:"Spend 1 luck, gain 10 init, spend this only on red abilities. Nonaction",bpCost:5,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Manacleave",description:"Attack removes buff(s)",rulesText:`Make an attack at -3 DV. Target soaks with mental soak. If damage is dealt one of the target's buffs (chosen randomly) ends. \r
___________________________\r
Half net hits buffs are removed\r
___________________________\r
Net hits buffs are removed`,bpCost:[5,10,15],affinityReq:"7W,(9) per",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Mirrored Edge",description:"Consecutive attacks generate additional attacks",rulesText:"Make an attack with your weapon(s). Then make another attack for each consecutive turn beyond the first you have used this maneuver this round. (ex: third turn in a row, make three attacks).",bpCost:40,affinityReq:"15R,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Mitigate Suffering",description:"Grant ally damage threshold or reduce damage they take.",rulesText:`(1) as an interrupt: Increase an ally's damage threshold by 4 until the end of this turn.\r
1L as an interrupt: Halve the damage an ally takes from an attack. \r
\r
You may trigger any parts of this ability during damage calculation.`,bpCost:30,affinityReq:"12W,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"My body as a shield",description:"(5) take a hit meant for an adjacent ally",rulesText:"(5) When an adjacent ally would next be hit by an attack you are hit by that attack instead.",bpCost:5,affinityReq:"4W,(6)",colorContributions:{w:2,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Necropotence",description:"spend life, boost init",rulesText:"Spend X life and X Drain when rolling initiative, you may reroll all dice of X or lower. Additionally you may pay 4 life and 2 Drain per (5) of the init cost of an action you otherwise do not have initiative for.",bpCost:30,affinityReq:"14B,(18)",colorContributions:{w:0,u:0,b:12,r:0,g:0}},{category:"Maneuver",name:"Nightmare Blade",description:"Stab them in the MIND",rulesText:"Make a melee attack at -6DV, the target resists with mental save instead of dodge/block/parry. Soaked with mental soak.",bpCost:40,affinityReq:"10B,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Ninjutsu Decoy",description:"Set up a decoy at your position, turn invisible",rulesText:"full action,make a stealth roll and leave behind a convincing decoy. Decoy fades after sustaining one hit. Enemies may see through the decoy with an (OPPOSED CHECK). (COOLDOWN)",bpCost:30,affinityReq:"9(U|B),(18)",colorContributions:{w:0,u:6,b:6,r:0,g:0}},{category:"Maneuver",name:"Noncommital Blow",description:"if this attack misses, regain a half action",rulesText:"Make an attack, if it misses you regain a half action.",bpCost:20,affinityReq:"12W,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Overreaching Parry",description:"Parry an attack targeting an ally within reach",rulesText:"(5), roll parry for an attack targeting an ally who is within your reach. The ally uses the larger of your parry roll or their own defensive roll.",bpCost:10,affinityReq:"7W,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Painful Precision",description:"Take 3 unresisted lethal damage to add one free hit to a roll",rulesText:"Take 3 unresisted lethal damage to add one free hit to a roll, before dice are rolled.",bpCost:15,affinityReq:"14B,(18)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Maneuver",name:"Phasing",description:"Pass through walls of varying thickness",rulesText:`As a half action you may fully pass through thin materials and structures up to a few inches thick. Lead and other specific materials cannot be so bypassed. This increases the cost of subsequent phasings by 10 stamina, this cost decays by 1 at the end of each round down to a minimum of 0.\r
_____________________________________\r
As previous rank, except you may pass through up to a foot in thickness. Cost increase is 8 instead of 10\r
_____________________________________\r
As previous rank, except you may pass through up to 10'. Cost increase is 6 instead of 8\r
_____________________________________\r
As previous rank, except the cost increase is 4 instead of 6.\r
\r
\r
With all ranks, if you fail to fully traverse when phasing you are shunted back out to where you started, taking 2 lethal per foot of distance so displaced (rounded up).`,bpCost:[20,25,30,35],affinityReq:`6U,(12)\r
9U,(18)\r
12U,(24)\r
15U,(30)`,colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Maneuver",name:"Pile On",description:"Trigger: an ally sucessfully attacks an enemy you may spend (5) to make an attack on that enemy",rulesText:"Trigger: an ally sucessfully attacks an enemy you may spend (5) to make an attack on that enemy",bpCost:50,affinityReq:"8W,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Pinning Strike",description:"Pin target to nearby surface, harder to remove the larger the weapon is.",rulesText:`Make a weapon attack, net hits do not contribute to damage. If it hits the enemy is rooted to a nearby surface. Removing the pin takes a full action.\r
_____________________________________\r
As previous rank, except the target takes the intiial damage again on escaping.\r
_____________________________________\r
As previous rank, except you may target multiple adjacent enemies, Impaling them together instead of to a surface. Each victim of the pin must escape separately, their success does not affect the other victims.`,bpCost:[5,10,10],affinityReq:"4(R|B),(6) per",colorContributions:{w:0,u:0,b:4,r:4,g:0}},{category:"Maneuver",name:"Prescient Teleport",description:"Teleport anytime you damn well please",rulesText:"(5) as a nonaction at any time. Resolve one of your teleportation abilities.",bpCost:40,affinityReq:"19U,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Pro X",description:"Grant (+dice) protection from color",rulesText:"Grant (+RANK) protection from color. Color selection is locked upon purchase of this ability. This benefit lasts for one minute or until you conffer Pro X on another target. half Action",bpCost:10,affinityReq:"4W,(6) per",colorContributions:{w:3,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Rain of Arrows",description:"You can attack an area with arrows",rulesText:"You can target up to AGI continguous squares with simultaneous ranged attacks, roll one attack roll at -6 dicepool and apply it to each target.",bpCost:10,affinityReq:"7G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Maneuver",name:"Rain of Steel",description:"Spend extra initiative, become a maelstrom of weaponry for one round",rulesText:"full action. (5) All enemies within reach are subject to a melee attack from you at -5 dicepool. All enemies treat the area covered by your reach as difficult terrain. All enemies outside your reach that enter while Rain of Steel continues are subject to a single attack at -5. You are treated as on full parry while Rain of Steel persists. Rain of steel lasts until the end of the round.",bpCost:30,affinityReq:"6W,8(W|R|G),(18)",colorContributions:{w:8,u:0,b:0,r:8,g:8}},{category:"Maneuver",name:"Reactive Block",description:"You may attempt a free block against enemies you have attacked in melee previously this round",rulesText:"Once per round you may attempt a block at (0) against an enemy you have attacked this round.",bpCost:15,affinityReq:"4W,(9)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Rebirth",description:"Touched willing creature is encapsulated in a protective cocoon to prepare for administering amplified healing spells.",rulesText:`Touched willing creature is encapsulated in a protective cocoon. They can only be targeted by healing effects through the cocoon for the duration, which are at double efficiency. This maneuver may be triggered for a nonaction as part of administering a healing effect.\r
When inside the cocoon the creature is unconscious, unaware of its surroundings or the passage of time.\r
\r
Cocoon duration: 1 minute\r
Cocoon barrier rating: 10\r
Cocoon Health: 2x CHA`,bpCost:10,affinityReq:"14(W|G),(27)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Reckless Swing",description:"Take dice pool penalty to improve damage, or shave off enemy's dodge pool",rulesText:"For every -2 penalty you take when attacking with this maneuver add +1 to the damage value of the attack, up to +AGI",bpCost:15,affinityReq:"9(B|R),(12)",colorContributions:{w:0,u:0,b:6,r:6,g:0}},{category:"Maneuver",name:"Red Rover",description:"Group charge",rulesText:"Make a charging attack. Allies can spend (10) to also make a charging attack as an interrupt. If you spend (10) the cost for allies joining the charge becomes (5). Resolve all attacks after you and all allies have moved.",bpCost:30,affinityReq:"4W,4R,(12)",colorContributions:{w:4,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"Redirect",description:"Spend (5) after counterspelling to redirect spell",rulesText:"Spend (5) after counterspelling to redirect spell",bpCost:5,affinityReq:"8U/R,(12)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Maneuver",name:"Redirecting parry",description:"cause enemy to hit themselves with their weapon on a successful parry",rulesText:"(5) as part of attempting a parry. If your parry is successful the attacker must soak the unmodified DV of their weapon.",bpCost:5,affinityReq:"2W,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Restorative Strike",description:"attack generates temp hp",rulesText:`Make an attack with your weapon, net hits do not contribute to damage. Generate\r
1 / half net hits / net hits temp hp.`,bpCost:[5,10,15],affinityReq:`4W,(9)\r
7W,(15)\r
10W,(21)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Retalliatory Strike",description:"Retalliate when struck in melee",rulesText:"(5) when hit, you may make an attack against the opponent that struck you in melee.",bpCost:15,affinityReq:"7(W|B),(9)",colorContributions:{w:6,u:0,b:6,r:0,g:0}},{category:"Maneuver",name:"Revivify",description:"Spend luck, restore a recently deceased creature to life.",rulesText:"Spend (2L), heal an ally for CAST STAT*2 without inflicting healing drain. This effect can be used on creatures that have died within the past round, returning them to life if the healing is sufficient to remove excess overflow. This effect requires you to be touching the target.",bpCost:20,affinityReq:"9W,(18)",colorContributions:{w:12,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Second Chance",description:"Spend luck points, rewind turn",rulesText:"Spend 3L as an interrupt. Rewind your turn.",bpCost:20,affinityReq:"3(U|R),(18)",colorContributions:{w:0,u:12,b:0,r:12,g:0}},{category:"Maneuver",name:"Second Wind",description:"Generate temp hp",rulesText:"half action. Roll BOD + WIL. For every hit you gain 1 temp hp.",bpCost:5,affinityReq:"4(W|G),(6)",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Maneuver",name:"Shield Counter",description:"When an enemy strikes, bash him in the face first",rulesText:"(5) when wielding a shield and an enemy in melee range is making an attack. Make an attack targeting that enemy, using your shield. The damage from the attack is the Target Number for the physical resist roll the enemy must make. If they fail the physical resist check their attack resolves as a miss.",bpCost:20,affinityReq:"7W,(9)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Shifting Synapse",description:"You may use your physical resist in place of your mental resist at a cost",rulesText:"You may spend an additional (5) when rolling mental resistance to use your physical resistance instead.",bpCost:30,affinityReq:"8U,8G,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Shunt the Sustained",description:"Move a sustained area effect",rulesText:"As a complex action you may relocate a sustained spell",bpCost:5,affinityReq:"12U,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Smite",description:"Your next successful attack is more damaging.",rulesText:"Extra action, triggering this ability costs 1 drain. Your next successful attack before the end of the round has +4 DV.",bpCost:10,affinityReq:"6(W|R|G),(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Smothering Grapple",description:"Grapple vs. phys res",rulesText:`Make a melee attack roll to grapple. \r
Resist: Physical res\r
Soak: Physical soak\r
eDV = STR\r
1+ unsoaked eDV yields grapple`,bpCost:15,affinityReq:"2R,2G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spatial Slip",description:"boost dodge, teleport after dodge roll",rulesText:"spend an additional (5) as part of a dodge. Gain +5 dice, after resolving the dodge you may trigger one of your Extra action teleportation abilities as a nonaction.",bpCost:10,affinityReq:"9U,(18)",colorContributions:{w:0,u:12,b:0,r:0,g:0}},{category:"Maneuver",name:"Spell Reflection",description:"Spend (5?10?) when successfully resisting a spell to redirect it",rulesText:"Spend (5) when you successfully resist a direct spell to choose a new target for the spell, resolving it as if cast by the original caster.",bpCost:10,affinityReq:"9(U|R),(12)",colorContributions:{w:0,u:8,b:0,r:8,g:0}},{category:"Maneuver",name:"Spellshank",description:"Deal reduced damage, possibly steal and cast spell target recently cast",rulesText:`Make an attack at -3DV\r
If the attack deals damage you gain knowledge of all spells the target has cast in the past minute. Choose one of those spells. For the next minute you may cast that spell one time as if you knew it. You may only have one spell chosen by this ability at a time. The action for casting the spell is reduced by one step:\r
half action -> nonaction\r
full action -> half action\r
multi turn action -> turn count decreases by 1`,bpCost:20,affinityReq:"8U,8B,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spellstrike",description:"spellcasting for weapon skill",rulesText:"Nonaction. Pay 1 drain. You may use spellcasting in place of weapon skill for a single weapon attack",bpCost:5,affinityReq:"6G,6W,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spiritual Bastion",description:"Place a rune circle on the ground, you and allies standing within it gain benefits.",rulesText:`Spend 1 Drain or 10 minutes. Place down a 15ft diameter rune circle. You and allies within gain (CHA/2) dice to all defenses while within the circle. Additionally, effects of mind affecting abilities are suppressed for you and allies within the circle. Extraplanar/some supernatural creatures (as defined by GM) cannot breach the circle.\r
\r
A creature standing within the circle can spend a half action that provokes opportunity attacks to scuff the circle. A circle that has been scuffed 3 times is destroyed. Additionally a circle fails after 24 hours, or if you spend more than an hour outside of it.`,bpCost:10,affinityReq:"8W,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spread shot",description:"You may attack multiple opponents as part of a single ranged attack",rulesText:"Make a ranged attack against however many targets you choose in a 90 degree cone within your first range increment, splitting your dicepool among all targets.",bpCost:5,affinityReq:"2(R|G),(6)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spring up",description:"Stand up as Extra action",rulesText:"Stand up as Extra action that does not provoke attacks of opportunity. All your jumps are treated as having a running start.",bpCost:4,affinityReq:"2(R|G),(3)",colorContributions:{w:0,u:0,b:0,r:2,g:2}},{category:"Maneuver",name:"Stalwart Vanguard",description:"You always go last during an initiative pass, gain (armor?)",rulesText:"You may opt to act last in an initiative pass before initiative is rolled. If multiple creatures would act last, tiebreak as usual with actual initiative rolls, then REA and finally LUK. Gain +1 armor soak per rank until the start of the next initiative pass.",bpCost:30,affinityReq:`4G,(6)\r
9G,(12)\r
14G,(18)\r
19G,(24)\r
24G,(30)`,colorContributions:{w:2,u:0,b:0,r:0,g:2}},{category:"Maneuver",name:"Stay death",description:"Target ally (gains + on atk and ignores one lethal blow) until next initiative roll.",rulesText:`full action. One ally within (CHA*10 ft) gains 1 die on all attack rolls for 10 rounds. If an attack would reduce the subject to or below 0 hp, they are instead reduced to 1 hp (a subject that would be reduced to -4x BOD dies instantly and is not saved by this ability), if this occurs the die bonus ends. \r
1L Trigger this ability as an interrupt.\r
These benefits last until the next initiative roll.`,bpCost:10,affinityReq:"7(W|B),(15)",colorContributions:{w:8,u:0,b:8,r:0,g:0}},{category:"Maneuver",name:"Stun Punch",description:"Make a melee attack, stun chance. Can be used in grapple.",rulesText:`phys soak\r
0: no stun\r
1: target can either move or take other actions on its next turn, not both\r
9: target loses its next turn\r
15+: target is stunned until the end of its next turn`,bpCost:15,affinityReq:"10W,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Sunflask",description:"Prepare (number) heals at dawn, heals WHITE characters for more",rulesText:"Prepare (WIL) flasks at dawn. A character who consumes a flask rolls 4xBOD (or the creator of the sunflask rolls first aid) and heals up to that many hits, taking drain as normal for magical healing. You gain +4 to the check if the recipient is a WHITE character.",bpCost:10,affinityReq:"4W,(9)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Surge of Finality",description:"Make an attack when you would be knocked unconscious, if you kill the target that is knocking you unconscious negate the attack",rulesText:"1L as an interrupt when you would be knocked unconscious. Make an attack against the enemy that would be knocking you unconscious. Wound penalties are doubled and become a bonus on this attack. If your attack knocks the enemy unconscious undo the damage their attack did to you.",bpCost:10,affinityReq:"12W,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Surge of Resilience",description:"IRON HEART SURGE THE SUN",rulesText:"(5) or Extra action, make another roll against a debilitating condition (i.e. stun) as if you were resisting it the first time. Success removes the condition.",bpCost:15,affinityReq:"4(W|G),(9)",colorContributions:{w:8,u:0,b:0,r:0,g:8}},{category:"Maneuver",name:"Tactical Surge",description:"1L, use a white maneuver immediately as though it was an interrupt.",rulesText:"1L, use a white maneuver immediately as though it was an interrupt.",bpCost:10,affinityReq:"9W,(12)",colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Temporal Extortion",description:"Spend life, take your next turn",rulesText:"Spend 4 life during your turn (nonaction), you act again after the end of this turn if you have the initiative to do so",bpCost:15,affinityReq:"12B,(15)",colorContributions:{w:0,u:0,b:10,r:0,g:0}},{category:"Maneuver",name:"Thunderous Impact",description:`Can attack multiple opponents at range with thrown heavy weapon. AOE = STR + (3 if weapon is 2h) + rank\r
Targeted area becomes difficult terrain if damage threshold is met. (Damage value + rank  threshold)`,rulesText:`(5) Can attack multiple opponents at range with thrown heavy weapon. AOE = (STR + (3 if weapon is 2h) + rank) ft\r
Targeted area becomes difficult terrain if damage threshold is met. (Damage value + rank  threshold)`,bpCost:10,affinityReq:"7(R|G),(15)",colorContributions:{w:0,u:0,b:0,r:10,g:10}},{category:"Maneuver",name:"Time Dilation",description:"boost later init",rulesText:"Next round, maximize all your initiative dice. You can spend 1 luck point to trigger this ability as an interrupt in response to the start of a round (before initiative is rolled).",bpCost:60,affinityReq:"12U,(24)",colorContributions:{w:0,u:20,b:0,r:0,g:0}},{category:"Maneuver",name:"Toss",description:"toss creature, deal damage or enable ally to make attack",rulesText:`1. You must have an enemy grappled or a willing adjacent ally\r
2. Make a ranged attack with 1(ranges)\r
3. If enemy, base damage = (?body). If ally, your net hits contribute to the dice pool on their attack`,bpCost:5,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Maneuver",name:"Trick shot",description:"Not bending bullets, but you can shoot around corners n such",rulesText:"At one point during the trajectory of your projectile you may have it take up to one 90 turn.",bpCost:5,affinityReq:"7(R|G),(9)",colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Maneuver",name:"Triumphant Shout",description:"Mass intimidate on knockout/kill",rulesText:`(5) as a nonaction after your attack renders a creature dead or disabled. You may attempt an intimidation check against all opponents that can see both you and the aforementioned victim.\r
_______________\r
This maneuver only costs (1)`,bpCost:[5,10],affinityReq:`7(R|G),(9)\r
14(R|G),(18)`,colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Maneuver",name:"Twin Strike",description:"Hit simultaneously with two weapons",rulesText:`(10) Make two attacks at full dice pool against single target. On one hit apply damage as normal. On two hits apply half the net hits of the lower net hit roll to the higher roll and apply that as damage..\r
__________________\r
This maneuver only costs (5)`,bpCost:[20,40],affinityReq:`12(W|R),(15)\r
19(W|R),(24)`,colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Maneuver",name:"Twist the Blade",description:"Followup attack if you strike an enemy that was not actively defending.",rulesText:"Trigger: an enemy takes damage from your light weapon melee attack and was not actively defending. Spend (5) as a nonaction. Make another attack with the same weapon at half base DV, this attack cannot be actively defended against, this attack has 50% armor penetration.",bpCost:20,affinityReq:"7B,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Unsettle",description:"Startle an enemy out of their action, but they act swiftly afterwards",rulesText:"half action. Target an enemy. The next half or full action they attempt before your next turn triggers an attack from you. This attack does no damage on a successful hit, instead negating their action. On their next turn the enemy gains 10 initiative (regardless of hit or miss).",bpCost:15,affinityReq:"7(B|G),(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Vanguard Strike",description:"You lead the attack, your allies becoming more effective at helping you focus a target down.",rulesText:"Make a melee attack, net hits don't contributeto damage. The target is marked on hit and all allies attacking the marked target gain +1 hits when attacking the target. You may only have one target marked by vanguard strike at a time, striking a new target changes the target. The target is no longer marked at the end of the next round.",bpCost:5,affinityReq:"12W,(15)",colorContributions:{w:10,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Vault",description:"Target is enchanted with the powers of flight for the round",rulesText:"half Action. One ally within (60 ft) gains a fly speed equal to their movement speed until the end of the round.",bpCost:25,affinityReq:"8(U|R|B|W),(9)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Maneuver",name:"War stomp",description:"Attempt to knock enemies prone in an AoE",rulesText:`Make a melee attack against a single grounded target resisted by Phys/Phys at -3 DV. On a hit the target falls prone.\r
\r
If you have already damage an enemy this round, this ability can instead target all grounded targets within 15ft.`,bpCost:10,affinityReq:"7G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Maneuver",name:"Warden's Strike",description:"Attack reduces victim's initiative.",rulesText:"Make an attack. Net hits do not contribute to damage. Deal net hits as initiative damage instead.  (REWORK PENDING)",bpCost:10,affinityReq:"6W,6U,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Warning Blow",description:"Target must take active defense if able",rulesText:"Make an attack with your weapon, the target must actively defend if able.",bpCost:5,affinityReq:"5(U|R),5(U|G),5(R|G),(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Weather the blow",description:"Spend initiative, gain damage dampening reactively against one hit",rulesText:"(5) as an interrupt, gain damage dampening equal to your BODY against one attack.",bpCost:10,affinityReq:"7(W|G),(9)",colorContributions:{w:6,u:0,b:0,r:0,g:6}},{category:"Maneuver",name:"Whirlwind attack",description:"Cleave 360",rulesText:`You may attack any number of enemies in the one attack splitting your full dicepool among them. (Note that reach is an attack modifier and not innate to the dicepool, thus it is added to every attack after the dicepool has been split)\r
________________________\r
As previous rank, but you also gain the option to spend (10) Attack all enemies within reach.`,bpCost:5,affinityReq:`4(W|R|G),(6)\r
9(W|R|G),(12)`,colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Maneuver",name:"zurgo Smash!",description:"attack a random adjacent enemy at increased potency",rulesText:"When threatening two or more enemies make an attack against a randomly determined target at +2 DV.",bpCost:10,affinityReq:"3R,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Luck of the Hour",description:"spend init in place of luck",rulesText:`You may spend (10) per (L) for abilities that cost (L)\r
 instead of their normal cost`,bpCost:10,affinityReq:"9R,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Balance of Body and Soul",description:"Convert drain into health/stam, roll to purge a condition",rulesText:"half action. You may spend 1 drain to heal 2 stamina or health. Make another roll against an ongoing condition, adding half your WIL or BOD (your choice) to the roll.",bpCost:20,affinityReq:"3U,3G,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Manuever",name:"Mcguiver",description:"For better or for worse, things seem to unexplicably break or work when you mess with them",rulesText:"You may attempt to fix or break mechanical and/or magical devices such as locks or crystal balls.  Who knows what will happen! (needs actual rules ffs)",bpCost:5,affinityReq:"7(U|R),(9)",colorContributions:{w:0,u:6,b:0,r:6,g:0}},{category:"Manuever",name:"Revitalize",description:"Remove debuff on ally to trigger buff",rulesText:"full action. Target ally rolls again against all ongoing debuffs, one at a time, adding the new roll against that debuff to all prior rolls made for resisting that debuff. Roll against one debuff at a time,  stopping if this ability causes a debuff to be removed or if all debuffs are rolled against once. If this ability removes a debuff the target gains +4 dice on the next action they take during their next turn.",bpCost:20,affinityReq:"5W,5G,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Mark",name:"Bond of Pursuit",description:"Mark enemy, pursue and punish their ignorance of you in combat.",rulesText:`As a Half action you may mark a target within (CHA*5)ft with your Bond of Pursuit. This mark persists for 24 hours or until the subject is slain. You may only have one subject marked at a time and cannot mark another while an older mark exists. \r
When a subject bearing this mark within CHA*10ft of you moves, you may spend (1) as an interrupt to shift up to your movement speed or teleport if you such possess capabilities at least matching that of the subject. This movement must be towards the subject.\r
Rank 2: Marking a target is now an Extra action. Every instance of movement made by the subject provokes an Attack of Opportunity subject to your reach as normal. If you take this Attack of Opportunity you do not need to pay an additional (1) to pursue the marked target.\r
Rank 3: You may mark up to 2 targets. All Attacks of Opportunity and Pursuits cost (0).`,bpCost:[15,20,25],affinityReq:`7(W|R|G),(9)\r
 Per`,colorContributions:{w:6,u:0,b:0,r:6,g:6}},{category:"Mark",name:"Vendetta",description:"Declare vendetta target, bonus vs. them, penalties vs. other targets. Delay on new vendetta target if you fail to slay current one.",rulesText:"Nonaction. Spend (1) luck to declare a vendetta against a target within (RANGE). Gain 1 free hit on all attacks against that target while it is subject to your vendetta. It gains 1 free hit on all attacks against you while it is subject to your vendetta. Your vendetta ends when the target falls unconscious, you fall unconscious, or you spend (1) luck to change the target of your vendetta.",bpCost:10,affinityReq:"7B,7(B|R),(18)",colorContributions:{w:0,u:0,b:12,r:12,g:0}},{category:"Metamagic",name:"Centering Technique",description:"By spending longer to cast a spell, you reduce the drain that spell has on you.  You gain the ability to cast a spell over multiple rounds.",rulesText:`Complex Action. Begin centering to cast a spell on a later turn. Each consecutive turn that you center adds the following: WIL/2 to the drain dicepool up to a cap of 2*WIL, overload limit of the spell by 1 up to a total cap of CAST STAT+4. If you are subjected to an effect that would prevent you from using this ability then your current centering is lost.\r
\r
Possessing this ability incurs a 2 drain cost on any spells cast without centering (Note this is an up front cost, not an overload value).`,bpCost:0,affinityReq:"WUBRG,(0)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Cloudy Conjuration",description:"Create a fog cloud after casting a spell",rulesText:`Overload: 4\r
After resolving the modified spell, create an opaque 5x5x5 fog cloud in or adjacent to the target area of the modified spell.`,bpCost:20,affinityReq:"7(U|G),(15)",colorContributions:{w:0,u:2,b:0,r:0,g:2}},{category:"Metamagic",name:"Delay Spell",description:"Delay a spell's activation",rulesText:"Choose a delay of at least one turn. On your turn after the chosen time has elapsed cast the spell as a nonaction. While a spell is delayed it counts as sustained. Overload +2",bpCost:5,affinityReq:"12(R|U|W),(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Delayed Enhancement",description:"You may delay the effects of a buff to begin at the start of the next round.",rulesText:"You may delay the effects of a buff to begin at the start of the next round by spending a Extra action as part of the action of activating the buff effect.",bpCost:5,affinityReq:"9(W|U|G),(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Echoing spell",description:"Increase spell drain by 6, spell can be recast within one round as a nonaction on your turn",rulesText:"You may Increase a spell's overload by 6.  If you do, the spell can be recast as a nonaction on your next turn, drain is not rolled for this recast.",bpCost:10,affinityReq:"7U,7(W|U),(18)",colorContributions:{w:6,u:12,b:0,r:0,g:0}},{category:"Metamagic",name:"Fork",description:"Cast a copy of a spell being cast",rulesText:"Overload 6, copy this spell. The copied spell does not inherit Fork.",bpCost:10,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Metamagic",name:"Guiding Nimbus",description:"You may imbue your radiant attacks with lingering brilliance that enables allies to better strike the target",rulesText:"Before rolling a radiant damage attack you may decrease your DV by 4. On a successful hit the target is illuminated with a Guiding Nimbus until the end of the round. Allies suffer no vision penalties to strike the target and gain superior ground when attacking targets afflicted with Guiding Nimbus.",bpCost:10,affinityReq:"9W,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Irresistible Spell",description:"(5) as a cost when casting spell, this spell cannot be countered",rulesText:"(5) as a cost when casting spell, this spell cannot be countered",bpCost:10,affinityReq:"4G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Metamagic",name:"Lingering (SPELL SCHOOL)",description:"Sustained spells persist for up to RANK rounds after you stop sustaining them",rulesText:"Sustained spells persist for up to RANK rounds after you stop sustaining them",bpCost:[30,40,50],affinityReq:"7U,(9)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Metamagic",name:"Replenishing spell",description:"Regain drain if you don't take any drain for a time after casting this spell",rulesText:"Overload: 2. One minute after casting this spell, if you have not taken any additional drain, replenish all but two of the drain lost to casting the Replenished Spell.",bpCost:5,affinityReq:"12G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Sculpt Spell",description:"Reshape AoEs. Increase drain by 2",rulesText:`For spells with an AOE, you may shape the radial aoe into either a a cylinder (CS/4*STAT wide, 3CS/4*STAT high), cone (CS*STAT ft.), line (4*CS*STAT), ball (CS/2  * STAT radius), or 4 cubes (CS/4 * STAT ft.).\r
\r
Incurs 2 overload`,bpCost:5,affinityReq:"7U,(9)",colorContributions:{w:0,u:4,b:0,r:2,g:2}},{category:"metamagic",name:"Subtle Magic",description:"Stealth cast",rulesText:"1 drain. Spell is not perceived except by a successful opposed percieve magic check.",bpCost:5,affinityReq:"6B,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"metamagic",name:"Tactical Spell",description:"Your area spellcasts fold around specified targets, ignoring them",rulesText:"adds +2 drain, any number of subjects that would be subject to the aoe spell being augmented can be designated as ignored by the spell",bpCost:5,affinityReq:"9U,(18)",colorContributions:{w:0,u:9,b:0,r:0,g:0}},{category:"Metamagic",name:"Unstable Artifice",description:"Unsoaked drain from spells can trigger spell duplication",rulesText:"Whenever you take X drain from spellcasting roll a dicepool of X size. For every hit that results copy the triggering spell. These copies do not incur drain.",bpCost:100,affinityReq:"8U,8R,8(U|R),(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Reach Spell",description:"You may extend the reach of a spell",rulesText:"Add +3 overload to double the range of the cast spell",bpCost:20,affinityReq:"4R,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Selective Spell",description:"You may exclude a number of squares from an AoE targeted effect",rulesText:"Extra action in addition to the action of casting the spell: you may exclude up to (CAST STAT)/2 squares from being affected by the AoE.",bpCost:20,affinityReq:"4R,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Spell Siphon",description:"After successful counterspell, gain strength at arms",rulesText:"After successfully counterspelling, gain +1DV (str scaled weapon) and +1 reach for the next minute or until you make a successful attack that deals damage.",bpCost:20,affinityReq:"4U,4G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Absorbing Dispersal",description:"Counterspelling triggers a heal",rulesText:"Whenever you successfully counterspell you may heal target ally within CHA*10ft for 4.",bpCost:20,affinityReq:"4W,4U,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Acrobat",description:"Move at full speed doing gymnastics at no penalty. Ignore most penalties for having hands full during gymnastics.",rulesText:"move at full speed doing gymnastics at no penalty. Ignore most penalties for having hands full during gymnastics.",bpCost:5,affinityReq:"4(U|R),(6)",colorContributions:{w:0,u:4,b:0,r:4,g:0}},{category:"Passive",name:"Adaptive Resistance",description:"Gain dampening/elemental dampening after taking appropriate damage type",rulesText:"After taking damage, gain RANK*2 damage dampening that only applies to that damage type. This resistance expires after 10*BOD turns, or when this ability is triggered again.",bpCost:10,affinityReq:`7G,(9)\r
14G,(18)\r
21G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Passive",name:"Adrenaline Surge",description:"You are more likely to go first at the start of a round",rulesText:"Treat your initiative as 5 higher for determining the acting order at the start of a round.",bpCost:10,affinityReq:"6R,(12)",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Passive",name:"And Stay Down",description:"Enemies receiving healing triggers OA",rulesText:"Whenever an enemy you threaten is the succesful target of a healing effect it provokes an Opportunity Attack from you.",bpCost:15,affinityReq:"12(B|R),(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Arresting Impact",description:"Dealing damage to an enemy stops its movement",rulesText:"When you hit an enemy with an AoO or readied attack, it loses all remaining movement for the turn, stopping in place if it was moving. Airborne creatures may fall if they cannot hover.",bpCost:10,affinityReq:"6(W|B),(12)",colorContributions:{w:8,u:0,b:8,r:0,g:0}},{category:"Passive",name:"Assassinate",description:"Combat bonus vs. unaware targets",rulesText:`Enemies treat your initative as 10 higher for purposes of awareness during surprise rounds\r
. Attacks against unaware enemies gain one automatic hit.`,bpCost:15,affinityReq:"7B,(15)",colorContributions:{w:0,u:0,b:8,r:0,g:0}},{category:"Passive",name:"Bardic Knowledge",description:"Generally applicable knowledge checks",rulesText:`For a given topic you may make a Bardic Knowledge roll of (2*RANK + INTUITION or LOGIC as relevant). The general thresholds for recalling useful information are as follows.\r
1: Common Knowledge\r
3: Uncommon knowledge\r
4: Obscure / Hard to come by\r
5: Extremely Obscure`,bpCost:5,affinityReq:"2U,(3) per",colorContributions:{w:0,u:2,b:0,r:0,g:0}},{category:"Passive",name:"Blandness",description:"Harder to remember, harder to pick out of a crowd",rulesText:"Apply a -3 penalty to all attempts to notice you in a crowd or remember your features. This bonus does not apply if exotic clothing / gear would make you stand out.",bpCost:4,affinityReq:"4B,(6)",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Passive",name:"Blindsense",description:"Perceive general location of things",rulesText:"10/30/60/100ft blindsense",bpCost:10,affinityReq:`7(B|G),(9)\r
12(B|G),(15)\r
16(B|G),(21)\r
21(B|G),(27)`,colorContributions:{w:0,u:0,b:6,r:0,g:6}},{category:"Passive",name:"Blindsight",description:"Pinpoint awareness of things around you",rulesText:"5/15/30/50ft blindsight",bpCost:20,affinityReq:`9(W|U|G),(12)\r
14(W|U|G),(18)\r
19(W|U|G),(24)\r
24(W|U|G),(30`,colorContributions:{w:0,u:0,b:8,r:0,g:8}},{category:"Passive",name:"Blinkstrike",description:"You may teleport as part of your attack action, awareness permitting",rulesText:"You may use a teleport ability as part of an attack action. Use your departure location for determining LoS.",bpCost:20,affinityReq:"6U,10(U|B|R),(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Blood Magic",description:"Soak drain with BOD, take drain as health.",rulesText:"Lose all sources of WIL to your drain soak dicepool. Gain BOD to your drain dicepool. You have no drain bar. When you are the recipient of healing the caster must give up health or stamina at a 1:1 rate to heal you. You take all drain damage as health damage.",bpCost:0,affinityReq:"4B,(6)",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Passive",name:"Blood Mana",description:"You may take drain as lethal",rulesText:"You may choose to take any amount of drain you would suffer as twice its value in lethal damage.",bpCost:30,affinityReq:"7B,(15)",colorContributions:{w:0,u:0,b:10,r:0,g:0}},{category:"Passive",name:"Blunt the Storm",description:"Shield bonus vs. AoE indirect effects",rulesText:"You can block area attacks.",bpCost:20,affinityReq:"2W,2U,(6)",colorContributions:{w:4,u:2,b:0,r:0,g:0}},{category:"Passive",name:"Burrowing",description:"various burrow speeds, limited burrow to 100% uptime",rulesText:`Burrowing can penetrate loose or packed earth but not stone\r
\r
5ft per round\r
___________\r
10ft per round\r
______\r
20ft per round\r
________\r
Normal Movement speed`,bpCost:20,affinityReq:`6(R|G),(12)\r
9(R|G),(18)\r
12(R|G),(24)\r
15(R|G),(30)`,colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Passive",name:"Camoflague",description:"Hide in plain sight: terrain",rulesText:"Select a climate region, this ability may be purchased multiple times, once for each such region. When in chosen region you may attempt stealth checks at any time as if unobserved.",bpCost:15,affinityReq:"7G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Passive",name:"Catlike",description:"Reduced falling damage, better climbing jumping escape artist",rulesText:"Reduce the effective height of all falls by 20', then halve the distance for purposes of damage sustained.",bpCost:4,affinityReq:"7(R|G),(9)",colorContributions:{w:0,u:4,b:4,r:0,g:4}},{category:"Passive",name:"Caustic demise",description:"Enemies killed by your acid abilities explode",rulesText:"Enemies killed by your acid abiilities explode for (initial DV of effect that delivered the killing blow) damage to adjacent enemies",bpCost:30,affinityReq:"9(B|G),(12)",colorContributions:{w:0,u:0,b:8,r:0,g:8}},{category:"Passive",name:"Changeling",description:"Alter appearance, immitate others",rulesText:`Assume disguises in 12 seconds\r
+6 on disguise\r
+4 on mimicry\r
Gain Shapeshifter subtype`,bpCost:30,affinityReq:"16(U|B),(21)",colorContributions:{w:0,u:10,b:10,r:0,g:0}},{category:"Passive",name:"Chaotic Haversack",description:"Trinkets and objects seem to end up in your backpack, but you didn't put them there.",rulesText:`As a standard action, you may pull out any half non-magical inanimate object (rope, candle, etc).  You may have up to a total of 3 spontaneously generated items at a time; these items may be returned to the sack and exchanged.  Items spontaneously created are entirely mundane items posessing no magical properties.  Should a spontaneously generated item be unreturned to the sack there is a 24 hour period before that use is restored. Ability to pull out various low value items without specifically having them in inventory, representing character's collection of useful odds and ends. Pull out an item based on hits: 1. basic object 2. half item 4. full item 5. exotic substance\r
\r
Dicepool of LOG+INT+3`,bpCost:5,affinityReq:"4R,3(U|R|G),(9)",colorContributions:{w:0,u:4,b:0,r:8,g:2}},{category:"Passive",name:"Close and Personal",description:"By closing to CQC you negate enemy's reach when using(smaller) weapons",rulesText:"By entering an opponent's square (check to circumvent being pushed out) you treat that opponent as having no reach for attacks involving you and that opponent so long as you are attacking/defending with light weapons or lighter.",bpCost:5,affinityReq:"2B,2R,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Counterbolt",description:"Counterspelling generates a lightning bolt",rulesText:"Whenever you successfully counterspell you may immediately launch a DV = 6+CAST STAT lightning bolt at a single target.",bpCost:20,affinityReq:"4U,4R,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Cunning Adaptation",description:"Open up another ability of R6 or lower for purchase regardless of the color req.",rulesText:"Pick any single ability of R6 or lower. You may purchase it.",bpCost:50,affinityReq:"12U,12G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Darkvision",description:"See in pure darkness, monochromatic",rulesText:"30/60/120ft darkvision",bpCost:5,affinityReq:"3(B|G|R),(9) per",colorContributions:{w:0,u:0,b:6,r:0,g:6}},{category:"Passive",name:"Dazing Glare",description:"Stagger enemies with intimidation",rulesText:"When you successfully intimidate an enemy and would apply 1 or more fear stacks, you may instead cause them to be staggered until the end of their next turn.",bpCost:15,affinityReq:"12(W|B),(15)",colorContributions:{w:12,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Deadly Momentum",description:"Combat bonuses for moving each round",rulesText:`If you move 3 or more squares during your turn your next attack made during that turn has \r
superior ground.`,bpCost:30,affinityReq:"9R,(18)",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Passive",name:"Delay Potion",description:"Upon drinking a potion you can choose to delay its effects for up to BODY+WILL hours",rulesText:"Upon drinking a potion you can choose to delay its effects for up to BODY+WILL hours",bpCost:5,affinityReq:`2U\r
2G`,colorContributions:{w:0,u:2,b:0,r:0,g:2}},{category:"Passive",name:"Diehard",description:"Act normally while bleeding out",rulesText:"You do not fall unconscious when your condition track is filled, you still bleed out as normal.",bpCost:5,affinityReq:"7(R|G),(9)",colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Passive",name:"Distraction",description:"Flanking benefits",rulesText:"When outnumbering an enemy in melee, that enemy may not take attacks of opportunity for triggers other than movement.",bpCost:5,affinityReq:"4(W/R)",colorContributions:{w:4,u:0,b:0,r:4,g:0}},{category:"Passive",name:"Driven by Pain",description:"Gain 2 initiative per lethal damage you take, gain 1 initiative per nonlethal damage you take",rulesText:"Gain 1 initiative per lethal damage you take, gain 1 initiative per 2 nonlethal damage you take",bpCost:20,affinityReq:"6B,6(B|R),(15)",colorContributions:{w:0,u:0,b:10,r:10,g:0}},{category:"Passive",name:"Durable",description:"hp +1, overflow hp +1",rulesText:"Increase your maximum health and your overflow health by 1 each.",bpCost:4,affinityReq:"per: (3)",colorContributions:{w:0,u:0,b:0,r:0,g:2}},{category:"Passive",name:"Elemental Charge",description:"When you make a charge attack while you have an element imbued in your weapons you leave a lingering trail of that element.",rulesText:"Prerequisite: an Imbue (element) ability. You may spend (5) to activate one of your Imbue(element) buffs as part of a charge. When you charge with an imbue(element) buff active you leave behind a lingering trail of the element in all spaces you exit as part of the charge. This trail lasts until the end of the round and automatically hits creatures that enter, cross, or end their turn inside it, dealing (8+ CAST STAT) damage of the appropriate element.",bpCost:50,affinityReq:"(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Elusive combatant",description:"first (Y) squares of movement do not provoke",rulesText:"The first (1/3/*) squares of each movement you make do not provoke attacks of opportunity.",bpCost:5,affinityReq:`4(U|B),(6)\r
9(U|B),(12)\r
14(U|B),(18)`,colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Passive",name:"Evasion",description:"Armor encumbrance limitation, avoid area effects",rulesText:"While you are lightly encumbered you may attempt a dodge roll when subjected to an AoE you are aware of. (5) make a gymnastics check and move (X) per hit without provoking. If this places you outside the AoE you are no longer targeted by it. Additionally, double your dodge skill dice on active dodges and full dodges.",bpCost:10,affinityReq:"7(U|B|R),(9)",colorContributions:{w:0,u:6,b:6,r:6,g:0}},{category:"Passive",name:"Extraordinary Defender",description:"Guaranteed a minimum of take 4 on parries and blocks",rulesText:"When rolling parry/block treat any value below the take-4 value as the take-4 value",bpCost:60,affinityReq:"16",colorContributions:{w:16,u:16,b:16,r:16,g:16}},{category:"Passive",name:"Extraordinary Evasion",description:"Guaranteed a minimum of take 4 on dodge",rulesText:"When rolling dodge treat any roll below the take-4 value as the take-4 value",bpCost:100,affinityReq:"16",colorContributions:{w:16,u:16,b:16,r:16,g:16}},{category:"Passive",name:"Extraordinary Resilience",description:"Guaranteed a minimum of take 4 on chosen save",rulesText:`Choose a resistance (physical, mental). When rolling that resistance treat any roll below the take-4 value as the take-4 value. \r
Rank 2: applies to both resistances`,bpCost:60,affinityReq:"16",colorContributions:{w:16,u:16,b:16,r:16,g:16}},{category:"Passive",name:"Extraordinary Skill",description:"Guaranteed a minimum of take 4 on chosen skill",rulesText:"Choose a skill (except spellcasting or weapon skill). When rolling that skill treat any roll below the take-4 value as the take-4 value.",bpCost:40,affinityReq:"16",colorContributions:{w:16,u:161,b:16,r:16,g:16}},{category:"Passive",name:"Fan of Knives",description:"You can use manevuers on light thrown weapons as if they were melee weapons.",rulesText:"You may use manevuers for melee weapons when making ranged attacks with light thrown weapons at targets within (AGI/2)*5 ft",bpCost:5,affinityReq:"9(B|R),(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Fast Talker",description:"No penalty for rushing Con checks. Allow for secondary con roll to avert social blunder.",rulesText:"You no longer take a penalty for rushing a con attempt. You may attempt a con roll to smooth over an unsuccessful negotiation or etiquette roll.",bpCost:4,affinityReq:"4(B|R),(6)",colorContributions:{w:0,u:0,b:2,r:2,g:0}},{category:"Passive",name:"Faster movement",description:"Increase base movespeed",rulesText:"5 extra movement speed per rank",bpCost:4,affinityReq:"1(R|G),(3) per",colorContributions:{w:0,u:0,b:0,r:2,g:2}},{category:"Passive",name:"Fate's Bounty",description:"Heal whenever you spend luck",rulesText:"Whenever you spend a point of LUK, you may heal 2 stamina, drain or health per point of LUK spent.",bpCost:20,affinityReq:"3G,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Fearsome reputation",description:"bonus on diplomacy / intimidate varying",rulesText:"Gain +3 dice on intimidation/diplomacy/leadership checks when the subjects of such checks are aware of your reputation. Others so aware of your reputation gain a +3 bonus on checks to recognize you, recall seeing you, etc. so long as you are not adequately disguised.",bpCost:5,affinityReq:"1(B|W),(3)",colorContributions:{w:2,u:0,b:2,r:0,g:0}},{category:"Passive",name:"Fed by Fear",description:"Generate expendable offensive dice when you successfully fear an enemy",rulesText:"Every time your fear effect is not fully resisted/soaked by one or more enemies add 2 dice to your Fearmonger pool. You may expend dice from your fearmonger pool to boost attack rolls, charisma based skill rolls, and rolls that directly produce fear effects. Your fearmonger pool is capped at CHA/2 and expires after a minute of not gaining any dice.",bpCost:20,affinityReq:"10B,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Fickle sinew",description:"All successful melee attacks against you are subject to a free disarm. Attacker's AGI + SKILL vs. BOD",rulesText:"All successful melee attacks against you are subject to a free disarm. Attacker's Weapon Skill dicepool vs. BOD (as dicepool)",bpCost:5,affinityReq:"4G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Passive",name:"Finger Lopper",description:"Deal damage on successful disarm",rulesText:`Disarming an enemy subjects them to a hit at -4 DV of the successful disarm roll\r
\r
(Disarm is a basic combat maneuver, rolling attack vs. Dodge/Block/Parry & Physical soak. Different sized and styled items require different applied eDV values to successfully disarm. Typical 2 for small items, 4 for 1 handed weapons, 6 for 2 handed weapons, and 8 for secured items like shields).`,bpCost:5,affinityReq:"3W,3B,(9)",colorContributions:{w:3,u:0,b:3,r:0,g:0}},{category:"Passive",name:"Flawless stride",description:"ignore some/all difficult terrain",rulesText:"ignore (some/all) difficult terrain",bpCost:5,affinityReq:`4G,(9)\r
9G,(18)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Flight",description:"Various degrees of flight",rulesText:`Ignore falling damage so long as you can manage a glide, glide ratio of 2:1\r
_____________________________________\r
Fly up to a minute, requiring 10x the amount of rest to recoup your flight capabilities. Very wide turns\r
_____________________________________\r
Continuous flight, wide turns\r
_____________________________________\r
Continuous flight, faster (1.5x base move), hover\r
_____________________________________\r
Continuous flight, fastest (2x base move), hover, turn on a dime`,bpCost:[10,30,20,20,20],affinityReq:`WUBRG,(12)\r
WUBRG,(15)\r
WUBRG,(18)\r
WUBRG,(21)\r
WUBRG,(24)`,colorContributions:{w:8,u:8,b:8,r:8,g:0}},{category:"Passive",name:"Food Taster",description:"Detect poison, venom resistance",rulesText:`Your past career as a paid food taster has granted you the experience to detect poisoned food.  Additionally you are immune to venom of (idfk how poisons work but I assume it would be like catagories so like snakes vs spiders idk)\r
\r
Gain +4 on perception checks to notice the presence of poison. In addition you are either immune to one poison of your choosing or have a +2 bonus against all poisons.`,bpCost:5,affinityReq:"1(B|G),(3)",colorContributions:{w:0,u:0,b:2,r:0,g:2}},{category:"Passive",name:"Force of Presence",description:"Increase maximum auras you can sustain",rulesText:"You may sustain two auras at once",bpCost:100,affinityReq:"12W,12G,(30)",colorContributions:{w:9,u:0,b:0,r:0,g:9}},{category:"Passive",name:"Fortunate Fool",description:"All critical failures become normal failures, all normal failures restore a point of luck",rulesText:"All critical failures restore a point of luck and are reduced to normal failures, subject to DM discretion. Do not apply this to trivial or nondramatic failures.",bpCost:5,affinityReq:"7R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Passive",name:"Freedom of movement",description:"Bonus to resist movement impairing effects",rulesText:"2*RANK to resist movement impairing effects (including grapples)",bpCost:20,affinityReq:`3W\r
3(R/G) per\r
 +4`,colorContributions:{w:3,u:0,b:0,r:3,g:3}},{category:"Passive",name:"Frostborn",description:"Deal 1 damage when your cold effects would reduce an opponent's initiative below zero",rulesText:"When your Cold effect would reduce an opponent's initiative to a value equal to or below 0 you also deal 2 unresisted untyped damage (to health).",bpCost:15,affinityReq:"3B,3U,(15)",colorContributions:{w:0,u:5,b:5,r:0,g:0}},{category:"Passive",name:"Ghostsense",description:"Perceive general location of things that are ethereal",rulesText:"10/30/60/100ft ghostsense",bpCost:10,affinityReq:`7(W),(9)\r
12(W),(15)\r
16(W),(21)\r
21(W),(27)`,colorContributions:{w:0,u:0,b:6,r:0,g:6}},{category:"Passive",name:"Glamour",description:"Good looks and a likable presence such that most find it easy to open up to you.",rulesText:"Unless otherwise on guard, others are more likely to react favorably (one step on impression). When making social rolls you may take 2 drain to cause your dice to explode, though if you do so and fail there are more serious consequences as adjudicated by the GM. Everyone succeeds on 4s to remember events involving you.",bpCost:15,affinityReq:"(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Go the Distance",description:"Improved Athletics",rulesText:"Now a non action to sprint. Enemies do not gain bonus vs you when you sprint Plus something about sprint longer with no exhaustion",bpCost:4,affinityReq:"RW",colorContributions:{w:2,u:0,b:0,r:2,g:0}},{category:"Passive",name:"Hardline Negotiator",description:"Allow second attempts on failed negotiations where there otherwise wouldnt be one. +3 to negotiation dicepool.",rulesText:"Allow second attempts on failed negotiations where there otherwise wouldnt be one.",bpCost:5,affinityReq:"",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Passive",name:"Hawk Eyed",description:"Reduce vision penalties by 3",rulesText:"Reduce vision penalties by 3. This includes the penalty for attacking faraway targets.",bpCost:5,affinityReq:"1G,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:3}},{category:"Passive",name:"Heavy Hitter",description:"More likely to knockdown",rulesText:"Reduce the threshold for inflicting knockdown with your melee attacks by 2",bpCost:15,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:4,g:4}},{category:"Passive",name:"Helping Hand",description:"Ally benefits vs foes you are in melee with",rulesText:"You and your allies gain the benefits of ALLIES IN MELEE COMBAT when making ranged attacks into a melee.",bpCost:5,affinityReq:"(W|G)",colorContributions:{w:2,u:0,b:0,r:0,g:2}},{category:"Passive",name:"Hold Breath",description:"Practice and necessity has improved your lung capacity and oxygen usage",rulesText:"Quadruple the time you can hold your breath for without having to roll dice. You gain a +5 bonus against inhalation based poisons.",bpCost:3,affinityReq:"3G",colorContributions:{w:0,u:0,b:0,r:0,g:3}},{category:"Passive",name:"Inevitability",description:"Gain attack bonus after missing",rulesText:"After you miss an attack, gain 2 dice on the next attack you make before the end of the next round.",bpCost:5,affinityReq:"4R,(6)",colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Passive",name:"init fixing",description:"roll 1 extra init die at start, set aside 1 die for next round",rulesText:"Roll 1 extra initiative dice at the start of combat and choose one roll to set aside. On subsequent rounds you roll dice as normal, then add this kept die and choose one die among them to set aside for the next round.",bpCost:30,affinityReq:"9G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:12}},{category:"Passive",name:"Init Growth",description:"slowly gain initiative",rulesText:"At the start of round Y, reroll all initiative dice that are lower than min(Y,1+rank). Round count resets after 5.",bpCost:20,affinityReq:`7G,(15)\r
10G,(21)\r
13G,(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:12}},{category:"Passive",name:"Inspiration",description:"Inspire others to greater acts at key moments",rulesText:"You gain a pool of CHA inspiration dice. As an Extra action you may give any number of inspiration dice to an ally. A creature that has inspiration dice but does not have this ability may add the inspiration dice on any roll, expending them. This pool refreshes daily, and unspent inspiration expires daily.",bpCost:15,affinityReq:"3U,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Invigorate",description:"Recipients of your healing gain +1 die to all checks for a short while",rulesText:"Recipients of your healing gain +1 die to all checks for a number of rounds equal to half the health restored, rounded up.",bpCost:10,affinityReq:"12(W|G),(15)",colorContributions:{w:8,u:0,b:0,r:0,g:8}},{category:"Passive",name:"It's all in the wrist",description:"Cheat at games; manipulate dice, cards",rulesText:"You may make a legerdemain check to make games of chance end in your favor.  Gain +4 dice to these checks, you may spend a luck point to ensure a victory.  Additionally, you may spend a point of luck to win a bet limited to gambling such as betting on a fight or race.  May apply circumstance bonuses at the GMs discretion.",bpCost:5,affinityReq:"4(U|R),(6)",colorContributions:{w:0,u:4,b:0,r:4,g:0}},{category:"Passive",name:"Killing Hands",description:"Unarmed strikes deal lethal",rulesText:"You can choose for your unarmed strikes to do lethal damage. Your unarmed strike is a 8/2 weapon (medium size).",bpCost:5,affinityReq:"(6)",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Passive",name:"Light Sleeper",description:"You don't take any penalty to perception checks while sleeping, you can act on the turn you wake up",rulesText:"You don't take any penalty to perception checks while sleeping, you can act on the turn you wake up",bpCost:5,affinityReq:"2(R|G),(3)",colorContributions:{w:0,u:0,b:0,r:2,g:2}},{category:"Passive",name:"Lightning Reflexes",description:"extra initiative dice",rulesText:"(RANK) extra initiative dice",bpCost:20,affinityReq:`(12)\r
(18)\r
(24)`,colorContributions:{w:8,u:8,b:8,r:8,g:8}},{category:"Passive",name:"Lightning Rod",description:"Can't thunderstruck, gain benefits for dealing lightning damage",rulesText:`Your lightning damage cannot normally apply thunderstruck.\r
\r
Enemies damaged by your lightning effects suffer Vulnerable 2 to lightning until the end of next round.\r
\r
Damaging an enemy with a lightning effect grants you one static charge. Static charges decay after 1 minute of not gaining a charge.\r
While holding at least one static charge you glow faintly.\r
You can spend static charges as follows.\r
(X): This lightning attack can apply thunderstruck, count your net hits as X higher for determining if thunderstruck occurs. This may be activated after net hits are determined.\r
(3): Select one creature up to 30ft away from a current target for your lightning attack as an additional target, there must be line of effect between these two creatures.`,bpCost:15,affinityReq:"4U,4R,(18)",colorContributions:{w:0,u:6,b:0,r:6,g:0}},{category:"Passive",name:"Lingering Aura",description:"The effects of your aura linger after affected individuals leave its zone of effect.",rulesText:"The effects of your auras persist for one round after an affected individual leaves the zone of effect.",bpCost:20,affinityReq:"(21)",colorContributions:{w:14,u:14,b:14,r:14,g:14}},{category:"Passive",name:"Lore Master",description:"Various bonuses granted to combat for identifying enemies",rulesText:"Once per combat you may attempt to recall relevant information to help combat a type of foe. Make a knowledge roll as a half action using the appropriate skill, for every two hits on this check you add +1 die to all opposed checks against the chosen type until combat ends, to a maximum of half your LOGIC.",bpCost:15,affinityReq:"4U,5(W|U),(12)",colorContributions:{w:0,u:10,b:0,r:0,g:0}},{category:"Passive",name:"Magic resistance",description:"always on resistance to magic",rulesText:"Gain RANK dice to resist magical effects. You always roll to resist magical effects and are not considered willing. You can suppress this ability at will, a Extra action in combat. Resuming this ability is also a Extra action.",bpCost:10,affinityReq:`4(G|U),(6)\r
9(G|U),(12)\r
14(G|U),(18)\r
19(G|U),(24)\r
24(G|U),(30)`,colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Passive",name:"magical device affinity / magic sensitive / aura viewing",description:`Affinity: Notice items are magical with hands on inspection. Glean some idea of the magic item's function\r
Sensitive: Notice items are magica after a few moments of observation\r
Aura: Notice magical auras in addition to items, discern more specific functionality of items (identify given time)`,rulesText:`Affinity: Notice items are magical with hands on inspection. Glean some idea of the magic item's function\r
Sensitive: Notice items are magica after a few moments of observation\r
Aura: Notice magical auras in addition to items, discern more specific functionality of items (identify given time)`,bpCost:[5,5,10],affinityReq:"(W|U|B),3 per",colorContributions:{w:0,u:2,b:0,r:0,g:0}},{category:"Passive",name:"Mana Barrier",description:"You may take up to half the damage from every hit as drain.",rulesText:"You may take up to half the damage from every hit as drain.",bpCost:5,affinityReq:"4(W|B|G),(9)",colorContributions:{w:6,u:0,b:6,r:0,g:6}},{category:"Passive",name:"Mass combustion",description:"Enemies you set alight have a chance to set adjacent enemies alight each turn",rulesText:"For enemies that you cause to burn, at the start of their turn adjacent enemies must resist the current flame intensity with Armor Soak or catch on fire.",bpCost:15,affinityReq:"9R,(12)",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Passive",name:"Master of Poisons",description:"Create, identify, use, resist poisons",rulesText:`Gain\r
Knowledge of poison crafting\r
ability to learn new poison recipes and develop your own\r
+3 dice vs. poison effects\r
+3 dice to identify poisons`,bpCost:20,affinityReq:"4(B|G),(6)",colorContributions:{w:0,u:0,b:4,r:0,g:4}},{category:"Passive",name:"Master smuggler",description:"Bonuses on sleight of hand, hiding things",rulesText:"Treat unattended objects one size smaller for fitting them through tight spaces",bpCost:3,affinityReq:`2(U/B)\r
2(U/R)\r
2(B/R)`,colorContributions:{w:0,u:4,b:4,r:4,g:0}},{category:"Passive",name:"Mingling",description:"Hide in plain sight: crowds",rulesText:"You can always attempt a stealth check when in crowds even if observed.",bpCost:5,affinityReq:"4B,(6)",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Passive",name:"Multicast",description:"Multispelling bonus, limit drain increase, extra dice",rulesText:"You do not suffer increased drain for casting multiple spells in one action. Gain +1 dice to each spellcasting roll when multicasting. Applying this metamagic takes your Extra action.",bpCost:20,affinityReq:"7(U|R),(15)",colorContributions:{w:0,u:10,b:0,r:10,g:0}},{category:"Passive",name:"Natural weapons, various",description:"Claws, Bite, Tail, blades, spines, etc",rulesText:"You gain a natural weapon. Additional features may be purchased to customize it.",bpCost:5,affinityReq:"4G",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Nothing Personal",description:"Treated as having superior ground during a turn you have teleported.",rulesText:"After teleporting, you have superior ground until the end of your turn (or end of next turn if you teleported when it wasn't your turn)",bpCost:10,affinityReq:"7(W|U),(15)",colorContributions:{w:10,u:10,b:0,r:0,g:0}},{category:"Passive",name:"Opportunist",description:"sfsadfsaf",rulesText:"Gain +3 dice on all readied attacks and intercepts",bpCost:5,affinityReq:"6W",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Outstanding Jumper",description:"Leap buildings where others leap fences",rulesText:"Full/Half/Extra action, make a Strongman roll to jump. You are treated as if you had a running start. Multiply the jump distance by 10.",bpCost:20,affinityReq:`5(R|G),(21)\r
12(R|G),(24)\r
13(R|G),(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Pain Brings Suffering",description:"Victims of your DoTs take a dicepool penalty equal to half the total ongoing damage value.",rulesText:"Victims of your DoTs take a dicepool penalty equal to one quarter the total ongoing damage value.",bpCost:5,affinityReq:"7B,(9)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Passive",name:"Pain tolerance",description:"Increases number of damage boxes required to acquire wound penalties",rulesText:"You require 6 + (RANK) boxes per wound penalty, rather than 6.",bpCost:5,affinityReq:"2(W|B|G),(6) per",colorContributions:{w:4,u:0,b:4,r:0,g:4}},{category:"Passive",name:"Paragon of Skill",description:"reroll all 4s for a noncombat skill, can be taken multiple times",rulesText:"reroll all 4s for a noncombat skill, can be taken multiple times",bpCost:20,affinityReq:"7(U|G),(15)",colorContributions:{w:0,u:8,b:0,r:0,g:8}},{category:"Passive",name:"Parry and Twist",description:"Attempting a disarm as part of a riposte only costs (5). Deprecated",rulesText:"Attempting a disarm as part of a riposte only costs (5)",bpCost:5,affinityReq:`3W\r
3U`,colorContributions:{w:3,u:3,b:0,r:0,g:0}},{category:"Passive",name:"Permafrost",description:"Initiative damage beyond 0 is applied to enemy's next turn",rulesText:"Initiative damage resulting from your cold effects that would reduce an enemy's initiative below 0 is applied towards their next round's initiative.",bpCost:5,affinityReq:"9U,(12)",colorContributions:{w:0,u:8,b:0,r:0,g:0}},{category:"Passive",name:"Personality Cult",description:"When you resist a charm effect, you may reflect that effect back at the user.",rulesText:"When you successfully resist a mind affecting ability you may spend (5) to redirect the effect to the originator.",bpCost:20,affinityReq:"10B,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Photographic memory",description:"remember stuff, prompt GM for refreshers of detail",rulesText:"Gain 2 dice on knowledge checks to remember something. You may recall additional relevant details by prompting the GM for a clearer picture of a memory, subject to GM discretion. Rolling memory is now faster (typically a Extra action).",bpCost:3,affinityReq:"3U,(6)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Passive",name:"Projectile deflection",description:"Parry some projectiles",rulesText:`You can parry projectile based attacks from various item size categories\r
your size +2 (arrows, daggers)\r
your size +1 (thrown weapons, single target dodgeable, blockable spells)\r
your size (heavy thrown weapons, powder shot weapons)`,bpCost:10,affinityReq:"7(W|U),(9)",colorContributions:{w:6,u:6,b:0,r:0,g:0}},{category:"Passive",name:"Prowess",description:"Every non attack ability used increases your combat prowess",rulesText:"Gain +1 extra dice on all defenses and weapon attacks for each non attack ability used. This bonus stacks and lasts until the end of the round.",bpCost:25,affinityReq:"3W,3R,3(W|U|R),(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"quickdraw",description:"quickdraw without check // quickdraw large items",rulesText:"Items that can be quickdrawn normally require no check and are drawn as a nonaction. Most items that cannot normally be quickdrawn may be attempted as a standard quickdraw (Extra action, legerdemain vs. 2)",bpCost:3,affinityReq:"4R,(6)",colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Passive",name:"Ranger favored enemy",description:"gain bonuses against specific enemy types",rulesText:"Gain (RANK) extra dice for checks pertaining to the chosen (sub)type.",bpCost:10,affinityReq:"4(W/G) per",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Ranger's Guile",description:`Difficult terrain doesnt slow your groups travel.\r
Your group cant become lost except by magical means.\r
Even when you are engaged in another activity while traveling (such as foraging, navigating, or tracking), you remain alert to danger.\r
If you are traveling alone, you can move stealthily at a normal pace.\r
When you forage, you find twice as much food as you normally would.\r
While tracking other creatures, you also learn their exact number, their sizes, and how long ago they passed through the area.`,rulesText:`Difficult terrain slows your travel by one less step.\r
Your group cant become lost except by magical means.\r
Even when you are engaged in another activity while traveling (such as foraging, navigating, or tracking), you remain alert to danger.\r
If you are traveling alone, you can move stealthily at a normal pace.\r
When you forage, you find twice as much food as you normally would.\r
While tracking other creatures, you also learn their exact number, their sizes, and how long ago they passed through the area.`,bpCost:10,affinityReq:"6G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Reactive Dodge",description:"Shift 10ft as part of a dodge",rulesText:"As part of a dodge or when dodging on full dodge you may move 10 ft.",bpCost:5,affinityReq:"4U,(6)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Passive",name:"Regenerating Fortitude",description:"Restore 1 stamina on dealing damage",rulesText:"Once per turn when you directly cause damage to an enemy you heal 1 point of nonlethal damage.",bpCost:40,affinityReq:"10(W|B),(21)",colorContributions:{w:6,u:0,b:6,r:0,g:0}},{category:"Passive",name:"Regeneration",description:"Converts lethal to nonlethal over time",rulesText:"Convert 1 lethal to nonlethal every hour, starting with smallest wounds. Regeneration can regrow severed limbs in a day.",bpCost:15,affinityReq:"12G,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:10}},{category:"Passive",name:"Reserves of Spirit",description:"Increase drain bar",rulesText:".+RANK to drain bar",bpCost:5,affinityReq:"3G,(3)",colorContributions:{w:0,u:0,b:0,r:0,g:2}},{category:"Passive",name:"Resist (ELEMENT)",description:`2x RANK dice against (ELEMENT) effects. \r
W: radiant\r
U: cold\r
B: acid, dark\r
R: fire, lightning\r
G: cold, acid, fire, lightning`,rulesText:"2x RANK dice against (ELEMENT) effects",bpCost:3,affinityReq:"3G,(6)",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Passive",name:"Resistance, General",description:"RANK dice against elemental effects",rulesText:"RANK dice against elemental effects (fire,cold,acid,lightning)",bpCost:5,affinityReq:"3G,(6) per",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Roll with the blows",description:"Gain dodge bonus after being hit",rulesText:"After you are hit by an attack and suffer damage, gain 1 free hit to the next defense roll you make against an attack.",bpCost:10,affinityReq:"3W,3R,(9)",colorContributions:{w:4,u:0,b:4,r:0,g:0}},{category:"Passive",name:"Runecarving",description:"Carve magical runes to delay magical effects for use at a desired time",rulesText:`You cannot cast spells directly.\r
You can scribe up to (CAST STAT)/2 runes per day given sufficient downtime. Runes are typically scribed onto small durable objects that fit in one's hand but nearly any surface can accept runes. \r
The dicepool, force and cast stat parameters of a runic spell are set when it is created. Runic spells are never affected by wound penalties.\r
A rune must be attuned before it can be used. A rune can be attuned as part of the action of casting the stored spell. Attuning a rune costs 2 unpreventable point sof drain damage. As a runecaster you may have up to (CAST STAT)/2 runes attuned at once. Non runecasters are limited to 1 rune and may only attune runes as part of the action of casting the stored spell.\r
A rune comes with (Your drain pool / 2 / spell drain value ) uses.`,bpCost:0,affinityReq:"W/U",colorContributions:{w:1,u:1,b:0,r:0,g:0}},{category:"Passive",name:"Scent",description:"Detect things by sense of smell",rulesText:"You can easily distinguish different scents as easily as sounds, shapes and colors. This allows you to be aware of things in the general vicinity (30ft), things that have been in an area you are closely expecting (modified by circumstances).",bpCost:5,affinityReq:"1G,(3)",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Shadowmeld",description:"Hide in plain sight: shadows",rulesText:"You can always attempt a stealth check when in dimly lit or dark areas even if observed.",bpCost:40,affinityReq:"9B,(18)",colorContributions:{w:0,u:0,b:12,r:0,g:0}},{category:"Passive",name:"Shield Push",description:"Enemies you hit with your shield are subject to a free push attempt",rulesText:`Whenever you hit an enemy with your shield (even if they fully soak the damage) you may attempt to push them.\r
\r
Treat the shield attack's roll as the roll for the shield push, target soaks with physical soak, move them (unsoaked eDV)/4 * 5ft.`,bpCost:15,affinityReq:"6W,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Shielded mind",description:"bonus vs. mind affecting",rulesText:"Gain +RANK dice against mind affecting",bpCost:5,affinityReq:"3(W|G),(6) per",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Silent as a shadow",description:"Climb, swim, and jump extra quietly. Quiet kills",rulesText:"You take no penalty for sneaking at normal speed,. Enemies take -4 to hear most sounds you make in combat",bpCost:4,affinityReq:"4(U|B),(6)",colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Passive",name:"Skirmishing Sharpshooter",description:"Threaten adjacent spaces with bow",rulesText:"You may treat ranged weapons as melee weapons for purposes of threatened area and related combat modifiers.",bpCost:20,affinityReq:"10(R/G)",colorContributions:{w:0,u:0,b:0,r:10,g:10}},{category:"Passive",name:"Speedloader",description:"Reload weapons more quickly",rulesText:"As a half action you may reload HITS weapons on a Palming roll.",bpCost:5,affinityReq:"(9)",colorContributions:{w:6,u:6,b:6,r:6,g:6}},{category:"Passive",name:"Spell drinking",description:"invigorated by failed spells targeting user",rulesText:"Gain 1 temp hp when you resist a hostile spell.",bpCost:5,affinityReq:"4U,4G,(12)",colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Passive",name:"Spell Siphon",description:"Countering a spell deals 1 drain to the caster and you heal 1 drain",rulesText:"Successfully countering a spell deals 1 drain to the caster and you heal 1 drain",bpCost:40,affinityReq:"9U,9B,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Spiderclimb",description:"You can walk on walls as if they were level ground",rulesText:"You can walk on walls as easily as ground. Climb checks are still required, thresholds are lowered.",bpCost:10,affinityReq:"9(G|R),(12)",colorContributions:{w:0,u:0,b:0,r:6,g:6}},{category:"Passive",name:"Spiritual Transferrence",description:"You may pay drain in place of healing drain your ally would take when receiving healing from you.",rulesText:"You may pay drain in place of healing drain your ally would take when receiving healing from you.",bpCost:15,affinityReq:"3G,(15)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Spite the Ignorant",description:"Counterspelling drains the counterspellee",rulesText:"Whenever you successfully counterspell, the caster you counterspelled takes 1 unresisted drain.",bpCost:20,affinityReq:"4U,4B,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Stinging Denial",description:"Lock enemy out of ability, action you counter",rulesText:"When you successfully counterspell an opponents spell or ability they cannot use that ability until after the end of their next turn.",bpCost:10,affinityReq:"8(W/U)",colorContributions:{w:8,u:8,b:0,r:0,g:0}},{category:"Passive",name:"Stoke the flames",description:"Increase severity of ignite by hitting a burning target",rulesText:"If you would apply a burn to an already burning enemy, increase the current burn by 4 instead if the new burn is not already 4 greater.",bpCost:15,affinityReq:"6R,(12)",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Passive",name:"Stoneskin",description:"Damage dampening (Y)",rulesText:"Gain +1 damage dampening per rank",bpCost:60,affinityReq:"6G per",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Passive",name:"Supreme Contortionist",description:"fit through unusually small spaces",rulesText:"You can contort and deform your body to fit in/through spaces smaller than normal.",bpCost:3,affinityReq:"1R,(3)",colorContributions:{w:0,u:0,b:0,r:2,g:0}},{category:"Passive",name:"Tangential Luck",description:"Various secondary effects that trigger off spending points of luck",rulesText:"After you spend a point of luck, you gain +1 die to all pools until the end of the current round.",bpCost:10,affinityReq:"9R.(12)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Passive",name:"Telepathic link",description:"Communicate telepathically",rulesText:`Range (LOG*10 ft). This is one way communication in which you can convey words given you and your target share a language.\r
_______________________\r
You may attune up to LOG targets for two way communication\r
_______________________\r
Attuned targets can be communicated with out to LOG*100 ft`,bpCost:5,affinityReq:"2(U|B),(9) per",colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Passive",name:"Time is Mana",description:"Can spend drain to cover init costs for U abilities",rulesText:"Spend 4 drain per (5) of a blue ability",bpCost:10,affinityReq:"10U,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Timely Disruption",description:"Readied attacks also inflict their damage as a dice pool penalty to an action they interrupt.",rulesText:"Readied attacks also inflict half their damage as a dice pool penalty to an action they interrupt.",bpCost:10,affinityReq:"6(W/U/B)",colorContributions:{w:6,u:6,b:6,r:0,g:0}},{category:"Passive",name:"Tireless",description:"nonlethal hp +1",rulesText:"Increase your maximum nonlethal health by 1.",bpCost:5,affinityReq:"2/4/...",colorContributions:{w:0,u:0,b:0,r:0,g:2}},{category:"Passive",name:"Titan Grip",description:"Wield Oversized weapons",rulesText:`Rank 1: +1 DV, +2 reach or (bonus range increment). The weapon must be ready for it to be used. Attacking with a weapon makes it no longer readied. By spending a half action the weapon(s) can be reset.\r
Rank 2: reseting it an extra action.`,bpCost:10,affinityReq:`3G,3(W|R),(12)\r
5G,5(W|R),(21)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Trap finding",description:"trapfinding, the dangerous ones, not the anime ones",rulesText:"Your passive perception checks do not take the usual penalty to detect traps or other hidden/harmful mechanisms. Additionally you gain 2 dice on all checks to find such things.",bpCost:5,affinityReq:"4(U/G)",colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Passive",name:"Tremorsense",description:"Pintpoint awareness of things moving in contact with solid objects you are also in contact with, like the ground",rulesText:"15/45/90ft tremorsense",bpCost:10,affinityReq:`4(R|G),(9)\r
9(R|G),(18)\r
13(R|G),(27)`,colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Passive",name:"Uncanny Awareness",description:"Harder to surprise, bonuses vs. attacks you aren't aware of",rulesText:"You can take an active dodge even when surprised, gain +6 dice on surprise checks initiated against you.",bpCost:20,affinityReq:"12(URG),(15)",colorContributions:{w:0,u:8,b:0,r:null,g:8}},{category:"Passive",name:"Underworld contact",description:"It's rather easy for you to get into contact with the local criminal underground and more often than not you start out on their good side",rulesText:'gain 3 dice on checks relating to interactions with or knowledge about black markets/criminal undergrounds/fences etc. You may attempt to "know a guy", if the DM permits, spend 1L and you find an underground contact who starts out initially friendly.',bpCost:3,affinityReq:"1B,(3)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Unmovable",description:"Resist various debuffs, combat maneuvers",rulesText:"Gain +3 dice against knockdown, disarm, grapple, balance, overrun, and other effects that forcibly move you.",bpCost:5,affinityReq:"R3/R6/R9/R12 G limited",colorContributions:{w:0,u:0,b:0,r:0,g:3}},{category:"Passive",name:"Untrackable",description:"You cannot be tracked in natural surroundings.",rulesText:"With your guidance, the party may move through natural terrain using your stealth or survival check to cover up your tracks.  You are always untrackable when moving through natural terrain alone, however the party cannot gain the benefit of your Untrackable ability when this is the case.",bpCost:5,affinityReq:"1G,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Venomous Vitality",description:"succeeding on a roll vs. poison grants you 1 temp hp",rulesText:"Whenever you succeed on a resistance roll against a poison effect, gain 2 temp hp.",bpCost:5,affinityReq:"3B,3G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Wary Traversal",description:"reduce damage from AoOs",rulesText:"Halve damage from AoOs after armor, before damage dampening.",bpCost:20,affinityReq:"???",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Water Walking",description:"You can walk on water as if it were solid ground",rulesText:"You can walk on water as if it were solid ground",bpCost:5,affinityReq:"7(U|G),(9)",colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Passive",name:"What goes around comes around",description:"Gain 1 die on your next attack for each damage you take",rulesText:"For every 2 points of damage you take add one die to your revenge pool. Add your revenge pool to the next attack you make, this sets your revenge pool to 0 afterwards. If you have not added a die to your revenge pool in the last 3 rounds, your revenge pool resets to 0.",bpCost:5,affinityReq:"3B,3R,(9)",colorContributions:{w:0,u:0,b:3,r:3,g:0}},{category:"Passive",name:"Restorative Resonance",description:"Whenever you heal an ally, trigge a heal on another nearby ally",rulesText:"Whenever an effect of yours heals an ally, heal another ally within 30' of one of the original healing recipients for 2. This ability can't trigger itself",bpCost:20,affinityReq:"7W,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Awaken",description:"Stir sentience in a creature",rulesText:`24 Hour\r
You awaken an animal to humanlike sentience. The creature is initially indifferent to you. Awakened creatures have 3 LOG and are magical beasts. Ritual participants need to pay drain equal to the maximum health of the creature or the ritual fails.`,bpCost:5,affinityReq:"18G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:12}},{category:"Ritual",name:"Foretelling",description:"Determine what fate might result from a given course of action",rulesText:`1 Minute Ritual. Costs 1 drain.\r
\r
Answers a question about an action to be taken in the near future (roughly 1 hour)\r
Weal (if the action will probably bring good results).\r
Woe (for bad results).Weal and woe (for both).\r
Nothing (for actions that dont have especially good or bad results)\r
.`,bpCost:10,affinityReq:"4U,(6)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Ritual",name:"Natural Refuge",description:"Produce a temporary refuge for you and a few others out of natural terrain",rulesText:`10 Minute ritual.\r
\r
The immediate local terrain reshapes itself to a form more suitable for conealment and quiet rest. This may take the form of a dense thicket wrapping itself around your encapment, a vine obscured cave developing in the earth, or similar as chosen by your GM. The immutable features of the refuge are that it is difficult for others to find (Perception TN 4) and may otherwise be passed off as a natural formation unworthy of note. Furthermore hazards and nuisances are downgraded one step (as per DM choice). Instead of swarming flies there's only a few straggling bloodsuckers, instead of the scorching heat of the desert it is uncomfortable but manageably warm, instead of pouring rain you merely have to deal with damp air and occassional droplets etc.`,bpCost:15,affinityReq:"9G,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Purification",description:"1 hour ritual to remove persistent conditions lesser abilities can't remove",rulesText:"1 hour ritual. Costs 1 drain from a single participant. Targets 1 individual. Individual can roll to end any of all persistent afflictions it is suffering, gaining a +5 bonus on each roll.",bpCost:10,affinityReq:"4W,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Armor",description:"Increase armor by hits",rulesText:`SUST TRGT(SELF)\r
\r
Add 1 to armor soak for the duration of this spell.\r
Casting this spell is a half action\r
\r
Overloads\r
\r
2: AoE, +10ft per\r
2: +1 extra armor`,bpCost:15,affinityReq:"4(W|G),(6)",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Spell",name:"Banishment",description:"Direct, opposed check to banish",rulesText:`INST TRGT TOUCH\r
eDV = CS + 1\r
Resist = Mental Resist\r
Soak = Physical Soak\r
\r
If the target is not an extraplanar creature this spell has no effect\r
\r
0: no effect\r
1: the target takes -5 to all rolls until the end of the round\r
9: the target is banished\r
\r
Overloads\r
\r
2: ranged\r
2: AoE, +5ft diameter per\r
2: +1 eDV`,bpCost:10,affinityReq:"9W,(18)",colorContributions:{w:10,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Call Down the Sky",description:"Drop meteors on target locations",rulesText:`This spell is cast with three consecutive full actions over three consecutive rounds, resolving asthe third full action is spent.\r
\r
INST AoE\r
DV: CS+9 (FIRE)\r
\r
Dodge/armor soak\r
\r
Targets: four 40ft diameter regions. A target can only be struck once by each casting of Call Down The Sky.\r
\r
Overloads\r
\r
2: +1 DV`,bpCost:50,affinityReq:"15R,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Cause Fear",description:"Affected enemies flee if able",rulesText:`INST SINGLE AOE\r
eDV = CS - 1\r
Resist = mental\r
Soak = mental\r
\r
for every 8 damage this ability would do (round up) the target takes 1 fear stack \r
\r
Overloads\r
\r
2: +1 DV\r
2: +5ft AoE`,bpCost:10,affinityReq:"4B,(9)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Spell",name:"Clairvoyance",description:"See, hear from nearby location",rulesText:`SUST SELF\r
Range = CS*10ft\r
\r
You create a scrying sensor at a nearby location within RANGE. You can see and hear as if you are at that location. Casting this spell is a half action.\r
\r
Overloads\r
\r
2: +CS*10 ft range`,bpCost:5,affinityReq:"4U,(9)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Spell",name:"Confusion",description:"Cause affected targets to behave erratically for duration. PENDING REWORK",rulesText:`DIRECT SUST SINGLE AOE\r
eDV = CS + 1\r
Resist = mental\r
Soak = mental\r
\r
0: no effect\r
1: Target rolls twice on confusion and picks their choice\r
9: target is confused until end of next round\r
each 2 beyond: Target is confused for another round\r
\r
Overloads\r
\r
2: +1 eDV\r
2: +5ft diameter\r
\r
Confused:\r
25% does nothing\r
25% runs in a random direction\r
25% attacks nearest target\r
25% act normally`,bpCost:10,affinityReq:"6R,(12)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Spell",name:"Create Light",description:"Cause object touched to emanate light",rulesText:`INST SUST\r
\r
Light diameter 10ft per CS/2\r
Casting this spell is a half action\r
\r
Overloads\r
\r
1: +5ft diameter`,bpCost:4,affinityReq:"1W,(6)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Curse of Vulnerability",description:"Reduce enemy's damage dampening",rulesText:`SUST, AOE\r
10ft diameter target area\r
eDV =  CS - 1\r
Resist = Physical\r
Soak = Physical\r
\r
Overloads\r
\r
2: +1 eDV\r
2: +5ft diameter\r
\r
For every 2 unsoaked eDV this spell inflicts a -1 damage vulnerability.`,bpCost:15,affinityReq:"6B,(12)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Spell",name:"Dampening Field",description:"Reduce magical effects by HITS up to FORCE",rulesText:`SUST AOE\r
10ft diameter\r
\r
Reduce the DV of magical effects in the area by CS/2\r
Casting this spell is a half action\r
\r
Overloads:\r
\r
2: +5ft diameter\r
2: +1 additional reduction`,bpCost:20,affinityReq:"9(W|U),(12)",colorContributions:{w:6,u:6,b:0,r:0,g:0}},{category:"Spell",name:"Danger Sense",description:"HITS to defensive dice pool up to FORCE/2",rulesText:`SUST SELF\r
\r
Add 1 to defensive checks (passive and active dodge,parry,block) for duration of spell\r
Casting this spell is a half action\r
\r
Overloads\r
\r
2: increase the bonus by +1`,bpCost:10,affinityReq:"7(W|U|G),(9)",colorContributions:{w:2,u:4,b:0,r:0,g:2}},{category:"Spell",name:"Death Blast",description:"Direct damage kill spell",rulesText:`INST/SUST\r
Touch (non provoking), ranged\r
DV = CS+3\r
Resist = Dodge,Block\r
Soak = Armor\r
Overloads\r
\r
2: +1DV\r
2: AoE per 5ft diameter, (note that it starts at 5ft effectively) \r
4: Sust`,bpCost:10,affinityReq:"4B",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Spell",name:"Detect Hostile Intent",description:"Detect those with hostile intent towards caster",rulesText:`SELF\r
5ft cone\r
Casting this spell is a half action\r
\r
Overloads\r
\r
2: +5ft radius\r
\r
Grants you a sixth sense to detect creatures with hostile intent towards you within the range, LoS permitting. Perceive Magic is rolled for this sense, opposed by con.`,bpCost:5,affinityReq:"4(W|B),(9)",colorContributions:{w:2,u:0,b:2,r:0,g:0}},{category:"Spell",name:"Detect Life",description:"Detect living creatures in a forward facing cone",rulesText:`SELF\r
5ft cone\r
Casting this spell is a half action\r
\r
Overloads\r
\r
2: +5ft radius\r
\r
Grants you a sixth sense to detect creatures with hostile intent towards you within the range, LoS permitting. Perceive Magic is rolled for this sense, opposed by stealth.`,bpCost:5,affinityReq:"WG",colorContributions:{w:2,u:0,b:0,r:0,g:2}},{category:"Spell",name:"Detect X",description:"As Detect Life, only one type of creature, color alignment, etc.",rulesText:`SELF\r
5ft cone\r
Casting this spell is a half action\r
\r
Overloads\r
\r
2: +5ft radius\r
\r
Grants you a sixth sense to detect creatures with hostile intent towards you within the range, LoS permitting. Perceive Magic is rolled for this sense, opposed by stealth.`,bpCost:5,affinityReq:"WBUG",colorContributions:{w:2,u:2,b:2,r:0,g:2}},{category:"Spell",name:"Dispel Magic",description:"Dispell ongoing magical effects.",rulesText:`INST SINGLE/AOE\r
\r
Spellcasting roll is opposed by the spellcasting roll of the magical effect(s). If the net hits plus 2* CAST STAT is greater than the 2* CAST STAT of the magical effect, the magical effect ends.\r
\r
Overload\r
\r
2: +5ft diameter AoE\r
2: +1 effective cast stat for dispelling`,bpCost:20,affinityReq:"12(W|U|G),(15)",colorContributions:{w:8,u:8,b:0,r:0,g:8}},{category:"Spell",name:"Elemental Blast",description:`F elemental damage, purchased per element type\r
W-radiant\r
U-Cold\r
B-Acid, dark\r
R-Lighting, fire\r
G-Acid`,rulesText:`INST/SUST\r
Touch (non provoking), ranged\r
DV = CS+1 (ELEMENT)\r
Resist = Dodge,Block\r
Soak = Armor\r
\r
Overloads\r
\r
2: +1DV\r
2: AoE per 5ft diameter, (note that it starts at 5ft effectively) \r
4: Sust (repeat the attack at the target location at the end of every round it is sustained. This repeat attack is always treated as an AoE. You may move the target area of this sustained spell as a half action.)\r
\r
This attack does elemental damage of the chosen type, fixed upon purchase of ability.`,bpCost:5,affinityReq:"4*C*,(9)",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Spell",name:"Elsewhere Impulse",description:"Mind affecting mass AoE incapacitate",rulesText:`This spell is cast with three consecutive full actions over three consecutive turns, resolving as the third full action is spent.\r
\r
INST AoE\r
eDV: CS+5\r
\r
Mental/Mental soak\r
\r
Targets: One 40ft radius area.\r
\r
Effects\r
0: The target may not both move and take half/full actions until the end of the next round.\r
1: As 0, the target is also blinded and deafened\r
5: As 1, all the target's senses are suppressed\r
9+: As 5, the target is also stunned.\r
\r
Overloads\r
\r
2: +1 DV`,bpCost:5,affinityReq:"12B,(18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"End of Days",description:"AoE save or die",rulesText:`This spell is cast with three consecutive full actions over three consecutive rounds, resolving after the third full action is spent.\r
\r
INST AoE\r
eDV: CS+5\r
\r
Physical resist/physical soak\r
Targets that would take any damge from this ability instead lose 1 LUK, if they cannot lose 1 LUK they instead die.\r
\r
Targets: 50ft Diameter.\r
\r
Overloads\r
\r
2: +1 DV\r
2: +10ft diameter`,bpCost:50,affinityReq:"24B,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Energy Wall",description:"1 point of Armor and Structure rating per hit. Barrier regenerates at start of next turn.",rulesText:`SUST\r
\r
CS/2 * 5ft length, 5ft height. CS*2 health. WIL*2 barrier rating. Wall health replenishes end of round.\r
Attacks creatures that enter, or are adjacent at end of round, with Spellcasting for CS+5 DV. Wall cannot be cast overlapping creatures.\r
\r
Physical res / armor soak\r
\r
Overloads\r
\r
2: +1 DV\r
2: +5ft length\r
2: +5ft height\r
1: +2 hp\r
1: +1 barrier rating`,bpCost:5,affinityReq:"WUGRB",colorContributions:{w:4,u:4,b:4,r:4,g:4}},{category:"Spell",name:"Eye of the Hurricane",description:"Create a wind effect centered on yourself that knocks others back",rulesText:`INST AOE SELF\r
5ft radius (from self)\r
eDV = CS + 5\r
\r
Physical Resist\r
Physical Soak\r
\r
0: no effect\r
1: 5ft pushback\r
9: prone\r
each 2 beyond, +5ft pushback\r
\r
Overloads:\r
\r
2: +1 eDV\r
3: +5ft radius\r
\r
Make an opposed check against adjacent targets' Physical Resist using your spellcasting dicepool. On success, they are driven back. Succeed by 3 or more and they are knocked prone. Succeed by 6 or more and they are sent flying.`,bpCost:5,affinityReq:"UG",colorContributions:{w:0,u:4,b:0,r:0,g:4}},{category:"Spell",name:"Finger of Death",description:"Single target save or die",rulesText:`INST\r
eDV: CS-1\r
\r
Dodge or block\r
physical soak\r
\r
Overloads\r
\r
2: +1 eDV\r
\r
Targets that do not fully soak this ability instead lose 1 LUK, if they cannot lose 1 LUK they instead die.`,bpCost:30,affinityReq:"12B,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Flash Freeze",description:"Damage init with ice",rulesText:`INST, DIRECT, AOE (centered on self)\r
eDV = CS+5 (5ft radius)\r
\r
Dodge\r
Armor soak\r
\r
Overloads\r
\r
2: +1 eDV \r
2: +5ft radius\r
\r
Flash Freeze does no damage, though it still applies the resulting DV as initiative damage.`,bpCost:10,affinityReq:"4U,(9)",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Spell",name:"Fling",description:"Toss object as if with STR = MAG/2",rulesText:`INST TRGT\r
Throw an object with effective STR = CS-2\r
\r
When throwing a weapon or other similarly sized item (limited to weapons of your size) you may resolve the fling as an attack roll when directing the object at a specific target. When throwing larger objects the item is treated as a falling object and creatures in the target zone are entitled to a dodge(2) threshold check to avoid it.\r
\r
Overloads\r
\r
2: +1 effective STR`,bpCost:5,affinityReq:"3R,(6)",colorContributions:{w:0,u:0,b:0,r:4,g:0}},{category:"Spell",name:"Flying",description:"Very powerful, so yes much fly",rulesText:`SUST (SELF)\r
\r
Grants flight rank 1\r
4: +1 flight rank\r
3: +1 allied target`,bpCost:60,affinityReq:"15U,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Fog",description:"A dense blanket of fog rolls in clouding vision.  Fog moves into the region.  Everyone inside can only see 10 ft away clearly and 20 ft dimly.  Fog rolls into lower regions in the area.  If on higher elevations, the fog will dissipate faster.  Fog will not sustain in high winds or existing rainstorms.",rulesText:`SUST\r
5ft diameter per CS\r
\r
first 5ft of fog grant moderate concealment, 10ft+ total concealment.\r
\r
Overloads\r
\r
3: +5ft diameter`,bpCost:5,affinityReq:"4(U|G),(9)",colorContributions:{w:0,u:6,b:0,r:0,g:6}},{category:"Spell",name:"Glitterdust",description:"Chance to blind, reveal invis",rulesText:`AOE\r
eDV = CS +3\r
Resist with mental res. Soak with mental soak. \r
\r
final eDV\r
0: target is illuminated for a minute\r
1: plus target suffers -2 vision penalties and attackers get superior ground against the target until end of next round.\r
9: plus target is blinded until the end of the round.\r
\r
Overloads\r
\r
2: +1 eDV\r
2: +5t diameter`,bpCost:5,affinityReq:"4(W/G),(15)",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Spell",name:"Gust of Wind",description:"Magical bullrush based off spell force // up to net hits?",rulesText:`INST AOE\r
eDV = CS\r
5ft cone\r
\r
Physical Resist\r
Physical Soak\r
\r
Overloads:\r
\r
2: +1 eDV\r
2: +5ft radius\r
\r
For every 4 applied eDV push the target 1 square, pushing 3+ squares knocks the target prone.`,bpCost:5,affinityReq:"RG",colorContributions:{w:0,u:0,b:0,r:4,g:4}},{category:"Spell",name:"Haste",description:"5 more speed per 2 HITS up to FORCE HITS",rulesText:`SUST TRGT(SELF)\r
Recipient gains 5 speed per CS/2\r
Casting this spell is a half action\r
\r
Overloads\r
\r
4: +5ft bonus`,bpCost:5,affinityReq:"3(U|R),(6)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Spell",name:"Hush",description:"Applies penalty to those attempting to hear the subject",rulesText:`SUST SINGLE/AOE TRGT(SELF)\r
Inflict CS/2 penalty on audio perception checks attempting to perceive subject \r
Casting this spell is a half action\r
\r
Overloads:\r
\r
4: +1 penalty\r
4: +5ft radius`,bpCost:5,affinityReq:"UB",colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Spell",name:"Ice Conjuring",description:"Shape and conjure ice",rulesText:`INST\r
\r
You can conjure ice into any shape that suits your purpose. While its possible to make crude coffers, doors, and so forth with this function, fine detail isnt possible. (10 cubic feet per CS/2). For surfaces you can choose rough (nonslip) or smooth (checks required) ice. Ice has (3 HP per cubic foot and barrier rating 5) . (40 cubic feet per CS/2) of existing ice may be reshaped instead. Ice cannot be conjured into occupied space, cannot exert force in the conjuring process, or be conjured flush with intricate surfaces.\r
\r
Overloads:\r
\r
(2): +10 cubic feet conjured\r
(2): +40 cubic feet reshaped\r
\r
You can form ice with focused detail into an object that suits your purpose. You may create multiple items as part of the same action up to a total of CS/6 items. If shaping the item from existing ice, you may instead create one item per CS/2.\r
\r
Overloads:\r
(6): +1 item with no preexisting ice\r
(2): +1 item with preexisting ice\r
\r
You can flash freeze existing water and liquids that are not part of living or animate creatures, you may be able to use this as an attack against specific creatures with your GM's discretion (A creature formed entirely of water). If the objects are attended they are entitled to resist.\r
\r
(If targeting attended liquids)\r
eDV = CS+4\r
Mental resist/Physical soak\r
Freeze 5 cubic feet per unsoaked eDV\r
\r
Overloads:\r
(2): +1 eDV`,bpCost:25,affinityReq:"7U,(15)",colorContributions:{w:0,u:8,b:0,r:0,g:0}},{category:"Spell",name:"Ignite",description:"Set a target on fire",rulesText:`INST TRGT\r
eDV = CS-2\r
\r
physical resist\r
\r
ignites target for modified eDV\r
\r
Overloads:\r
\r
2: +1 eDV\r
3: +5ft AoE`,bpCost:5,affinityReq:"4R,(9)",colorContributions:{w:0,u:0,b:0,r:6,g:0}},{category:"Spell",name:"Invisibility",description:"drastically reduce chance to be noticed by sight",rulesText:`SUST SINGLE/AOE TRGT(SELF)\r
CS/2 penalty to being perceived visually.\r
Casting this spell is a half action.\r
\r
Overloads:\r
\r
2: -1 additional penalty\r
2: +5ft radius`,bpCost:10,affinityReq:"7(U|B),(9)",colorContributions:{w:0,u:6,b:6,r:0,g:0}},{category:"Spell",name:"Lay on Hands",description:"Heal lethal",rulesText:`INST DIRECT TRGT(SELF)\r
Heals a wound for up to CS/2\r
\r
Overloads:\r
\r
2: +1 max heal`,bpCost:5,affinityReq:"3W,(6)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Levitate",description:"Levitate objects, people",rulesText:`SUST TRGT\r
Range = 30 ft\r
Lift up to 50kg per CS (single object or clump of objects)\r
Or up to SPELLCASTING individual objects of negligible weight\r
Can only target attended objects if the attendee is willing\r
Cannot move objects that are stuck or restrained\r
\r
Affecting a creature requires an opposed check \r
eDV = CS-1\r
\r
mental/phys\r
\r
0: no effect\r
1+: the target is lifted up and dropped prone if they fail a (2) acrobatics check\r
9+ the target is levitated until the end of the round\r
\r
Overloads\r
\r
2: +1 eDV\r
2: +5ft range\r
\r
You can move the target at a rate of 5ft per half action, or in the case of multiple small objects, 20ft. As a half action you can also set the object(s) to follow you, but they are limited to traveling at the listed speeds per round and move at the end of the round. Targets can be raised at most 30ft off the ground and if moved to be higher will descend safely at 60ft per round.`,bpCost:5,affinityReq:"3U,(6)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Spell",name:"Life drain",description:"force save, heal user, etc",rulesText:`INST INDIRECT\r
Touch\r
CS DV\r
\r
Dodge, block, parry\r
Physical Soak\r
\r
Gain temporary HP equal to half the damage dealt. Damage is dealt as drain damage.`,bpCost:15,affinityReq:"3B,(12)",colorContributions:{w:0,u:0,b:6,r:0,g:0}},{category:"Spell",name:"Lightning Storm",description:"Build up an escalating number of bolts, then unleash them all at once.",rulesText:`INST INDIRECT\r
CS+1 DV\r
\r
Casting a new Lightning Storm starts a Storm Pool at 1. Each subsequent casting of Lightning Storm under the same conditions adds 1 more to the storm pool than the previous casting (+2,+3... etc) up to a maximum of WIL+(mainstat) maximum points in your Storm Pool. As an Extra action you may expend all points in your storm pool to designate the target area for this ability, resolving one single target attack per Storm Pool Point split equally among targets.\r
\r
Overloads:\r
\r
2: +1 DV`,bpCost:30,affinityReq:"9R,(18)",colorContributions:{w:0,u:0,b:0,r:12,g:0}},{category:"Spell",name:"Mage Hand",description:"Hits = STR and AGI of hands, -2 on skills performed with hands",rulesText:`SUST\r
Range = 10 ft\r
CS-2 = STR and AGI of hand.\r
You have mild tactile feedback through the hand but cannot feel temperature\r
\r
Overloads:\r
\r
4: +1 effective STR and AGI\r
2: +5ft range.`,bpCost:5,affinityReq:"3U,(6)",colorContributions:{w:0,u:2,b:0,r:0,g:0}},{category:"Spell",name:"Mask",description:"Disguises an individual. Hits contribute to disguise up to FORCE as cap.",rulesText:`SUST TRGT(SELF)\r
\r
CS/2 bonus to disguise\r
\r
Overloads:\r
\r
4: +1 disguise bonus\r
2: +5ft radius\r
\r
Casting this spell is a half action`,bpCost:10,affinityReq:"1U,1B,1(U|B),(6)",colorContributions:{w:0,u:4,b:4,r:0,g:0}},{category:"Spell",name:"Mass Translocation",description:"All willing allies may exchange places with one another",rulesText:`INST AoE\r
CS/2 * 5ft radius\r
\r
All willing targets within the area may exchange places with one another.\r
\r
Overloads:\r
\r
2: +5ft radius`,bpCost:15,affinityReq:"6(W|U),(12)",colorContributions:{w:4,u:6,b:0,r:0,g:0}},{category:"Maneuver",name:"Memory Cast",description:"Copy spell you recently saw cast",rulesText:`(Same action as targeted spell).\r
Make a perceive magic check against DC (rounds since you saw the spell cast). On success you cast the spell (using your own spellcasting and cast stat, paying for overloads that you have access to etc.)`,bpCost:10,affinityReq:"9U,(18)",colorContributions:{w:0,u:8,b:0,r:8,g:0}},{category:"Spell",name:"Mind Control",description:"Mind Control",rulesText:`TRGT SUST\r
CS+1 eDV\r
Mental Resist\r
Mental Soak\r
\r
0: no effect\r
1: target cannot move if it takes an action on its next turn, or cannot take an action if it moves on its next turn.\r
9: Target is mind controlled until the end of its next turn\r
each  2 beyond: +1 turn MC\r
\r
(clause for more saves to escape. clause for making it permanent)\r
\r
Overloads:\r
\r
2: +1 eDV`,bpCost:40,affinityReq:"10U,(21)",colorContributions:{w:0,u:12,b:0,r:0,g:0}},{category:"Spell",name:"Mindblank",description:"HITS to dice pool against mind affecting and divination up to FORCE/2",rulesText:`SUST SELF\r
CS/2 to dice pool against mind affecting and divination effects.\r
Casting this spell is a half action\r
\r
Overloads\r
\r
4: +5ft radius\r
2: +1 bonus`,bpCost:5,affinityReq:"6(U|B),(12)",colorContributions:{w:0,u:8,b:4,r:0,g:0}},{category:"Spell",name:"Petrify",description:"Petrify target",rulesText:`INST DIRECT TRGT\r
CS +1 eDV\r
Target resists with physical resistance\r
Target then soaks with mental soak\r
\r
0: no effect\r
1: target may either move or use actions on their next turn but not both.\r
9: Target is petrified until the end of the round\r
each 4 beyond: Target is petrified for an additional round\r
\r
overloads:\r
\r
2: +1 eDV`,bpCost:20,affinityReq:"1B,1G,1(G|B),(12)",colorContributions:{w:0,u:0,b:8,r:0,g:4}},{category:"Spell",name:"Phantasm",description:"Create illusory effects. Individuals directly interacting have chance to disbelieve. Indirect interaction has chance to disbelieve or discern the effect is illusory.",rulesText:`SUST\r
Default: stationary image\r
\r
Resisted with mental res/mental soak\r
eDV = CS + 1\r
0: The subject sees through the illusion\r
1+: The target is aware the effect is an illusion, but has difficulty seeing through, treat as partial concelament for things within the illusion.\r
9+: The target believes the effect is real until it is otherwise demonstrated to be an illusion.\r
\r
Overloads:\r
\r
2: +1 eDV\r
2: The phantasm can produce sound\r
2: the phantasm can move`,bpCost:20,affinityReq:"7U,(9)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Spell",name:"Rageful Treason",description:"This turn an enemy attacks their allies in a blinding fury of rage",rulesText:`INST TRGT\r
CS+1 eDV\r
mental res\r
mental soak\r
\r
0: no effect\r
1: target must take the attack action on its next turn\r
9: target considers enemies as allies and allies as enemies on its next turn\r
\r
Overloads:\r
\r
2: +1 eDV\r
4: +5ft diameter`,bpCost:15,affinityReq:"8R",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Spell",name:"Rejuvenate",description:"Heal over time",rulesText:`SUST TRGT(SELF)\r
Heals 2 per round up to CS or full health. Healing occurs at the end of the round.\r
\r
Overloads:\r
\r
1: +1 max heal`,bpCost:5,affinityReq:"4G,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Spell",name:"Renew Vitality",description:"Heal lethal",rulesText:`INST TRGT(SELF)\r
Heals for up to CS/2 lethal damage.\r
\r
Overloads:\r
\r
1: +1 heal`,bpCost:5,affinityReq:"4G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Spell",name:"Seal",description:`Reinforce lock, door, etc against opening, +1 threshold per hit up to FORCE / 2.\r
\r
Unseal`,rulesText:`SUST TRGT\r
\r
+ CS/2 to door/lock threshold\r
_____________________________________\r
+ CS/2 to lockpicking checks\r
\r
Casting this spell is a half action\r
\r
Overloads:\r
\r
2: +1 bonus to lockpicking\r
4: +1 to door/lock threshold`,bpCost:5,affinityReq:"3(W|U|G),(6)",colorContributions:{w:4,u:4,b:0,r:0,g:4}},{category:"Spell",name:"Sending",description:"Send message of X words per hit",rulesText:`INST\r
Send a message of 25 words up to (CS*10) feet to a known recipient.\r
\r
Overloads:\r
\r
3: *10 distance\r
3: send a picture instead`,bpCost:5,affinityReq:"4U,(9)",colorContributions:{w:0,u:2,b:0,r:0,g:0}},{category:"Spell",name:"Shadow",description:"Reduce visibility in an area",rulesText:`SUST AoE\r
Area = 15ft radius, reduce visibility by CS/2\r
\r
Overloads:\r
\r
2: +1 visibility reduction\r
2: +5ft radius`,bpCost:5,affinityReq:"1B,(6)",colorContributions:{w:0,u:0,b:4,r:0,g:0}},{category:"Spell",name:"Shatter",description:"Break objects",rulesText:`DIRECT INST\r
DV = CS+3\r
Can only target objects. Attended objects are entitled to physical resist and physical soak on top of their hardness.\r
\r
Overloads:\r
\r
2: +1 eDV`,bpCost:10,affinityReq:"7(W|R|G),(9)",colorContributions:{w:6,u:0,b:0,r:6,g:6}},{category:"Spell",name:"Sheepstick",description:"The target is turned into a dimminutive animal: squirrel, bunny, sheep (1/1) NOT GOATS, GOATS ARE (0/1)",rulesText:`INST SUST TRGT\r
CS+1 eDV\r
mental resist\r
physical soak\r
\r
0: no effect\r
1: target can't both move and take actions on their next turn\r
9: Target is turned into a small harmless creature until the end of the round. This effect ends early if they are targeted by any hostile effects.\r
each 4 beyond: Effect persists for another round\r
\r
Overloads:\r
\r
2: +1 eDV`,bpCost:30,affinityReq:"10U,(21)",colorContributions:{w:0,u:14,b:0,r:0,g:0}},{category:"Spell",name:"Sleep",description:"Put targets to sleep, damage / other stuff wakes (needs updating for overload and doubling?)",rulesText:`SUST AOE\r
CS+2 eDV\r
(5ft diameter)\r
Target resists with mental resist\r
Target then soaks with mental soak.\r
0: no effect\r
1: the target is staggered on its next turn.\r
5: The target also cannot perform interrupt or full actions.\r
9+: the target is put to sleep for eDV-4 turns, waking on damage.\r
\r
Overloads:\r
\r
2: +1 eDV\r
3: +5ft diameter`,bpCost:10,affinityReq:"6U,(12)",colorContributions:{w:0,u:8,b:0,r:0,g:0}},{category:"Spell",name:"Stasis",description:"Remove target from reality for a turn (needs updating for overload and doubling)",rulesText:`INST TRGT\r
F/2 + 4\r
F/2 +3 eDV\r
Target resists with mental resist.\r
Target soaks with mental soak. If this spell would do damage the target is instead removed from reality for the rest of the round. When removed from reality the target may not take turns, may not be targeted or interacted with. It does not occupy space, time does not pass for it. It returns at the start of the next round in or as close to where it departed from.`,bpCost:20,affinityReq:"6W,6U,(27)",colorContributions:{w:8,u:8,b:0,r:0,g:0}},{category:"Spell",name:"Suggestion",description:"Implant a compulsion in targets mind",rulesText:`INST SINGLE/AOE MIND-AFFECTING TRGT\r
CS+3 eDV\r
Mental resist\r
Mental soak\r
\r
0: no effect\r
1: Suggestion lasts for a minute\r
9: suggestion lasts for an hour\r
each 4 beyond: Double the duration\r
\r
Overloads:\r
\r
2: +1 eDV\r
2: +5ft diameter`,bpCost:5,affinityReq:"4(U|B),(9)",colorContributions:{w:0,u:6,b:6,r:0,g:0}},{category:"Spell",name:"Time Spiral",description:"All creatures involved in combat reroll initiative",rulesText:`AoE INST\r
Aoe 5ft. base.\r
All creatures in the current combat reroll initiative.\r
Overload:\r
+2: +5ft aoe`,bpCost:100,affinityReq:"18U, 30",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Translocating Eye",description:"Two target creatures swap places",rulesText:`INST TRGT\r
Two target creatures within RANGE swap places. If a target is unwilling, target resists with mental res/phys soak\r
eDV = CS-2\r
0: the swap does not occur\r
1+: the swap occurs`,bpCost:15,affinityReq:"6U,(12)",colorContributions:{w:0,u:6,b:0,r:4,g:0}},{category:"Spell",name:"True Seeing",description:"Imbued with visions of the truth, illusions and magical darkness melt from your vision, and all is clear.  Negate up to HITS penalty/bonus from illusions, magical or normal darkness, concealment etc",rulesText:`SUST SELF\r
Ignore up to 1 penalty on visual perception rolls.\r
\r
Casting this spell is a half action\r
\r
Overloads:\r
\r
2: +1 additional penalty ignored`,bpCost:15,affinityReq:"7W,(9)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Truelight",description:"Reduce vision penalties in an area",rulesText:`AOE SUST optional:SELF\r
\r
Casting this spell is a half action. This spell produces a 5ft radius area.\r
Reduce vision penalties in the area by 1.\r
\r
Overloads:\r
2: further reduce penalties by an additional 1\r
1: increase radius by 5ft.`,bpCost:5,affinityReq:"3(W|U|G),(9)",colorContributions:{w:6,u:6,b:0,r:0,g:6}},{category:"Spell",name:"Unto Nowhere",description:"Progressively delete a target from reality",rulesText:`DIRECT SUST\r
eDV = CS+1\r
\r
Mental res / Mental soak\r
\r
Overloads:\r
\r
(2): +1 DV\r
\r
While you sustain this spell the target cannot take any physical actions, the target is immune to all other attacks. On your turn you may spend a full action to repeat the attack, except you lose 1 health for each point of damage you inflict upon the target plus 1 health for each time this instance of the spell has been sustained. If you do not successfully repeat the attack on your turn the spell ends (a successful attack is one that deals damage to the target).`,bpCost:30,affinityReq:"12W,(24)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Wall of Force",description:"1 point of Armor and Structure rating per hit. Barrier regenerates at start of next turn.",rulesText:`SUST\r
This spell produces up to 30 square feet of shimmering, opaque barrier that span between bounding points decided upon by the caster. The barrier cannot exert force or otherwise displace objects as it is created.\r
Barrier rating: 3+CS, barrier hp, 8+CS. Barrier regenerates at start of next turn.\r
Overloads:\r
1: +5 square feet of area\r
2: +1 Barrier Rating`,bpCost:10,affinityReq:"4W,4U,(18)",colorContributions:{w:8,u:8,b:0,r:0,g:0}},{category:"Spell",name:"Warp World",description:"All allies and enemies in the encounter randomly swap positions",rulesText:`INST AOE\r
F/2+2\r
All creatures that fail to save or are willing within F*M*3 ft (round up for squares) randomly swap places. \r
\r
Resolution advice: remove all subjects and mark their locations, roll one by one for each subject's reentry to a location after assigning each location a number.`,bpCost:20,affinityReq:"14R,(18)",colorContributions:{w:0,u:6,b:0,r:12,g:0}},{category:"Spell",name:"Word of Binding",description:"Save or suck no physical actions (needs doubling and overload)",rulesText:`SUST TRGT\r
CS+1 eDV\r
\r
Mental Res\r
Mental Soak\r
\r
0: nothing\r
1: half movement, lose a half action\r
9: Paralyzed 1 turn\r
each 2 additiona, paralyzed +1 turn\r
\r
Overloads:\r
(2): +1 eDV`,bpCost:15,affinityReq:"9W,(18)",colorContributions:{w:12,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Zone of Silence",description:"Silence an area",rulesText:`Sets a threshold of CS/2+4 for casting. Casting within the aoe, the caster must roll above CS/2+4 to cast a spell.\r
Overload:\r
+1: +5ft Aoe\r
+2: +1 threshold`,bpCost:5,affinityReq:"6W, (18)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"1v1 me bro",description:"Ignore full defense, free parries vs. stuff you are fighting",rulesText:"When your target is threatened only by you and you are at most only threatened by your target you ignore that enemy's full defense with melee attacks. After attacking an enemy, the next parry you attempt against that enemy this round costs (0).",bpCost:20,affinityReq:"6W,6R,(15)",colorContributions:{w:5,u:0,b:0,r:5,g:0}},{category:"Stance",name:"Adroit riposte",description:"bonus vs. enemies who are foiled by your parry // only costs (1) to riposte",rulesText:"When your parry prevents an attack from hitting add (NET HITS) to your next attack against that opponent. It only costs (1) to make a riposte. Enemies do not benefit from reach when you are riposting.",bpCost:40,affinityReq:"4W,4U,(15)",colorContributions:{w:5,u:5,b:0,r:0,g:0}},{category:"Stance",name:"Analyze Dweomer",description:"High focus detect and analyze magic",rulesText:"You may make Perceive Magic checks with your spellcasting dicepool, but only for objects you are physically touching or effects you are in contact with.",bpCost:5,affinityReq:"1U,(3)",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Stance",name:"Berserker",description:"full offense",rulesText:"Your dice explode on attack actions. All active defenses cost an additional (5).",bpCost:30,affinityReq:"12(B|R),(15)",colorContributions:{w:0,u:0,b:8,r:8,g:0}},{category:"Stance",name:"Celeritas Dominus",description:"When casting a spell, extra mobility options become available",rulesText:`When casting a...\\nRed: Shift 1; Blue: tele 10ft; RU: choose one\r
When casting a... \\nRed: Shift 2; Blue: tele 15ft; RU; both`,bpCost:10,affinityReq:"8(R/U) per",colorContributions:{w:0,u:8,b:0,r:8,g:0}},{category:"Stance",name:"Center of Attention",description:"Attacks that don't target you provoke",rulesText:"Enemies that take attacks or actions that include your allies but not any creatures with Center of Attention active as target(s) provoke an opportunity attack from you.",bpCost:20,affinityReq:"3W,3B,(15)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Counterspell Stance",description:"Counterspelling costs (5)",rulesText:"Counterspelling costs (5). You are always making passive perception checks to detect magic within 10* (cast stat) feet of you and are aware of what spell is being cast.",bpCost:10,affinityReq:"6U,(12)",colorContributions:{w:0,u:8,b:0,r:0,g:0}},{category:"Stance",name:"dodge stance",description:"Move after dodging",rulesText:"Every time you attempt a dodge you may shift 5ft after resolving the dodge.",bpCost:10,affinityReq:"9(U|B|R),(12)",colorContributions:{w:0,u:6,b:6,r:6,g:0}},{category:"Stance",name:"Horde Culling Stance",description:"bonuses when fighting multiple opponents, ignore some penalties from being outnumbered",rulesText:"2 extra dice on each attack per target when attacking multiple targets with melee. Opponents do not get bonus dice for outnumbering you in melee.",bpCost:5,affinityReq:"4(W/R)",colorContributions:{w:4,u:0,b:0,r:4,g:0}},{category:"Stance",name:"Never Outnumbered",description:"Bonus to evasion for each enemy in sight, up to X",rulesText:"Gain 1 die on dodge and full dodge for each enemy within 60' (LOS and LOE required) to a maximum of half your tradition rank.",bpCost:10,affinityReq:"12(W|R|G),(15)",colorContributions:{w:10,u:0,b:0,r:10,g:10}},{category:"Stance",name:"Prodigal Fighter",description:"Use maneuvers as the opp attack.",rulesText:"When you would make an opportunity attack you may activate a maneuver instead. You still pay the initiative costs of the opportunity attack as well as all initiative costs of the maneuver",bpCost:40,affinityReq:"12W,12U,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Quickfire Storm",description:"Whenever you cast a spell that normally deals no damage, you may chuck a firebolt at an opponent",rulesText:"After you resolve a spellcast that was not an INST or DIRECT combat spell, you may fire a DV = 3+ (CAST STAT) ranged single target lightning bolt",bpCost:20,affinityReq:"7U,7R,(18)",colorContributions:{w:0,u:4,b:0,r:8,g:0}},{category:"Stance",name:"Reach Stance",description:"Increases reach",rulesText:"Adds (RANK) Reach",bpCost:5,affinityReq:"3G,(6) per",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Stance",name:"Rooted Bulwark",description:"While in this stance, you resist all attempts to be moved against your will.  Additionally, at the end of your turns, vines grow from the ground attempting to root all adjacent enemies in place.  If continuously rooted, enemies will become entangled and eventually engulfed in vines and plants.  This stance is ended if the roots are hacked away and is usable the next day or when your nature is regenerated (lol idk what I'm thinking honestly, feel free to rationalize this a lot)",rulesText:`Gain +4 dice to resist all attempts to be moved against your will. \r
At the end of the round vines grow out from your body attempting to root all adjacent enemes in place \r
\r
weapon skill or spellcasting \r
eDV = STR + 4\r
Dodge/parry/grapple\r
Phys Soak\r
1: 1 stage\r
5: 2 stages\r
9+: 3 stages\r
\r
Stages\r
1: rooted\r
2: entangled\r
3: engulfed\r
\r
The vines can be hacked away (BOD+8 health, BOD*2 barrier rating, vines resist treated as dodge 0). The vines can be broken with a Complex Action Strongman greater than BOD/2.`,bpCost:5,affinityReq:"6G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:8}},{category:"Stance",name:"Surging Strikes",description:"Once per turn when you successfully hit with an attack and deal damage, cast a spell",rulesText:"Once per turn when you successfully hit with an attack and deal damage you may cast a spell that has a casting time of no longer than a full action. Casting the spell is done as a nonaction immediately after resolving the triggering attack.",bpCost:60,affinityReq:"12R,12G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"The Blood Tells",description:"Hear and feel all heartbeats within an extended range.  The range increases with blood for the blood god and lust for the lust throne.  Additionally, gain a bonus on active bluff detection against characters with a heartrate.",rulesText:"All heartbeats within (CHA*5 ft) can be heard (DC 2 base). Gain +4 dice on judge intentions rolls against targets that you are aware of, who have a heartbeat.",bpCost:15,affinityReq:"12B",colorContributions:{w:0,u:0,b:12,r:0,g:0}},{category:"Stance",name:"Thicket of Blades",description:"AoO stance DEPRECATED",rulesText:"Attacks of opportunity cost (2/1). DEPRECATED",bpCost:20,affinityReq:`12W,(15)\r
24W,(30)`,colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Threatening Archer",description:"Opponents that move within (Y) of you provoke",rulesText:"Treat all squares within (AGI/2)*5 as threatened by your ranged weapon for purposes of opportunity attacks.",bpCost:50,affinityReq:"16(W|G),(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Unyielding Stance",description:"Ignore wound penalties, falling unconscious as long as you hold your ground, or for one day, WHICHE ER COMES FIRST. If at any point your overflow is filled during this time, you die when this benefit ends.",rulesText:"Ignore wound penalties, falling unconscious as long as you hold your ground, or for one day, WHICHEVER COMES FIRST. If at any point your overflow is filled during this time, you die when this benefit ends.",bpCost:10,affinityReq:"12(W/B)",colorContributions:{w:12,u:0,b:12,r:0,g:0}},{category:"Stance",name:"Vengeful Bulwark",description:"Bonus vs. targets you block",rulesText:"Gain your shield bonus to your dice pool on your attack against a target you have successfully blocked in the past round. You may spend (5) to make an attack against a target you have succesfully blocked, this attack is made with your shield. (reach 0, buckler = 2 dv, med shield = 6 dv, heavy shield = 8dv, tower shield = 12dv)",bpCost:5,affinityReq:"7W,(15)",colorContributions:{w:6,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Willow stance",description:`Get +4 on defense after a turn in which you do not attack. If you did not attack last turn you have +4 on your next attack.\r
 If you do nothing during your turn you do not lose initiative.`,rulesText:"If you have not attacked since your last turn you have +4 dice on your next attack. If you attack with bonus dice from this ability you get +4 dice on your next defense.You can pass your turn once per round at zero initiative loss.",bpCost:25,affinityReq:"9W,(12)",colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Template",name:"Undead",description:"Become undead, with benefits and drawbacks. Multiple options. Vampire, (necropolitan), mummy, skeleton, death knight?",rulesText:`You permanently become undead, gaining benefits and drawbacks according to the specific type selected.\r
\r
General:\r
An undead's BOD does not contribute to its overflow track. Thus by default an undead dies when its physical wounds equal or exceed its health.\r
Undead are immune to poisons, diseases, life drain effects, effects that depend upon physical pain/pleasure/discomfort, and most death effects.`,bpCost:40,affinityReq:"12B",colorContributions:{w:0,u:0,b:12,r:0,g:0}},{category:"Buff",name:"Shifting Form",description:"Change to a new adaptation each time you roll initiative.",rulesText:`Body Buff.\r
\r
Each time you roll initiative roll a 1d6 and gain the following benefit until the end of the round.\r
1: Movement speed increased by 50%\r
2: gain 2 reach\r
3: 2 temp hp\r
4: \r
5: \r
6: \r
\r
Rank 2: you may roll 1d6 as a Extra action and choose to replace your current buff with the rolled buff.\r
\r
Rank 3: you roll twice for buffs and can sustain two buffs.`,bpCost:0,affinityReq:"3U, 3G, (9) per",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Spare a hand?",description:"Grow extra limbs!",rulesText:"Grow 2 extra limbs",bpCost:10,affinityReq:"",colorContributions:{w:0,u:0,b:8,r:0,g:8}},{category:"Maneuver",name:"Deft Strike",description:"With only a half action remaining, make an attack with a light weapon",rulesText:"half action. You must have already used one of your half actions this round. Make an attack with a light weapon.",bpCost:40,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Detaining Strike",description:"Attack inflicts dice penalty on enemy's attacks for the rest of the round",rulesText:"Make a melee attack at +4 eDV. This attack is resisted by Dodge,block,parry/mental. This attack does no damage. Inflict the unsoaked eDV as a penalty on the enemy's attacks until the end of the round.",bpCost:0,affinityReq:"W",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Ethereal  Slip",description:"As spacial slip but turn invisible instead of teleport",rulesText:"",bpCost:5,affinityReq:"W",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Last Word",description:"spend init to prevent enemies from reacting to your nonaction",rulesText:"(5) as part of a nonaction ability. No abilities can trigger in response to the activation or resolution of the empowered ability.",bpCost:40,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Linguistics",description:"After some time, puzzle out any written language",rulesText:"After some time, puzzle out any written language",bpCost:10,affinityReq:"5(U|B),(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"One with the scene",description:"You may disguise yourself as inanmiate objects",rulesText:"You may attempt a disguise check to appear as an object of roughly your size at no penalty to the check. This check is performed in one round. Targets observing you when you begin this check automatically see through the disguise.",bpCost:5,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Return to Sender",description:"Force an effect back onto enemy when you save",rulesText:"(5) when you fully soak an attack or ability that carries a status effect rider. The originating creature must soak against the effect as if it had been the original target.",bpCost:20,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Bomb making",description:"Create rudimentary explosive devices for battle",rulesText:"",bpCost:20,affinityReq:"2R",colorContributions:{w:0,u:0,b:0,r:2,g:0}},{category:"Passive",name:"Friend of the Less Fortunate",description:"Something about you, and your background, lets you get along well with the less fortunate.",rulesText:"",bpCost:5,affinityReq:"1W,(6)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Keen Eyed Tracker",description:"Bonus on tracking, negate penalties by using multiple methods to discern concealed tracks",rulesText:"",bpCost:5,affinityReq:"4(W/G)",colorContributions:{w:4,u:0,b:0,r:0,g:4}},{category:"Passive",name:"Man of K'Hull Duade",description:"Ignore impediments and later barriers when you charge",rulesText:`Ignore most difficult terrain when charging\r
_______________\r
Ignore all difficult terrain when charging\r
_______________\r
Can make a check when charging to run through barriers or displace creatures\r
_______________\r
Check made to bypass barriers and displace creatures is at a bonus`,bpCost:[5,10,15,20],affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Peerless Tracker",description:"Track all manner of things, even magical auras",rulesText:"",bpCost:5,affinityReq:"7G,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Regional Adaptation",description:"Pick a region/climate, bonuses for enduring things typical to the area. Knowledge about area, etc",rulesText:"",bpCost:2,affinityReq:"2G",colorContributions:{w:0,u:0,b:0,r:0,g:2}},{category:"Passive",name:"Speed Read",description:"You can read at astonishing speed",rulesText:"You can read a full page of text in six seconds getting a general idea of its contents.",bpCost:5,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Stifle",description:"You can now counterspell maneuvers and other activated abilities",rulesText:"You can now use counterspell to negate activated abilities and maneuvers. If the given ability does not generate an opposed check normally then the activating creature defends with",bpCost:0,affinityReq:"UG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Unbalancing",description:"Gain (bonus) against enemies you have recently dodged",rulesText:"Superior ground against enemies you dodged since the end of the last round.",bpCost:0,affinityReq:"B",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Unyielding Focus",description:"Can't be counterspelled, can't be foiled",rulesText:"Your abilities cannot be countered or interrupted.",bpCost:0,affinityReq:"WG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Control Weather",description:"Control local weather",rulesText:"",bpCost:20,affinityReq:"6U6(G/R)",colorContributions:{w:0,u:6,b:0,r:6,g:6}},{category:"Spell",name:"Alarm",description:"Sets a ward upon an area that, if it detects things that meet specified conditions, sets off an alarm.",rulesText:"",bpCost:5,affinityReq:"WU",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Animate Object",description:"Animate an object with varying degrees of control",rulesText:"",bpCost:15,affinityReq:"6(W/U)",colorContributions:{w:6,u:6,b:0,r:0,g:0}},{category:"Spell",name:"Antipathy",description:"Repell types of creatures from an area",rulesText:"RITUAL",bpCost:0,affinityReq:"14W",colorContributions:{w:14,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Chaosmorph",description:"The target is turned into a dimminutive animal or a giant beast, as polymorph, or dino/bear/rhino (5/5)",rulesText:`INST SUST TRGT\r
F/2+1, F=BOD+SIZEMOD\r
On success vs. 2x targets BOD the victim is changed. Flip a coin.\r
Heads: (1/1)\r
Tails: (5/5)`,bpCost:10,affinityReq:"",colorContributions:{w:0,u:12,b:0,r:12,g:0}},{category:"Spell",name:"Detention",description:"Choose Spells or maneuvers, target can't use the chosen on its next turn.",rulesText:`INST TRGT\r
F/2+2\r
Target opposes with MENTAL\r
Need F+net hits > target's WIL *2\r
Casting this spell is a half action\r
On success choose Maneuvers or Spells. The target cannot use the selected type of ability on its next turn.`,bpCost:0,affinityReq:"WU",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Earthshape",description:"Move/reshape the earth",rulesText:`F/2 + 3\r
Shift up to 200kg of earth per net hit, forming it with minimal control over finer details.`,bpCost:0,affinityReq:"G",colorContributions:{w:0,u:0,b:0,r:0,g:6}},{category:"Spell",name:"Embiggen",description:"Increase size of target ally",rulesText:`SUST, TRGT(SELF)\r
F/2+5\r
F1: +1 size\r
F5: +2 size\r
F9: +3 size`,bpCost:15,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:8}},{category:"Spell",name:"Explosive Runes",description:"Create an explosive magical trap that triggers upon being read",rulesText:"",bpCost:10,affinityReq:"8R",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Spell",name:"Fire Conjuring",description:"Create, manipulate fire",rulesText:"",bpCost:25,affinityReq:"R",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Mirror Image",description:"Create multiple illusiory duplicates",rulesText:"SUST",bpCost:0,affinityReq:"U",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Resist Energy",description:"Create ward that absorbs energy damage of a type specified at casting",rulesText:"",bpCost:10,affinityReq:"WG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Seeping Deluge",description:"A flash flood hits the area. Water swells, swallowing up the ground.  Creatures must seek saftey among trees, boulders, or rooves.  The deluge may take hours or days to pass depending on how flat the surrounding region is.",rulesText:"",bpCost:30,affinityReq:"6U",colorContributions:{w:0,u:6,b:0,r:0,g:0}},{category:"Spell",name:"Sleetstorm",description:"Blinding freezing sleet pelts down from the skys. A sleetstorm begins.  If it is summertime, a hailstorm may appear instead.  Hailstorms hurt and break things but dont do anything else.  Sleetstorms make the ground icy and extingquish campfires, torches, etc as well as reducing vision down to 10ft.  Sleetstorms rarely last more than a day, but in harsh winters can remain for a week.",rulesText:"",bpCost:20,affinityReq:"6(U/R)",colorContributions:{w:0,u:4,b:0,r:6,g:0}},{category:"Spell",name:"Tornado",description:"The wind whips up, injuring flying creatures and blowing stuff over.  A windstorm picks up in the region blowing sails, grounding flyers, and overall making a ruccus of anything not tied down.  Lasts as long as it takes a high pressure system to dissapate",rulesText:"",bpCost:20,affinityReq:"6(U/G)",colorContributions:{w:0,u:4,b:0,r:0,g:6}},{category:"Buff",name:"Avatar of Destruction",description:"",rulesText:"",bpCost:100,affinityReq:"24R,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Size control",description:"shrink / grow",rulesText:"",bpCost:0,affinityReq:"6(U/G)",colorContributions:{w:0,u:6,b:0,r:0,g:6}},{category:"Debuff",name:"Mark",description:"Mark target, easily track target, bonuses against marked target",rulesText:"",bpCost:0,affinityReq:"4G",colorContributions:{w:0,u:0,b:0,r:0,g:4}},{category:"Maneuver",name:"Body Diving",description:"meld into flesh",rulesText:"",bpCost:0,affinityReq:"B",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Crunching Bullrush",description:"Deal damage when bullrushing something into an obstacle",rulesText:"",bpCost:0,affinityReq:"2(G/R/B)",colorContributions:{w:0,u:0,b:2,r:2,g:2}},{category:"Maneuver",name:"Devour",description:"Swallow whole enemies much smaller than you",rulesText:"",bpCost:0,affinityReq:"BG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Fatespin",description:"Force an enemy to choose what they will do on their next turn, this locks them into those actions.",rulesText:"",bpCost:0,affinityReq:"8B",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Find the Gap",description:"Bypass armor in a moment of opportunity",rulesText:"",bpCost:0,affinityReq:"2W",colorContributions:{w:2,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Invoke Paragon",description:"spend luck (or whatever) immediate action gain temporary immunity from death effects.",rulesText:"",bpCost:0,affinityReq:"8W",colorContributions:{w:8,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Puff of Smoke",description:"Flash powder, smoke bomb, or a magical breath; whatever the source of the distraction, the user has dissapeared",rulesText:"As a half action, or for (5) as part of movement, you may toss the flask to generate a 10' cube of smoke that lasts until the start of your next turn. The smoke applies a -2 vision penalty to see into or through it. (scale cooldown with investment or go with daily charges?)",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Something",description:"debuff on hit - cannot take bonus actions (or op atks?)",rulesText:"",bpCost:0,affinityReq:"U",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Spellcatching/Spelltheft",description:"Steal and hold spell effect to reuse later",rulesText:"",bpCost:0,affinityReq:"4U",colorContributions:{w:0,u:4,b:0,r:0,g:0}},{category:"Maneuver",name:"Touch of Purity",description:"Purge various effects from ally",rulesText:"",bpCost:0,affinityReq:"4W",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Volatilize",description:"double dice, 1s count as -1s, if 1/4 are 1s auto fail",rulesText:"",bpCost:0,affinityReq:"UR",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Wild Ricochet",description:"Cast a copy of a spell being cast and redirect the targets of the spell being cast",rulesText:`(15)\r
\r
Copy single target spell as it's being cast, use the original target as the point of origin for this new spell.\r
\r
Also roll spellcasting vs. original spell, If you beat the spell's roll, choose a new target for it using the original target as the point of origin.`,bpCost:40,affinityReq:"12R,(24)",colorContributions:{w:0,u:0,b:0,r:8,g:0}},{category:"Passive",name:"Animal companion / familiar",description:"Various levels / access / options",rulesText:"",bpCost:0,affinityReq:"2(G/U)",colorContributions:{w:0,u:2,b:0,r:0,g:2}},{category:"Passive",name:"Covert Poisoning",description:"Much easier to poison unsuspecting targets",rulesText:"",bpCost:0,affinityReq:"B / G",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Find the weakspot",description:"Various bonuses granted to combat for identifying fighting styles, armor, weapons",rulesText:"",bpCost:0,affinityReq:"4(W/U)",colorContributions:{w:4,u:2,b:0,r:0,g:0}},{category:"Passive",name:"Think You're Scary?",description:"Resist fear, retalliate against failed fear effects.",rulesText:"Act as if your fear state was 1 lower. Your max fear state is increased by 1. You passively roll active mental against all fear effects. After succeeding on a mental res vs. a fear effect you may spend (5) as an interrupt to attempt intimidation vs. the source of the triggering fear.",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Titan Toppler",description:"Climb enemies much larger than you, benefits, tactics",rulesText:"",bpCost:0,affinityReq:"2(R/W)",colorContributions:{w:2,u:0,b:0,r:2,g:0}},{category:"Passive",name:"Use Magic Device",description:"ignore racial, class, level restrictions on using a magic item",rulesText:"",bpCost:0,affinityReq:"U",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Wise Guesser",description:"When confronted with a pressing choice, be more likely to choose correctly at random.",rulesText:"Whenever deciding between choices at random in a moment of importance (an idle bit of gambling during downtime is hardly important, but if the same game won a handful of scorpions or the key to freedom it's important!) you are 50% more likely to pick the correct choice. Thus picking between two doors would have a 75% of choosing the correct one for pursuing the thief. Or guessing which leg of the chair is shortest is 37.5% (25%*1.5). The GM resolves such rolls secretly and informs the player of what their guessing aptitude hints at.",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Ride the lightning",description:"Teleport by lightning bolt, dependent on clouds",rulesText:"",bpCost:0,affinityReq:"WR",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Scrying",description:"View location, individual or objects remotely from great distance",rulesText:"",bpCost:0,affinityReq:"12U",colorContributions:{w:0,u:12,b:0,r:0,g:0}},{category:"Ritual",name:"Sentinel Ward",description:"ward an area against intruders, alerting you if tresspass occurs.",rulesText:`ward an area against intruders. A (spirit/elemental/etc) observes the area for creatures entering that match your supplied description and can issue verbal warnings and send you and up to N others a mental alarm (max distance?)\r
\r
upgraded: observer can manifest a guardian to attack trespassers`,bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Elemental Trap",description:"Create elemental attack that can be triggered after an arming time",rulesText:"",bpCost:0,affinityReq:"8",colorContributions:{w:8,u:8,b:8,r:8,g:8}},{category:"Spell",name:"Fly",description:"Causes subject(s) to fly, successes influence speed/maneuverability of flight",rulesText:"",bpCost:0,affinityReq:"U",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Phase Lock",description:"Target is bound to this dimension, cannot teleport or phase.",rulesText:"",bpCost:0,affinityReq:"W?",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Phase Lock Field",description:"Region is warded against teleportation and extradimensional access.",rulesText:"",bpCost:0,affinityReq:"W?",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Thoughtsway",description:"mind affecting to determine target's next attack",rulesText:"",bpCost:0,affinityReq:"U",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Tongues",description:"SUST Comprehend all spoken languages",rulesText:"",bpCost:0,affinityReq:"WUBRG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Transmorgriphy Snake",description:"Turn linked chain or rope into a snake.  Can be used to release shackles or rope bonds.  Snake can be venomous if (G).",rulesText:"",bpCost:0,affinityReq:"BUG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Aura",name:"Stifling Presence",description:"silence?",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Fusion",description:"Temporarily merge with target willing ally, forming a fusion of stats and abilities.",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Overdrive",description:"costs drain to trigger, various general combat bonuses",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Primeval Embodiment",description:"",rulesText:"",bpCost:0,affinityReq:"20G",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Unchained Instinct",description:"",rulesText:"",bpCost:0,affinityReq:"20R",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Craft",name:"Advanced alchemical creation",description:"Create smoke bombs, flashers,",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Meld into stone",description:"",rulesText:"",bpCost:0,affinityReq:"G",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Shield Slam",description:"Generate shockwave with shield",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Turn X (undead, etc)",description:"Repel abhorrent entities of a specific type, varporize weaker entities",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Volley",description:"Fire multiple projectiles as one attack",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Metamagic",name:"Implement Focus",description:"You cannot cast without your implement. Choose an implement, gain minor benefits from it",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Enduring Fortitude",description:"Temp HP decays slower",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Guild Membership",description:"",rulesText:"(codified tiered access to guild benefit stuff)",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Pactmarked",description:"You have a pact with a powerful entity that grants boons and drawbacks",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Rite of Eternal Return",description:"So long as your remains are treated to the proper preparation and one hour ritual, and you've been dead less than a day, you rise in perfect condition next sunrise/sunset/noon/midnight. Upon rising your luk pool becomes 0.",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Sense Heretic",description:"Detect heresy as appropriate for your viewpoint",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Souleater",description:"",rulesText:"",bpCost:0,affinityReq:"B",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Unarmed Master",description:"Improve unarmed attacks",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Artillery Usage",description:"Crew, understand, use ballista, cannon, boardplank",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Astral Readings",description:"star reading, navigation, cardinal direction, weather events",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Fencing and Smuggling",description:"Abiliity to disguise goods and convince buyers that said goods are not stolen",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Geometric interpolation",description:"Feel the tectonics in the earth, shape and bend them to your will",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Predict Storm",description:"With some % of accuracy, predict storms (hurricane, sandstorm, and more)",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Skill",name:"Shot and Blade",description:"Duel wield, firing a one handed ranged weapon and a one handed sword. May have different targets, no penalties or provokes from shooting ranged",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Animate Dead",description:"",rulesText:"",bpCost:0,affinityReq:"B",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Cloud of Knives",description:"Conjure a variable amount of knives that you can fire off individually as an attack",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Meteor",description:"",rulesText:"",bpCost:0,affinityReq:"R",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Scrying Ward",description:"",rulesText:"",bpCost:0,affinityReq:"WU",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Inner Focus",description:"Holding focus mechanics, bonuses while holding focus, can be shaken out of focus, increasingly hard to sustain focus",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Conjure personal steed",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Grace Under Pressure",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Bone Storm",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Unbalancing Blow",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Duress",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Familiar",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Pain Begets Clarity",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Party Animal",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Quick healer // regeneration",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Imbue Region",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Ritual",name:"Imprison",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Adapt Body",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Blind",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Charm",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Conjure Weapon",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Constricting Field",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Creation, Permanent",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Creation, Temporary",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Discern Alignment",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Earthquake",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Know Nemesis",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Magic Jar",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Poison Burst",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Poison Cloud",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Share Pain",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"X Wall",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Zone of Truth",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Sneaky",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Finish Him",description:"Deal extra damage to heavily wounded targets",rulesText:"(5) Make an attack against a target at or below 1/3 health/stam. Apply HITS to damage rather than NET HITS. As an extra action you may attempt a DC 2 insight check to discern which currently discernible creatures are valid targets for this ability.",bpCost:10,affinityReq:"5B,(21)",colorContributions:{w:4,u:0,b:0,r:0,g:0}},{category:"Stance",name:"Interception Stance",description:"Enemies provoke from a wider range",rulesText:`Add half your movement to your reach for determining which creatures you threaten.\r
\r
If a creature you threaten because of this ability provokes an Opportunity Attack from you, you may spend (5)/(1)/(0) to move to the nearest position your reach would allow you to strike the creature from. This cost is separate from the cost of making the Opportunity Attack.`,bpCost:[10,15,20],affinityReq:`3W,(12)\r
4W,(18)\r
6W,(24)`,colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Break Resolve",description:"Attempt to negate an incoming attack with fear",rulesText:"(5) When you are the only target of an enemy's action. Make an Intimidation attempt against the enemy. If this puts the enemy to 3 or more fear stacks negate the enemy's action.",bpCost:40,affinityReq:"??,(27)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Stoneshaping",description:"",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Echo Strike",description:"Maneuver: Echo Strike: on miss, create a phantom weapon in the targets square. At the end of your next turn this phantom weapon attacks any creature that occupies its space, then disappears",rulesText:"",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Gain Control of a Spell",description:"Change the target of a spell",rulesText:"Spend (5) after counterspelling to steal the spell.  The original caster still rolls drain, but your spellcasting roll is used instead. You gain total control over the stolen spell. You cannot change any chosen modes (i.e. all metamagics and choices of those metamagics) except for targets.  You may reselect all targets, including target creatures or target squares. You may steal a SUST spell, sustaining it yourself, and in the case of target self, having the benefits apply to yourself. Any copies the spell creates are yours to fully control. You pay any costs for and have complete control of any additional spells or abilities generated from the stolen spell.\\",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"BG Capstone",description:"can spend stamina for maneuver initiative costs",rulesText:"You may spend 3 stamina per (5) initiative an ability costs to activate",bpCost:50,affinityReq:"12B,12G,(30)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Warcaster",description:"You may use touch spells as opportunity attacks",rulesText:"You may use touch spells in place of weapon attacks when you make an Opportunity Attack.",bpCost:20,affinityReq:"4W,(9)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Mentor's Flourish",description:"Boost an Ally's attack against enemy",rulesText:`Standard, 1 stamina. \r
Make a weapon attack resisted by mental/mental. Do not apply weapon DV to this attack\r
\r
1: Next ally to attack the target gets advantage on the attack\r
5: The enemy also must use passive defense against the ally's attack`,bpCost:0,affinityReq:"WR",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Adaptive Armor",description:"Automatically activate defenses that are struck on passive",rulesText:"Whenever you are hit by an attack or an effect targeting a passive defense, activate that defense for the rest of the round.",bpCost:0,affinityReq:"UG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Soulbond Mementos",description:"Create mementos that may be expended for various effects",rulesText:`Craft up to (CAST STAT) linked mementos. Mementos take 1 minute to craft and cost 1 MANA.\r
\r
A memento may be expended as follows\r
\r
- (5): grant an ally an active defense as an interrupt, but only for one attack\r
- (5): take a hit for an ally, swapping places and suffering the applied DV. No effect if the hit also targets you\r
- (5): Transfer one temporary negative status effect from an ally to you (like dots, not buffs)`,bpCost:0,affinityReq:"WG",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"BR Debuff Damage",description:"Automatically damage enemies you debuff",rulesText:"Whenever a debuff gets applied to an enemy as a result of them failing a roll against one of your effects, that enemy loses 2 HP.",bpCost:0,affinityReq:"BR",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Buff",name:"Rage",description:"Gain durability at the cost of active defenses",rulesText:`(free action)\r
\r
Gain 2 damage dampening and ignore wound penalties.\r
Gain 1 automatic hit on weapon attacks.\r
you cannot actively dodge block or parry when raging.\r
\r
When rage ends suffer stamina damage equal to the number of rounds it was active (min 1)\r
\r
you may activate rage for (5) in response to suffering damage, before the damage has been applied (including on an attack that you actively dodged, blocked or parried)\r
\r
It is a full action to dismiss rage.`,bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Maneuver",name:"Pummel to Dust",description:"Gain increasing attack bonuses against same target with this maneuver",rulesText:"Make a weapon attack. Add +1DV and +1 die for each previous time you have attacked the current target with this maneuver, up to +5. This bonus resets when you attack a different target with this maneuver, or one minute passes without using this maneuver.",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Evolving defenses",description:"Randomly activate defenses for free",rulesText:"At the start of your turn activate a random defense that is not currently active among (dodge, physical, mental). you cannot activate defenses by normal means.",bpCost:0,affinityReq:"",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Passive",name:"Telepathic eavesdropper",description:"listen in on telepathic communications",rulesText:`TR 7 limited, 30 BP\r
\r
10U(21). You are aware of and can listen in on telepathic communications being conducted within 30ft** (test value). Some specific types of communication may reveal your eavesdropping (your con VS insight); unless otherwise spelled out, a mode of telepathic communication cannot detect this eavesdropping.`,bpCost:30,affinityReq:"10U,(21)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Compel",description:"force creature to take basic action",rulesText:`CS+1 eDV\r
1: target is staggered\r
5: order target to take a basic half action or movement\r
9: target is not staggered, two order\r
\r
Overloads\r
(2): +1 eDV\r
(2): +5ft radius`,bpCost:15,affinityReq:"4U,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}},{category:"Spell",name:"Repulsion Blast",description:"Push back a creature, possibly knock it prone",rulesText:`CS+3 eDV\r
\r
Push target applied eDV. Upwards displacement counts double.\r
\r
Other creatures may avoid a pushed victim by dodging original roll with a +6 bonus. Failure to avoid causes them to be pushed along with the colliding victim, splitting all remaining push among the group equally.\r
\r
Collisions or 5+ applied eDV knock victims prone.\r
\r
Overloads\r
(2): +1 eDV\r
(2): +5ft radius`,bpCost:15,affinityReq:"4G,(12)",colorContributions:{w:0,u:0,b:0,r:0,g:0}}];function wt(){const{character:e}=Ui(),t=th,n=nh,r=N.useMemo(()=>Pc(e.attributes),[e.attributes]),a=N.useMemo(()=>Yi(e.tradition),[e.tradition]),o=N.useMemo(()=>Wc(e.skills,t),[e.skills]),s=N.useMemo(()=>Dc(e.attributes.log,e.attributes.int),[e.attributes.log,e.attributes.int]),l=N.useMemo(()=>Gc(e.knowledgeSkills,e.attributes.log,e.attributes.int),[e.knowledgeSkills,e.attributes.log,e.attributes.int]),u=N.useMemo(()=>Bc(e.abilities,n),[e.abilities]),f=N.useMemo(()=>eh(e.attributes,e.tradition,e.skills,t,e.abilities,n,e.knowledgeSkills),[e.attributes,e.tradition,e.skills,e.abilities,e.knowledgeSkills]),h=e.bpBudget-f,y=N.useMemo(()=>Hp(e.tradition),[e.tradition]),g=N.useMemo(()=>e.affinities.w+e.affinities.u+e.affinities.b+e.affinities.r+e.affinities.g,[e.affinities]),m=N.useMemo(()=>$p(e.attributes,e.castStat),[e.attributes,e.castStat]),v=N.useMemo(()=>Qp(e.attributes,e.tradition,e.skills,{lightArmorBonus:e.armorType==="light"?1:0}),[e.attributes,e.tradition,e.skills,e.armorType]),C=N.useMemo(()=>Xp(e.attributes),[e.attributes]),q=N.useMemo(()=>Zp(e.attributes),[e.attributes]),c=p=>{const b=t.find(S=>S.name===p);if(!b)return 0;const k=Ic(p,e.skills,t),T=e.attributes[b.attribute];return Kp(e.tradition,k,T)},d=N.useMemo(()=>e.weapons.map(p=>({weaponId:p.id,dicepool:Jp(p,e.attributes,e.skills,e.tradition)})),[e.weapons,e.attributes,e.skills,e.tradition]);return{attributeCost:r,traditionCost:a,skillCosts:o,knowledgeDiscount:s,knowledgeSkillCosts:l,abilityCosts:u,bpSpent:f,bpRemaining:h,isOverBudget:f>e.bpBudget,affinityPoints:y,affinitiesUsed:g,affinityPointsRemaining:y-g,healthPools:m,defenseStats:v,resistStats:C,soakStats:q,getSkillDicepool:c,weaponDicepools:d,skillDefinitions:t,abilityDatabase:n}}function rh(){const{bpSpent:e,bpRemaining:t,isOverBudget:n}=wt();return i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-base font-medium text-cosmic-grey",children:"BP Spent:"}),i.jsx("span",{className:`text-2xl font-bold ${n?"text-error":"text-cyan-bright"}`,children:e})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-base font-medium text-cosmic-grey",children:"BP Remaining:"}),i.jsx("span",{className:`text-2xl font-bold ${n?"text-error":"text-success"}`,children:t})]}),n&&i.jsxs("div",{className:"flex items-center gap-2 text-error bg-error bg-opacity-20 px-3 py-2 rounded-lg border-2 border-error",children:[i.jsx(Ep,{size:18}),i.jsx("span",{className:"text-sm font-semibold",children:"Over budget!"})]})]})}const ah=[{id:"light",name:"Light",icon:qc},{id:"dark",name:"Dark",icon:jc},{id:"system",name:"System",icon:Ec}];function oh(){const{mode:e,setMode:t}=Oi();return i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:"btn-secondary",children:[e==="light"&&i.jsx(qc,{size:16}),e==="dark"&&i.jsx(jc,{size:16}),e==="system"&&i.jsx(Ec,{size:16}),i.jsx("span",{className:"hidden sm:inline",children:"Mode"})]}),i.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-navy-mid rounded-xl shadow-glow-cyan-md border-2 border-cyan-electric opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-[100] constellation-border",children:i.jsxs("div",{className:"p-4",children:[i.jsx("label",{className:"text-xs font-bold text-cosmic-grey uppercase tracking-wider mb-3 block",children:"Display Mode"}),i.jsx("div",{className:"space-y-2",children:ah.map(n=>{const r=n.icon,a=e===n.id;return i.jsxs("button",{onClick:()=>t(n.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all ${a?"bg-cyan-electric text-navy-deep shadow-glow-cyan-sm":"hover:bg-navy-light text-cosmic-white"}`,children:[i.jsx(r,{size:18}),i.jsx("span",{className:"text-sm font-medium",children:n.name})]},n.id)})})]})})]})}const Lc="shimmering-reach-character",il={Running:"Marathoner",Swimming:"Traversal",Deception:"Con",Persuasion:"Negotiation","Sleight of Hand":"Legerdemain",Lockpicking:"Thievery"},ih=new Set(["Athletics","Influence","Subterfuge","Tracking","Outdoorsmanship","Leadership","Investigation","First Aid","Parry","Block","Melee Weapons","Ranged Weapons","Unarmed Combat","Light Weapons","Heavy Weapons","Knowledge: Arcana","Knowledge: History","Knowledge: Nature","Knowledge: Religion","Knowledge: Geography","Knowledge: Politics","Knowledge: Engineering","Knowledge: Planes"]),sh=new Set(["Blades","Axes","Melee Weapons","Ranged Weapons","Unarmed Combat","Light Weapons","Heavy Weapons"]);function Uc(e){var a;const t={};for(const[o,s]of Object.entries(e.skills))if(il[o]){const l=il[o];t[l]=Math.max(t[l]||0,s)}else{if(ih.has(o))continue;t[o]=s}const n=((a=e.weapons)==null?void 0:a.map(o=>o.skillName&&sh.has(o.skillName)?{...o,skillName:"Weapon"}:o))||[],r=e.knowledgeSkills||[];return{...e,skills:t,weapons:n,knowledgeSkills:r}}function lh(e){try{const t=JSON.stringify(e);localStorage.setItem(Lc,t)}catch(t){throw console.error("Failed to save character:",t),new Error("Failed to save character to browser storage")}}function uh(){try{const e=localStorage.getItem(Lc);if(!e)return null;const t=JSON.parse(e);return Uc(t)}catch(e){return console.error("Failed to load character:",e),null}}function ch(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=`${e.name.replace(/\s+/g,"-")}-${Date.now()}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}async function dh(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=a=>{var o;try{const s=(o=a.target)==null?void 0:o.result,l=JSON.parse(s);if(!l.id||!l.name||!l.attributes)throw new Error("Invalid character file format");t(Uc(l))}catch(s){n(new Error("Failed to parse character file: "+s.message))}},r.onerror=()=>{n(new Error("Failed to read file"))},r.readAsText(e)})}function fh(){const{character:e,setName:t,setBPBudget:n,loadCharacter:r,resetCharacter:a}=vt(),{themeColors:o}=Oi(),{showToast:s}=Rc(),[l,u]=N.useState(!1),f=()=>{confirm(`There is only one save slot in browser storage. Saving will overwrite any previously saved character.
Use Export to keep multiple characters.

Continue?`)&&(lh(e),s("Character saved!","success"))},h=()=>{const v=uh();v?(r(v),s("Character loaded!","success")):s("No saved character found.","warning")},y=()=>{ch(e)},g=()=>{const v=document.createElement("input");v.type="file",v.accept=".json",v.onchange=async C=>{var c;const q=(c=C.target.files)==null?void 0:c[0];if(q)try{const d=await dh(q);r(d),s("Character imported!","success")}catch(d){s("Failed to import: "+d.message,"error")}},v.click()},m=()=>{confirm("Are you sure you want to create a new character? Unsaved changes will be lost.")&&a()};return i.jsx("header",{className:`${o.headerGradient} border-b-4 border-cyan-electric shadow-glow-cyan-md constellation-border no-print relative z-50`,children:i.jsxs("div",{className:"container mx-auto px-4 py-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-cyan-electric flex items-center justify-center shadow-glow-cyan-md animate-pulse-glow",children:i.jsx(zi,{className:"text-navy-deep",size:28})}),i.jsx("h1",{className:"text-4xl font-bold text-cosmic-white drop-shadow-lg tracking-header",children:"Shimmering Reach"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"text",value:e.name,onChange:v=>t(v.target.value),className:"text-2xl font-semibold px-5 py-3 input-standard",placeholder:"Character Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:m,className:"btn-secondary",title:"New Character",children:[i.jsx(Nc,{size:16}),i.jsx("span",{children:"New"})]}),i.jsxs("button",{onClick:f,className:"btn-primary",title:"Save to Browser",children:[i.jsx(Gp,{size:16}),i.jsx("span",{children:"Save"})]}),i.jsxs("button",{onClick:h,className:"btn-secondary",title:"Load from Browser",children:[i.jsx(Pp,{size:16}),i.jsx("span",{children:"Load"})]}),i.jsxs("button",{onClick:y,className:"btn-secondary",title:"Export to JSON",children:[i.jsx(Mp,{size:16}),i.jsx("span",{children:"Export"})]}),i.jsxs("button",{onClick:g,className:"btn-secondary",title:"Import from JSON",children:[i.jsx(Op,{size:16}),i.jsx("span",{children:"Import"})]}),i.jsx(oh,{})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rh,{}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>u(!l),className:"text-lg font-semibold text-cyan-bright hover:text-cyan-electric transition-colors",children:["Budget: ",i.jsx("span",{className:"text-2xl font-bold",children:e.bpBudget})]}),l&&i.jsx("input",{type:"number",value:e.bpBudget,onChange:v=>n(parseInt(v.target.value)||0),className:"w-28 px-3 py-2 input-standard text-lg font-semibold",onBlur:()=>u(!1),autoFocus:!0})]})]})]})})}function Oc({value:e,min:t,max:n,step:r=1,onChange:a,label:o,cost:s,showCost:l=!1,disabled:u=!1}){const[f,h]=N.useState(!1),[y,g]=N.useState(!1),[m,v]=N.useState(e.toString()),C=N.useRef(null);N.useEffect(()=>{v(e.toString())},[e]);const q=w=>{const j=parseInt(w.target.value);a(j)},c=()=>{h(!0)},d=()=>{h(!1)},p=()=>{g(!0)},b=w=>{v(w.target.value)},k=()=>{const w=parseInt(m);if(isNaN(w))v(e.toString());else{const j=Math.max(t,Math.min(n,w));a(j),v(j.toString())}g(!1)},T=w=>{w.key==="Enter"?k():w.key==="Escape"&&(v(e.toString()),g(!1))},S=(e-t)/(n-t)*100;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-semibold text-cosmic-white",children:o}),i.jsxs("div",{className:"flex items-center gap-2",children:[y?i.jsx("input",{type:"number",value:m,onChange:b,onBlur:k,onKeyDown:T,min:t,max:n,className:"w-16 px-2 py-1 text-center input-standard text-lg font-bold",autoFocus:!0}):i.jsx("button",{onClick:p,disabled:u,className:"text-2xl font-bold text-cyan-bright hover:text-cyan-electric transition-colors min-w-[3rem] text-center",children:e}),l&&s!==void 0&&i.jsxs("span",{className:"text-sm font-semibold text-cosmic-grey",children:["(",s," BP)"]})]})]}),i.jsxs("div",{className:"relative pt-2 pb-1",ref:C,children:[i.jsxs("div",{className:"relative h-3 rounded-full overflow-hidden bg-navy-deep border-2 border-navy-light",children:[i.jsx("div",{className:"absolute inset-0 opacity-15",style:{backgroundImage:"url(/constellation-pattern.svg)",backgroundSize:"100px 100px"}}),i.jsx("div",{className:"absolute top-0 left-0 bottom-0 bg-gradient-to-r from-cyan-muted to-cyan-electric transition-all duration-200",style:{width:`${S}%`,boxShadow:f?"0 0 12px rgba(0, 229, 255, 0.6)":"0 0 6px rgba(0, 229, 255, 0.3)"}}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-between px-1",children:Array.from({length:Math.floor((n-t)/r)+1},(w,j)=>{const O=(t+j*r-t)/(n-t)*100;return i.jsx("div",{className:"w-1 h-1 rounded-full bg-cosmic-dim opacity-40",style:{position:"absolute",left:`${O}%`,transform:"translateX(-50%)"}},j)})})]}),i.jsx("input",{type:"range",min:t,max:n,step:r,value:e,onChange:q,onMouseDown:c,onMouseUp:d,onTouchStart:c,onTouchEnd:d,disabled:u,className:"absolute top-0 left-0 w-full h-8 opacity-0 cursor-pointer disabled:cursor-not-allowed",style:{zIndex:10}}),i.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-cyan-electric border-3 border-navy-mid shadow-glow-cyan-md transition-all pointer-events-none",style:{left:`${S}%`,transform:`translate(-50%, -50%) scale(${f?1.2:1})`,boxShadow:f?"0 0 20px rgba(0, 229, 255, 0.8)":"0 0 10px rgba(0, 229, 255, 0.5)"}})]})]})}const sl={bod:"Body",agi:"Agility",rea:"Reaction",str:"Strength",wil:"Willpower",int:"Intuition",log:"Logic",cha:"Charisma",luk:"Luck"};function ph(){const{character:e,setAttribute:t}=vt(),{attributeCost:n}=wt(),r=a=>{const o=e.attributes[a],s=Mc(o);return i.jsx("div",{className:"py-4 border-b border-navy-light last:border-0",children:i.jsx(Oc,{label:sl[a],value:o,min:1,max:10,step:1,onChange:l=>t(a,l),cost:s,showCost:!0})},a)};return i.jsxs("div",{className:"panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx("h2",{children:"Attributes"}),i.jsxs("span",{className:"text-lg font-semibold text-cyan-bright",children:["Total: ",n," BP"]})]}),i.jsx("div",{className:"space-y-2",children:Object.keys(sl).map(r)}),i.jsx("div",{className:"mt-6 p-4 bg-navy-deep rounded-lg border border-navy-light",children:i.jsx("p",{className:"text-sm text-cosmic-grey text-center",children:"Cost formula: (value + value - 2)  2.5"})})]})}const kr=[{id:"w",name:"White",displayName:"W",color:"#FFF8DC",angle:-90},{id:"u",name:"Blue",displayName:"U",color:"#4A90E2",angle:-18},{id:"b",name:"Black",displayName:"B",color:"#A9A9A9",angle:54},{id:"r",name:"Red",displayName:"R",color:"#E74C3C",angle:126},{id:"g",name:"Green",displayName:"G",color:"#27AE60",angle:198}],Cr=[-54,18,90,162,234];function hh(){const{character:e,setAffinity:t}=vt(),{affinityPoints:n}=wt(),r=Object.values(e.affinities).reduce((u,f)=>u+f,0),a=n-r,o=u=>{if(a>0){const f=e.affinities[u]||0;t(u,f+1)}},s=u=>{const f=e.affinities[u]||0;f>0&&t(u,f-1)},l=(u,f)=>{const h=u*Math.PI/180;return{x:200+f*Math.cos(h),y:200+f*Math.sin(h)}};return i.jsxs("div",{className:"flex flex-col items-center gap-6",children:[i.jsx("div",{className:"relative",children:i.jsxs("svg",{width:"400",height:"400",viewBox:"0 0 400 400",className:"drop-shadow-lg",children:[i.jsxs("defs",{children:[i.jsx("pattern",{id:"wheel-constellation",x:"0",y:"0",width:"200",height:"200",patternUnits:"userSpaceOnUse",children:i.jsx("image",{href:"/constellation-pattern.svg",x:"0",y:"0",width:"200",height:"200"})}),i.jsxs("radialGradient",{id:"wheel-bg",cx:"50%",cy:"50%",r:"50%",children:[i.jsx("stop",{offset:"0%",stopColor:"#1A2942",stopOpacity:"1"}),i.jsx("stop",{offset:"100%",stopColor:"#0A1628",stopOpacity:"1"})]})]}),i.jsx("circle",{cx:"200",cy:"200",r:"180",fill:"url(#wheel-bg)",stroke:"#2A3F5F",strokeWidth:"3"}),i.jsx("circle",{cx:"200",cy:"200",r:"180",fill:"url(#wheel-constellation)",opacity:"0.1"}),i.jsx("polygon",{points:Cr.map(u=>{const f=l(u,140);return`${f.x},${f.y}`}).join(" "),fill:"none",stroke:"#00E5FF",strokeWidth:"2",opacity:"0.3"}),(()=>{const u=Math.max(...Object.values(e.affinities),1);return kr.map((f,h)=>{const y=e.affinities[f.id]||0;if(y===0)return null;const g=y/u,m=Cr[(h+4)%5],v=Cr[h],C=l(m,140*g),q=l(v,140*g),c=`M 200 200 L ${C.x} ${C.y} L ${q.x} ${q.y} Z`,d=`gradient-${f.id}`;return i.jsxs("g",{children:[i.jsx("defs",{children:i.jsxs("radialGradient",{id:d,cx:"50%",cy:"50%",r:"50%",children:[i.jsx("stop",{offset:"0%",stopColor:f.color,stopOpacity:"0.05"}),i.jsx("stop",{offset:"100%",stopColor:f.color,stopOpacity:.2+g*.3})]})}),i.jsx("path",{d:c,fill:`url(#${d})`,className:"transition-all duration-300"})]},f.id)})})(),Cr.map((u,f)=>{const h=l(u,140),y=kr[f],g=y&&e.affinities[y.id]||0,m=Math.max(...Object.values(e.affinities),1),v=g/m;return i.jsx("line",{x1:"200",y1:"200",x2:h.x,y2:h.y,stroke:"#00E5FF",strokeWidth:"2",opacity:.2+v*.5},`divider-${f}`)}),kr.map(u=>{const f=l(u.angle,140),h=e.affinities[u.id]||0;return i.jsxs("g",{children:[i.jsx("circle",{cx:f.x,cy:f.y,r:15+h*2,fill:u.color,stroke:h>0?"#00E5FF":"#4A5F7A",strokeWidth:"2",opacity:.8,className:"transition-all duration-300",style:{filter:h>0?`drop-shadow(0 0 ${5+h*2}px ${u.color})`:"none"}}),i.jsx("text",{x:f.x,y:f.y,textAnchor:"middle",dominantBaseline:"central",fill:u.id==="b"?"#E8F4F8":"#0A1628",fontSize:"16",fontWeight:"bold",className:"pointer-events-none select-none",children:u.displayName})]},u.id)}),i.jsx("circle",{cx:"200",cy:"200",r:"60",fill:"#1A2942",stroke:"#00E5FF",strokeWidth:"3",opacity:"0.9"}),i.jsx("text",{x:"200",y:"190",textAnchor:"middle",fill:"#8BA3B8",fontSize:"14",fontWeight:"600",className:"select-none",children:"Affinity Points"}),i.jsxs("text",{x:"200",y:"215",textAnchor:"middle",fill:a===0?"#00FFB8":"#00E5FF",fontSize:"28",fontWeight:"bold",className:"select-none",children:[a,"/",n]})]})}),i.jsx("div",{className:"grid grid-cols-5 gap-4 w-full max-w-2xl",children:kr.map(u=>{const f=e.affinities[u.id]||0;return i.jsxs("div",{className:"flex flex-col items-center gap-2 p-4 rounded-lg bg-navy-mid border-2 border-navy-light hover:border-cyan-electric transition-all",style:{borderColor:f>0?u.color:void 0},children:[i.jsx("div",{className:"text-sm font-semibold",style:{color:u.color},children:u.name}),i.jsx("div",{className:"text-2xl font-bold text-cosmic-white",children:f}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>s(u.id),disabled:f===0,className:"w-8 h-8 rounded-lg bg-navy-light text-cosmic-white font-bold hover:bg-error hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-all",title:`Decrease ${u.name}`,children:""}),i.jsx("button",{onClick:()=>o(u.id),disabled:a===0,className:"w-8 h-8 rounded-lg bg-cyan-electric text-navy-deep font-bold hover:bg-cyan-bright hover:shadow-glow-cyan-sm disabled:opacity-30 disabled:cursor-not-allowed transition-all active:scale-95",title:`Increase ${u.name}`,children:"+"})]})]},u.id)})}),i.jsxs("p",{className:"text-sm text-cosmic-grey text-center max-w-lg",children:["Click the ",i.jsx("span",{className:"text-cyan-bright font-semibold",children:"+"})," buttons to allocate affinity points to each color. Your affinity determines which abilities you can learn."]})]})}const gh=[{value:"log",label:"Logic"},{value:"int",label:"Intuition"},{value:"cha",label:"Charisma"}];function mh(){const{character:e,setTradition:t,setCastStat:n}=vt(),r=e.tradition,a=Yi(r);return i.jsxs("div",{className:"panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx("h2",{children:"Magic"}),i.jsxs("span",{className:"text-lg font-semibold text-cyan-bright",children:[a," BP"]})]}),i.jsxs("div",{className:"mb-8 p-4 bg-navy-deep rounded-lg border-2 border-navy-light",children:[i.jsx(Oc,{label:"Tradition Level",value:r,min:1,max:10,step:1,onChange:t,cost:a,showCost:!0}),i.jsx("div",{className:"mt-4 text-sm text-cosmic-grey text-center",children:"Cost formula: (tradition + 7tradition - 8)  2.5"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"text-base font-semibold text-cosmic-white mb-3 block",children:"Cast Stat"}),i.jsx("select",{value:e.castStat,onChange:o=>n(o.target.value),className:"w-full input-standard text-lg",children:gh.map(o=>i.jsx("option",{value:o.value,children:o.label},o.value))})]}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-cosmic-white mb-4 text-center",children:"Color Affinity Wheel"}),i.jsx(hh,{}),i.jsx("div",{className:"mt-4 text-sm text-cosmic-grey text-center",children:"Affinity points = tradition  3"})]})]})}function yh(){const{character:e,setSkill:t,setGroupSkill:n,addKnowledgeSkill:r,updateKnowledgeSkill:a,removeKnowledgeSkill:o}=vt(),{skillCosts:s,knowledgeSkillCosts:l,knowledgeDiscount:u,getSkillDicepool:f,skillDefinitions:h}=wt(),y=h.filter(c=>c.type==="parent"),g=h.filter(c=>c.type==="individual"&&!c.parentGroup),m=c=>h.filter(d=>d.parentGroup===c),v=c=>m(c).some(p=>(e.skills[p.name]||0)>0),C=c=>{const d=m(c.name),p=e.skills[c.name]||0,b=v(c.name),k=p>0,T=Nt(p,c.costMultiplier),S=d.map(w=>w.name);return i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-3 border-b-2 border-blue-200 dark:border-blue-800 pb-2",children:c.category}),i.jsxs("div",{className:"flex items-center justify-between py-2 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-30 rounded px-2 mb-1",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:"text-sm font-bold text-blue-900 dark:text-blue-300",children:[c.name," ",i.jsx("span",{className:"text-xs font-normal",children:"(Group)"})]}),i.jsx("span",{className:"ml-2 text-xs text-blue-600 dark:text-blue-400",children:"(250% cost)"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"stat-chip border-gray-200 text-gray-600 text-xs",children:c.attribute.toUpperCase()}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"number",min:"0",max:"20",value:p,onChange:w=>n(c.name,Math.max(0,parseInt(w.target.value)||0),S),disabled:b,className:`w-16 input-standard text-center border-blue-300 focus:ring-blue-500 ${b?"opacity-50 cursor-not-allowed":""}`,placeholder:"0"})}),i.jsx("div",{className:"w-16 text-center",children:i.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:p>0?`${f(c.name)}d6`:"-"})}),i.jsx("div",{className:"w-20 text-right",children:i.jsxs("span",{className:"stat-chip border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-xs",children:[T," BP"]})})]})]}),b&&p===0&&i.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400 px-2 mb-1",children:"Zero individual skills to enable group purchase"}),d.map(w=>{const j=e.skills[w.name]||0,E=Ic(w.name,e.skills,h),O=f(w.name),ye=k?0:Nt(j,w.costMultiplier);return i.jsxs("div",{className:"flex items-center justify-between py-2 pl-6 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("div",{className:"flex-1",children:i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:w.name})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"stat-chip border-gray-200 text-gray-600 text-xs",children:w.attribute.toUpperCase()}),k?i.jsx("input",{type:"number",value:E,readOnly:!0,className:"w-16 input-standard text-center border-gray-300 bg-gray-100 dark:bg-gray-700 cursor-not-allowed opacity-70"}):i.jsx("input",{type:"number",min:"0",max:"20",value:j,onChange:Te=>t(w.name,Math.max(0,parseInt(Te.target.value)||0)),className:"w-16 input-standard text-center border-blue-300 focus:ring-blue-500",placeholder:"0"}),i.jsx("div",{className:"w-16 text-center",children:i.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[O,"d6"]})}),i.jsx("div",{className:"w-20 text-right",children:i.jsxs("span",{className:"stat-chip border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-xs",children:[ye," BP"]})})]})]},w.name)})]},c.name)},q=c=>{const d=e.skills[c.name]||0,p=f(c.name),b=Nt(d,c.costMultiplier);return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("div",{className:"flex-1",children:i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:c.name})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"stat-chip border-gray-200 text-gray-600 text-xs",children:c.attribute.toUpperCase()}),i.jsx("input",{type:"number",min:"0",max:"20",value:d,onChange:k=>t(c.name,Math.max(0,parseInt(k.target.value)||0)),className:"w-16 input-standard text-center border-blue-300 focus:ring-blue-500",placeholder:"0"}),i.jsx("div",{className:"w-16 text-center",children:i.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-100",children:[p,"d6"]})}),i.jsx("div",{className:"w-20 text-right",children:i.jsxs("span",{className:"stat-chip border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-xs",children:[b," BP"]})})]})]},c.name)};return i.jsxs("div",{className:"panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx("h2",{children:"Skills"}),i.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["Skills: ",s," BP | Knowledge: ",l," BP"]})]}),i.jsxs("div",{className:"mb-4 text-xs text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-900 dark:bg-opacity-30 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"font-medium mb-1",children:"Dicepool = Rank + Attribute + Min(Rank, Tradition/2)"}),i.jsx("div",{children:"Individual Cost = (Rank + Rank + 2)"}),i.jsx("div",{children:"Group Cost = (Rank + Rank + 2)  2.5"}),i.jsx("div",{children:"Knowledge Cost = (Rank + Rank + 2)  0.5, discount = (LOG + INT)  10"})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:y.map(C)}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200 mb-3 border-b-2 border-blue-200 dark:border-blue-800 pb-2",children:"Ungrouped"}),i.jsx("div",{className:"space-y-1",children:g.map(q)})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 border-b-2 border-blue-200 dark:border-blue-800 pb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-200",children:"Knowledge Skills"}),i.jsxs("button",{onClick:r,className:"btn-primary bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1",children:[i.jsx(Fi,{size:14}),i.jsx("span",{children:"Add"})]})]}),i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:["50% cost | Discount: ",u," BP (LOG + INT)  10"]}),e.knowledgeSkills.length===0?i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:'No knowledge skills added. Click "Add" to create one.'}):i.jsx("div",{className:"space-y-1",children:e.knowledgeSkills.map((c,d)=>{const p=Nt(c.rank,.5);return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[i.jsx("div",{className:"flex-1 mr-3",children:i.jsx("input",{type:"text",value:c.name,onChange:b=>a(d,b.target.value,void 0),className:"w-full input-standard text-sm",placeholder:"e.g., Magic Knowledge, Criminal Organizations"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"stat-chip border-gray-200 text-gray-600 text-xs",children:"LOG"}),i.jsx("input",{type:"number",min:"0",max:"20",value:c.rank,onChange:b=>a(d,void 0,Math.max(0,parseInt(b.target.value)||0)),className:"w-16 input-standard text-center border-blue-300 focus:ring-blue-500",placeholder:"0"}),i.jsx("div",{className:"w-20 text-right",children:i.jsxs("span",{className:"stat-chip border-blue-200 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-xs",children:[p," BP"]})}),i.jsx("button",{onClick:()=>o(d),className:"p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded",title:"Remove",children:i.jsx(Vi,{size:14})})]})]},d)})}),e.knowledgeSkills.length>0&&i.jsxs("div",{className:"mt-2 text-xs text-right text-gray-600 dark:text-gray-400",children:["Total after discount: ",l," BP"]})]})]})}function Fc(){const{healthPools:e,defenseStats:t,resistStats:n,soakStats:r}=wt(),a=({label:o,value:s,suffix:l="",color:u="#00E5FF",maxValue:f=100,showBar:h=!1})=>i.jsxs("div",{className:"py-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-semibold text-cosmic-white",children:o}),i.jsxs("span",{className:"text-xl font-bold text-cyan-bright",children:[s,l]})]}),h&&i.jsx("div",{className:"h-2 rounded-full bg-navy-deep border border-navy-light overflow-hidden",children:i.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${Math.min(s/f*100,100)}%`,background:`linear-gradient(to right, ${u}80, ${u})`,boxShadow:`0 0 8px ${u}`}})})]});return i.jsxs("div",{className:"panel",children:[i.jsx("div",{className:"panel-header",children:i.jsx("h2",{children:"Character Stats"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-navy-deep p-4 rounded-lg border-2 border-cyan-electric",children:[i.jsx("h3",{className:"text-sm font-bold text-cyan-bright uppercase mb-4 pb-2 border-b-2 border-cyan-electric tracking-wider",children:"Health Pools"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(a,{label:"HP",value:e.hp,color:"#E74C3C",maxValue:50,showBar:!0}),i.jsx(a,{label:"Stamina",value:e.stam,color:"#FFB800",maxValue:50,showBar:!0}),i.jsx(a,{label:"Drain",value:e.drain,color:"#4A90E2",maxValue:50,showBar:!0}),i.jsx(a,{label:"Luck",value:e.luk,color:"#27AE60"})]})]}),i.jsxs("div",{className:"bg-navy-deep p-4 rounded-lg border-2 border-success",children:[i.jsx("h3",{className:"text-sm font-bold text-success uppercase mb-4 pb-2 border-b-2 border-success tracking-wider",children:"Defense"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(a,{label:"Dodge (Passive)",value:t.dodgePassive,color:"#00FFB8"}),i.jsx(a,{label:"Dodge (Active)",value:t.dodgeActive,color:"#00FFB8"})]})]}),i.jsxs("div",{className:"bg-navy-deep p-4 rounded-lg border-2 border-affinity-blue",children:[i.jsx("h3",{className:"text-sm font-bold uppercase mb-4 pb-2 border-b-2 tracking-wider",style:{color:"#4A90E2",borderColor:"#4A90E2"},children:"Resist"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(a,{label:"Physical Resist",value:n.physical,color:"#4A90E2"}),i.jsx(a,{label:"Mental Resist",value:n.mental,color:"#4A90E2"}),i.jsx(a,{label:"DV Threshold",value:n.dvThreshold,color:"#4A90E2"})]})]}),i.jsxs("div",{className:"bg-navy-deep p-4 rounded-lg border-2 border-warning",children:[i.jsx("h3",{className:"text-sm font-bold text-warning uppercase mb-4 pb-2 border-b-2 border-warning tracking-wider",children:"Soak"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(a,{label:"Armor Soak",value:r.armor,color:"#FFB800"}),i.jsx(a,{label:"Physical Soak",value:r.physical,color:"#FFB800"}),i.jsx(a,{label:"Mental Soak",value:r.mental,color:"#FFB800"}),i.jsx(a,{label:"Drain Soak",value:r.drain,color:"#FFB800"})]})]})]}),i.jsxs("div",{className:"mt-6 text-sm text-cosmic-grey bg-navy-deep p-5 rounded-lg border-2 border-navy-light space-y-2",children:[i.jsx("h4",{className:"font-bold text-cosmic-white mb-3 text-center",children:"Calculation Formulas"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"HP:"})," 16 + BOD"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"STAM:"})," 16 + WIL"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"DRAIN:"})," 16 + Cast Stat"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Dodge:"})," INT + REA (+ skill + Min(skill, tradition/2) for active)"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Physical Resist:"})," BOD + AGI"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Mental Resist:"})," WIL + CHA"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Armor Soak:"})," BOD + LOG/2"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Physical Soak:"})," STR + AGI/2"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Mental Soak:"})," WIL + CHA/2"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-cyan-bright font-semibold",children:"Drain Soak:"})," 2WIL"]})]})]})]})}function ll(e){const t={requirements:[],total:0};if(!e||e.trim()==="")return t;const n=e.match(/\((\d+)\)[^\(]*$/);n&&(t.total=parseInt(n[1],10));const r=e.split(",").filter(a=>a.trim()&&!a.trim().match(/^\(\d+\)$/));for(const a of r){const o=a.trim(),s=o.match(/(\d+)\(([A-Z\|]+)\)/);if(s){const f=parseInt(s[1],10),h=s[2].split("|");t.requirements.push({colors:h,isOr:!0,amount:f});continue}const l=o.match(/(\d+)([A-Z](?:\|[A-Z])+)/);if(l){const f=parseInt(l[1],10),h=l[2].split("|");t.requirements.push({colors:h,isOr:!0,amount:f});continue}const u=o.match(/(\d+)([A-Z])/);if(u){const f=parseInt(u[1],10),h=u[2];t.requirements.push({colors:[h],isOr:!1,amount:f})}}return t}function Yo(e){if(!e||!e.trim())return[{requirements:[],total:0}];const t=e.split(/\r?\n/).filter(n=>n.trim());return t.length===1?[ll(t[0])]:t.map(n=>ll(n))}function ul(e,t){const n=Yo(e);return n[t]||n[0]||{requirements:[],total:0}}function Tr(e,t){if(e.w+e.u+e.b+e.r+e.g<t.total)return!1;for(const r of t.requirements)if(r.isOr){if(r.colors.reduce((o,s)=>{const l=s.toLowerCase();return o+e[l]},0)<r.amount)return!1}else{const o=r.colors[0].toLowerCase();if(e[o]<r.amount)return!1}return!0}class bh extends N.Component{constructor(n){super(n);Ki(this,"handleReset",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r)}render(){return this.state.hasError?i.jsx("div",{className:"panel",children:i.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[i.jsx("div",{className:"w-20 h-20 rounded-full bg-error bg-opacity-20 flex items-center justify-center mb-6",children:i.jsx(_c,{size:40,className:"text-error"})}),i.jsx("h2",{className:"text-2xl font-bold text-cosmic-white mb-3",children:"Oops! Something went wrong"}),i.jsx("p",{className:"text-cosmic-grey mb-6 max-w-lg leading-relaxed",children:this.props.fallbackMessage||"An unexpected error occurred while rendering this section. The rest of your character sheet should still work fine."}),this.state.error&&i.jsxs("details",{className:"mb-6 text-left max-w-2xl w-full",children:[i.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-cyan-bright hover:text-cyan-electric mb-2",children:"View error details"}),i.jsxs("pre",{className:"text-xs bg-navy-deep p-4 rounded-lg border border-navy-light overflow-auto text-cosmic-grey",children:[this.state.error.toString(),this.state.error.stack&&`

${this.state.error.stack}`]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:this.handleReset,className:"btn-primary bg-cyan-electric hover:bg-cyan-bright text-navy-deep",children:"Try Again"}),i.jsx("a",{href:"https://github.com/anthropics/claude-code/issues",target:"_blank",rel:"noopener noreferrer",className:"btn-primary bg-navy-light hover:bg-navy-deep text-cosmic-white",children:"Report Issue"})]})]})}):this.props.children}}function vh(){const{character:e,addAbility:t,updateAbility:n,removeAbility:r}=vt(),{abilityDatabase:a,abilityCosts:o}=wt(),[s,l]=N.useState(""),[u,f]=N.useState("all"),[h,y]=N.useState(!1),g=N.useMemo(()=>{const c=new Set(a.map(d=>d.category));return["all",...Array.from(c).sort()]},[a]),m=N.useMemo(()=>a.filter(c=>{if(s){const d=s.toLowerCase();if(!c.name.toLowerCase().includes(d)&&!c.description.toLowerCase().includes(d)&&!c.rulesText.toLowerCase().includes(d))return!1}return!(u!=="all"&&c.category!==u||h&&!Yo(c.affinityReq).some(b=>Tr(e.affinities,b)))}),[a,s,u,h,e.affinities]),v=(c,d)=>{if(e.abilities.some(p=>p.name===c.name)){alert("Ability already added!");return}t({name:c.name,rank:d})},C=c=>{var p;if(!c.requirements||c.requirements.length===0)return"#4A5F7A";const d={w:"#FFF8DC",u:"#4A90E2",b:"#8BA3B8",r:"#E74C3C",g:"#27AE60"};if(c.requirements.length===1){const b=(p=c.requirements[0].colors[0])==null?void 0:p.toLowerCase();return d[b]||"#4A5F7A"}return c.requirements.length===2,"#FFB800"},q=c=>{var S;const d=e.abilities.some(w=>w.name===c.name),p=Array.isArray(c.bpCost);let b=[{requirements:[],total:0}];try{b=Yo(c.affinityReq||"")}catch(w){console.error("Error parsing affinity requirements for",c.name,w)}const k=b.some(w=>Tr(e.affinities,w)),T=C(b[0]);return i.jsxs("div",{className:`relative rounded-xl overflow-hidden transition-all duration-300 group ${d?"ring-2 ring-cyan-electric shadow-glow-cyan-md":k?"hover:shadow-panel-hover hover:-translate-y-1":"opacity-70"}`,style:{background:"linear-gradient(135deg, #1A2942 0%, #0A1628 100%)"},children:[i.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"url(/constellation-pattern.svg)",backgroundSize:"200px 200px"}}),i.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1",style:{background:T,boxShadow:`0 0 8px ${T}`}}),i.jsxs("div",{className:"relative z-10 p-5 border-2 border-navy-light rounded-xl",style:{borderLeftColor:T},children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsx("h4",{className:"font-bold text-lg text-cosmic-white flex-1",children:c.name}),c.affinityReq&&c.affinityReq.trim()&&i.jsx("div",{className:"flex gap-1",children:(S=b[0].requirements)==null?void 0:S.map((w,j)=>{var Te;const E={w:"#FFF8DC",u:"#4A90E2",b:"#8BA3B8",r:"#E74C3C",g:"#27AE60"},O={w:"W",u:"U",b:"B",r:"R",g:"G"},ye=(Te=w.colors[0])==null?void 0:Te.toLowerCase();return i.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border-2",style:{backgroundColor:E[ye]||"#4A5F7A",borderColor:"#2A3F5F",color:ye==="b"?"#E8F4F8":"#0A1628"},title:`${O[ye]}: ${w.amount}`,children:w.amount},j)})})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-cyan-electric text-cyan-bright",children:c.category}),i.jsx("span",{className:"text-sm font-mono font-semibold text-cosmic-grey",children:p?`${c.bpCost.join("/")} BP`:`${c.bpCost} BP`})]}),i.jsx("p",{className:"text-sm text-cosmic-white leading-relaxed mb-3",children:c.description}),c.rulesText&&i.jsx("div",{className:"p-3 bg-navy-deep rounded-lg border border-navy-light mb-4",children:i.jsx("p",{className:"text-xs text-cosmic-grey italic leading-relaxed",children:c.rulesText})}),p&&b.length>1&&i.jsx("div",{className:"mb-4 space-y-2",children:b.map((w,j)=>{var E;return i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsxs("span",{className:"font-semibold text-cyan-bright",children:["Rank ",j+1,":"]}),i.jsx("div",{className:"flex gap-1",children:(E=w.requirements)==null?void 0:E.map((O,ye)=>i.jsxs("span",{className:"text-cosmic-grey",children:[O.colors.map(Te=>Te.toUpperCase()).join("|"),":",O.amount]},ye))})]},j)})}),!d&&i.jsx("div",{className:"flex gap-2 mt-4",children:p?c.bpCost.map((w,j)=>{const E=ul(c.affinityReq||"",j),O=Tr(e.affinities,E);return i.jsxs("button",{onClick:()=>v(c,j),disabled:!O,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all ${O?"bg-cyan-electric text-navy-deep hover:bg-cyan-bright hover:shadow-glow-cyan-sm":"bg-navy-light text-cosmic-dim cursor-not-allowed opacity-50"}`,children:["Rank ",j+1]},j)}):i.jsxs("button",{onClick:()=>v(c,0),disabled:!k,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm transition-all ${k?"bg-cyan-electric text-navy-deep hover:bg-cyan-bright hover:shadow-glow-cyan-sm":"bg-navy-light text-cosmic-dim cursor-not-allowed opacity-50"}`,children:[i.jsx(Fi,{size:16}),"Add Ability"]})}),d&&i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-cyan-bright font-semibold text-sm",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-electric animate-pulse-glow"}),"Selected"]})]})]},c.name)};return i.jsx(bh,{fallbackMessage:"There was an error loading the abilities. Please try refreshing the page or report this issue if it persists.",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsxs("div",{className:"panel",children:[i.jsx("h3",{className:"font-bold text-lg mb-4 text-cosmic-white",children:"Filters"}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(Lp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-cosmic-grey",size:16}),i.jsx("input",{type:"text",value:s,onChange:c=>l(c.target.value),placeholder:"Search abilities...",className:"w-full pl-9 pr-3 py-2 input-standard"}),s&&i.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-cosmic-grey hover:text-cyan-electric transition-colors",children:i.jsx(zp,{size:16})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-semibold text-cosmic-white",children:"Category"}),i.jsx("select",{value:u,onChange:c=>f(c.target.value),className:"w-full input-standard",children:g.map(c=>i.jsx("option",{value:c,children:c==="all"?"All Categories":c},c))})]}),i.jsxs("label",{className:"flex items-center gap-2 mt-4 cursor-pointer group",children:[i.jsx("input",{type:"checkbox",checked:h,onChange:c=>y(c.target.checked),className:"rounded bg-navy-deep border-navy-light checked:bg-cyan-electric checked:border-cyan-electric"}),i.jsx("span",{className:"text-sm text-cosmic-white group-hover:text-cyan-bright transition-colors",children:"Show only available"})]})]}),i.jsxs("div",{className:"panel",children:[i.jsx("h3",{className:"font-bold text-lg mb-4 text-cosmic-white",children:"Selected"}),i.jsx("div",{className:"text-4xl font-bold text-center py-6 text-cyan-bright",children:e.abilities.length}),i.jsxs("div",{className:"text-sm text-cosmic-grey text-center font-semibold",children:[o," BP Total"]})]})]}),i.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.abilities.length>0&&i.jsxs("div",{className:"panel",children:[i.jsxs("h3",{className:"font-bold text-xl mb-4 text-cosmic-white",children:["Your Abilities ",i.jsxs("span",{className:"text-cyan-bright",children:["(",e.abilities.length,")"]})]}),i.jsx("div",{className:"space-y-3",children:e.abilities.map(c=>{const d=a.find(k=>k.name===c.name);if(!d)return null;const p=Array.isArray(d.bpCost),b=p?d.bpCost[c.rank]||0:d.bpCost;return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-navy-deep rounded-lg border-2 border-cyan-electric hover:shadow-glow-cyan-sm transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-cyan-electric animate-pulse-glow"}),i.jsx("span",{className:"font-semibold text-cosmic-white",children:c.name}),p&&i.jsx("select",{value:c.rank,onChange:k=>n(c.name,parseInt(k.target.value)),className:"px-3 py-1 text-sm rounded-lg input-standard font-semibold",children:d.bpCost.map((k,T)=>{const S=d.affinityReq?ul(d.affinityReq,T):{requirements:[],total:0},w=Tr(e.affinities,S);return i.jsxs("option",{value:T,disabled:!w,children:["Rank ",T+1," (",k," BP)",!w&&" - Need affinity"]},T)})}),i.jsx("span",{className:"text-sm text-cosmic-grey",children:d.category}),i.jsxs("span",{className:"text-sm font-bold text-cyan-bright ml-auto",children:[b," BP"]})]}),i.jsx("button",{onClick:()=>r(c.name),className:"p-2 hover:bg-error hover:bg-opacity-20 rounded-lg transition-all ml-3",title:"Remove ability",children:i.jsx(Vi,{size:18,className:"text-error"})})]},c.name)})})]}),i.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:m.length===0?i.jsxs("div",{className:"col-span-2 text-center py-16 panel",children:[i.jsx("p",{className:"text-xl text-cosmic-grey font-semibold",children:"No abilities found matching your criteria"}),i.jsx("p",{className:"text-sm text-cosmic-dim mt-2",children:"Try adjusting your filters or search term"})]}):m.map(q)}),i.jsxs("div",{className:"text-sm text-cosmic-grey text-center font-semibold",children:["Showing ",i.jsx("span",{className:"text-cyan-bright",children:m.length})," of ",i.jsx("span",{className:"text-cyan-bright",children:a.length})," abilities"]})]})]})})}function wh(){const{character:e,addWeapon:t,updateWeapon:n,removeWeapon:r}=vt(),{weaponDicepools:a}=wt(),[o,s]=N.useState(null),[l,u]=N.useState(null),f=()=>{const m={id:crypto.randomUUID(),name:"New Weapon",type:"1h",power:0,reach:0,shield:"none",element:"",skillName:"Weapon"};u(m),s(m.id)},h=m=>{u({...m}),s(m.id)},y=()=>{l&&(e.weapons.some(m=>m.id===l.id)?n(l):t(l),s(null),u(null))},g=()=>{s(null),u(null)};return i.jsxs("div",{className:"panel",children:[i.jsxs("div",{className:"panel-header",children:[i.jsx("h2",{children:"Weapons"}),i.jsxs("button",{onClick:f,className:"btn-primary bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(Fi,{size:16}),i.jsx("span",{children:"Add Weapon"})]})]}),l&&!e.weapons.some(m=>m.id===l.id)&&o===l.id&&i.jsx("div",{className:"mb-6 rounded-xl overflow-hidden bg-navy-mid border-2 border-cyan-electric shadow-glow-cyan-md",children:i.jsxs("div",{className:"p-5",children:[i.jsx("h3",{className:"text-xl font-bold text-cosmic-white mb-4",children:"Add New Weapon"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Name"}),i.jsx("input",{type:"text",value:l.name,onChange:m=>u({...l,name:m.target.value}),className:"w-full input-standard"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Type"}),i.jsxs("select",{value:l.type,onChange:m=>u({...l,type:m.target.value}),className:"w-full input-standard",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"1h",children:"1-Handed"}),i.jsx("option",{value:"2h",children:"2-Handed"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Shield"}),i.jsxs("select",{value:l.shield,onChange:m=>u({...l,shield:m.target.value}),className:"w-full input-standard",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"buckler",children:"Buckler"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"heavy",children:"Heavy"}),i.jsx("option",{value:"tower",children:"Tower"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Power"}),i.jsx("input",{type:"number",value:l.power,onChange:m=>u({...l,power:parseInt(m.target.value)||0}),className:"w-full input-standard"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Reach"}),i.jsx("input",{type:"number",value:l.reach,onChange:m=>u({...l,reach:parseInt(m.target.value)||0}),className:"w-full input-standard"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Element (optional)"}),i.jsx("input",{type:"text",value:l.element||"",onChange:m=>u({...l,element:m.target.value}),className:"w-full input-standard",placeholder:"e.g., Fire, Ice, Lightning"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Skill (optional)"}),i.jsx("input",{type:"text",value:l.skillName||"",onChange:m=>u({...l,skillName:m.target.value}),className:"w-full input-standard",placeholder:"e.g., Weapon"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:y,className:"flex-1 btn-primary bg-cyan-electric hover:bg-cyan-bright text-navy-deep justify-center",children:"Save Weapon"}),i.jsx("button",{onClick:g,className:"flex-1 btn-primary bg-navy-light hover:bg-navy-deep text-cosmic-white justify-center",children:"Cancel"})]})]})}),e.weapons.length===0&&!l?i.jsx("div",{className:"text-center py-8 text-cosmic-grey",children:'No weapons added yet. Click "Add Weapon" to get started.'}):i.jsx("div",{className:"space-y-4",children:e.weapons.map(m=>{const v=a.find(c=>c.weaponId===m.id),C=(v==null?void 0:v.dicepool)||0,q=o===m.id;return i.jsx("div",{className:"rounded-xl overflow-hidden bg-navy-mid border-2 border-navy-light hover:border-cyan-electric transition-all",children:q?i.jsxs("div",{className:"p-5 border-2 border-cyan-electric bg-navy-deep",children:[i.jsx("h3",{className:"text-xl font-bold text-cosmic-white mb-4",children:"Edit Weapon"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Name"}),i.jsx("input",{type:"text",value:(l==null?void 0:l.name)||m.name,onChange:c=>u({...l||m,name:c.target.value}),className:"w-full input-standard"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Type"}),i.jsxs("select",{value:(l==null?void 0:l.type)||m.type,onChange:c=>u({...l||m,type:c.target.value}),className:"w-full input-standard",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"1h",children:"1-Handed"}),i.jsx("option",{value:"2h",children:"2-Handed"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Shield"}),i.jsxs("select",{value:(l==null?void 0:l.shield)||m.shield,onChange:c=>u({...l||m,shield:c.target.value}),className:"w-full input-standard",children:[i.jsx("option",{value:"none",children:"None"}),i.jsx("option",{value:"buckler",children:"Buckler"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"heavy",children:"Heavy"}),i.jsx("option",{value:"tower",children:"Tower"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Power"}),i.jsx("input",{type:"number",value:(l==null?void 0:l.power)??m.power,onChange:c=>u({...l||m,power:parseInt(c.target.value)||0}),className:"w-full input-standard"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Reach"}),i.jsx("input",{type:"number",value:(l==null?void 0:l.reach)??m.reach,onChange:c=>u({...l||m,reach:parseInt(c.target.value)||0}),className:"w-full input-standard"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Element (optional)"}),i.jsx("input",{type:"text",value:(l==null?void 0:l.element)??m.element??"",onChange:c=>u({...l||m,element:c.target.value}),className:"w-full input-standard",placeholder:"e.g., Fire, Ice, Lightning"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-cosmic-white mb-2",children:"Skill (optional)"}),i.jsx("input",{type:"text",value:(l==null?void 0:l.skillName)??m.skillName??"",onChange:c=>u({...l||m,skillName:c.target.value}),className:"w-full input-standard",placeholder:"e.g., Weapon"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:y,className:"flex-1 btn-primary bg-cyan-electric hover:bg-cyan-bright text-navy-deep justify-center",children:"Save Changes"}),i.jsx("button",{onClick:g,className:"flex-1 btn-primary bg-navy-light hover:bg-navy-deep text-cosmic-white justify-center",children:"Cancel"})]})]}):i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-lg text-cosmic-white",children:m.name}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[i.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-cyan-muted text-cyan-bright",children:m.type}),i.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-error text-error",children:["Power: ",m.power]}),i.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-success text-success",children:["Reach: ",m.reach]}),m.shield!=="none"&&i.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-cosmic-grey text-cosmic-grey",children:m.shield}),m.element&&i.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-warning text-warning",children:m.element}),m.skillName&&i.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-navy-deep border border-cosmic-dim text-cosmic-grey",children:m.skillName})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("span",{className:"text-2xl font-bold text-cyan-bright",children:[C,"d6"]}),i.jsx("span",{className:"text-sm text-cosmic-grey ml-2",children:"dicepool"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>h(m),className:"p-2 text-cyan-electric hover:bg-cyan-electric hover:bg-opacity-20 rounded-lg transition-all",title:"Edit",children:i.jsx(Wp,{size:16})}),i.jsx("button",{onClick:()=>{confirm("Delete this weapon?")&&r(m.id)},className:"p-2 text-error hover:bg-error hover:bg-opacity-20 rounded-lg transition-all",title:"Delete",children:i.jsx(Vi,{size:16})})]})]})})},m.id)})}),i.jsxs("div",{className:"mt-4 text-xs text-cosmic-grey bg-navy-deep p-3 rounded-lg border border-navy-light",children:[i.jsx("span",{className:"font-semibold text-cyan-bright",children:"Formula:"})," Weapon dicepool = attribute + skill_rank + reach + Min(skill_rank, tradition/2)"]})]})}function xh(){const{character:e,setNotes:t,setInventory:n}=vt();return i.jsxs("div",{className:"panel",children:[i.jsx("div",{className:"panel-header",children:i.jsx("h2",{children:"Notes & Inventory"})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Character Notes"}),i.jsx("textarea",{value:e.notes,onChange:r=>t(r.target.value),rows:10,className:"w-full input-standard font-mono text-sm border-purple-300 focus:ring-purple-500",placeholder:"Add character notes, backstory, personality traits, goals, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inventory"}),i.jsx("textarea",{value:e.inventory,onChange:r=>n(r.target.value),rows:10,className:"w-full input-standard font-mono text-sm border-green-300 focus:ring-green-500",placeholder:"List equipment, items, potions, spell components, etc."})]})]})]})}function kh(){const[e,t]=N.useState(!1),{character:n}=Ui(),{healthPools:r,defenseStats:a,bpSpent:o,isOverBudget:s}=wt(),l=r.hp,u=a.dodgeActive;return i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-navy-mid border-t-4 border-cyan-electric shadow-glow-cyan-lg z-50 no-print constellation-border",children:[i.jsxs("button",{onClick:()=>t(!e),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-navy-light transition-all relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsxs("div",{className:"stat-chip border-error",style:{borderColor:"#E74C3C"},children:[i.jsx(Dp,{size:18,style:{color:"#E74C3C"}}),i.jsxs("span",{className:"text-lg font-bold",children:["HP: ",l]})]}),i.jsxs("div",{className:"stat-chip border-success",children:[i.jsx(Ac,{size:18,className:"text-success"}),i.jsxs("span",{className:"text-lg font-bold",children:["Dodge: ",u]})]}),i.jsxs("div",{className:"stat-chip border-affinity-blue",style:{borderColor:"#4A90E2"},children:[i.jsx(zi,{size:18,style:{color:"#4A90E2"}}),i.jsxs("span",{className:"text-lg font-bold",children:["Tradition ",n.tradition]})]}),i.jsxs("div",{className:`stat-chip ${s?"border-error bg-error bg-opacity-20":"border-success bg-success bg-opacity-20"}`,children:[i.jsx(qp,{size:18,className:s?"text-error":"text-success"}),i.jsxs("span",{className:"text-lg font-bold",children:[o," / ",n.bpBudget," BP"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-cosmic-grey font-semibold",children:e?"Hide Details":"Show Details"}),i.jsx(Ap,{className:`transition-transform text-cyan-bright ${e?"rotate-180":""}`,size:24})]})]}),e&&i.jsx("div",{className:"border-t-2 border-navy-light p-6 max-h-[70vh] overflow-y-auto bg-navy-deep",children:i.jsx(Fc,{})})]})}const Ch=[{id:"core",label:"Core",icon:Ac},{id:"skills",label:"Skills",icon:Up},{id:"abilities",label:"Abilities",icon:zi},{id:"equipment",label:"Equipment",icon:Ip},{id:"notes",label:"Notes",icon:Nc}];function Th(){const[e,t]=N.useState("core"),{themeColors:n}=Oi();return i.jsxs("div",{className:`min-h-screen ${n.background}`,children:[i.jsx(fh,{}),i.jsx("nav",{className:"bg-navy-mid border-b-2 border-navy-light constellation-border shadow-panel sticky top-0 z-40 no-print",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsx("div",{className:"flex items-center gap-2",children:Ch.map(r=>{const a=r.icon;return i.jsxs("button",{onClick:()=>t(r.id),className:`tab-button ${e===r.id?"active":""}`,children:[i.jsx(a,{size:18}),i.jsx("span",{children:r.label})]},r.id)})})})}),i.jsxs("main",{className:"container mx-auto px-4 py-6 mb-24",children:[e==="core"&&i.jsx(Sh,{}),e==="skills"&&i.jsx(Rh,{}),e==="abilities"&&i.jsx(_h,{}),e==="equipment"&&i.jsx(Nh,{}),e==="notes"&&i.jsx(Eh,{})]}),i.jsx(kh,{})]})}function Sh(){return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx(ph,{}),i.jsx(mh,{})]}),i.jsx(Fc,{})]})}function Rh(){return i.jsx(yh,{})}function _h(){return i.jsx(vh,{})}function Nh(){return i.jsx(wh,{})}function Eh(){return i.jsx(xh,{})}function jh(){return i.jsx(Rp,{children:i.jsx(Tp,{children:i.jsxs(Cp,{children:[i.jsx(Th,{}),i.jsx(Yp,{})]})})})}Za.createRoot(document.getElementById("root")).render(i.jsx(ud.StrictMode,{children:i.jsx(jh,{})}));
